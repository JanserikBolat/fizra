(function(t){function e(e){for(var s,o,r=e[0],c=e[1],l=e[2],u=0,p=[];u<r.length;u++)o=r[u],Object.prototype.hasOwnProperty.call(a,o)&&a[o]&&p.push(a[o][0]),a[o]=0;for(s in c)Object.prototype.hasOwnProperty.call(c,s)&&(t[s]=c[s]);d&&d(e);while(p.length)p.shift()();return n.push.apply(n,l||[]),i()}function i(){for(var t,e=0;e<n.length;e++){for(var i=n[e],s=!0,r=1;r<i.length;r++){var c=i[r];0!==a[c]&&(s=!1)}s&&(n.splice(e--,1),t=o(o.s=i[0]))}return t}var s={},a={app:0},n=[];function o(e){if(s[e])return s[e].exports;var i=s[e]={i:e,l:!1,exports:{}};return t[e].call(i.exports,i,i.exports,o),i.l=!0,i.exports}o.m=t,o.c=s,o.d=function(t,e,i){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},o.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(o.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var s in t)o.d(i,s,function(e){return t[e]}.bind(null,s));return i},o.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="/fizra/";var r=window["webpackJsonp"]=window["webpackJsonp"]||[],c=r.push.bind(r);r.push=e,r=r.slice();for(var l=0;l<r.length;l++)e(r[l]);var d=c;n.push([0,"chunk-vendors"]),i()})({0:function(t,e,i){t.exports=i("56d7")},"034f":function(t,e,i){"use strict";i("85ec")},"04af":function(t,e,i){"use strict";i("54fa")},"0b34":function(t,e,i){"use strict";i("1f2e")},"0c12":function(t,e,i){},"0cd9":function(t,e,i){"use strict";i("f241")},"0eb5":function(t,e,i){},1186:function(t,e,i){"use strict";i("0c12")},1326:function(t,e,i){"use strict";i("8c6f")},1619:function(t,e,i){},"164f":function(t,e,i){},"1ecf":function(t,e,i){},"1f20":function(t,e,i){"use strict";i("2efe")},"1f2e":function(t,e,i){},"24ab":function(t,e,i){},2663:function(t,e,i){"use strict";i("390f")},2841:function(t,e,i){},"2a13":function(t,e,i){"use strict";i("97fd")},"2b29":function(t,e,i){"use strict";i("5431")},"2efe":function(t,e,i){},3158:function(t,e,i){"use strict";i("908a")},"32a2":function(t,e,i){},"32af":function(t,e,i){"use strict";i("1619")},"344e":function(t,e,i){},"390f":function(t,e,i){},"3a33":function(t,e,i){},"41c9":function(t,e,i){},4268:function(t,e,i){},4518:function(t,e,i){"use strict";i("5372")},"4a00":function(t,e,i){},"513e":function(t,e,i){"use strict";i("d380")},"516b":function(t,e,i){"use strict";i("e5dd")},5372:function(t,e,i){},"53a4":function(t,e,i){},"53c1":function(t,e,i){},5431:function(t,e,i){},"54fa":function(t,e,i){},"54fe":function(t,e,i){},"558f":function(t,e,i){},5622:function(t,e,i){"use strict";i("344e")},"56d7":function(t,e,i){"use strict";i.r(e);i("e260"),i("e6cf"),i("cca6"),i("a79d");var s,a,n,o,r=i("2b0e"),c=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{attrs:{id:"app"}},[i("router-view")],1)},l=[],d={name:"App"},u=d,p=(i("034f"),i("2877")),f=Object(p["a"])(u,c,l,!1,null,null,null),h=f.exports,m=i("5530"),v=i("8c4f"),_=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"register__wrapper"},[i("Spinner",{attrs:{start:t.start}}),i("order-header",{scopedSlots:t._u([{key:"newUser",fn:function(){return[i("p",{staticClass:"new__order"},[t._v("Новый клиент")]),i("div",{staticClass:"close__order",on:{click:function(e){return t.goBack()}}},[i("i",{staticClass:"fa fa-times-circle",attrs:{"aria-hidden":"true"}})])]},proxy:!0}])}),i("user-register-form",{on:{createOrder:t.createOrder}})],1)},g=[],y=i("1da1"),b=(i("96cf"),i("d81d"),i("2f62")),k=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"header"},[i("div",{staticClass:"header__inner"},[i("div",{staticClass:"header__top"},[t._t("orderHeader"),t._t("newUser")],2),t._t("headerBottom")],2)])},C=[],O={},w=O,x=(i("9fee"),Object(p["a"])(w,k,C,!1,null,"5f49963d",null)),j=x.exports,P=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"userRegister__form"},[i("div",{staticClass:"userRegister__inner"},[i("div",{staticClass:"telephone__input"},[i("div",{staticClass:"search__input"},[i("label",{staticClass:"phone__label",attrs:{for:"phone"}},[t._v("Номер телефона")]),i("br"),i("input",{directives:[{name:"model",rawName:"v-model",value:t.telephone,expression:"telephone"},{name:"mask",rawName:"v-mask",value:"+7 ### ### ## ##",expression:"'+7 ### ### ## ##'"}],attrs:{type:"tel",id:"phone",name:"phone",title:"Ваш телефонный номер",disabled:""},domProps:{value:t.telephone},on:{input:function(e){e.target.composing||(t.telephone=e.target.value)}}})])]),t.order.client.is_temporary?i("div",{staticClass:"nameSurname__input"},[i("div",{staticClass:"name__input"},[i("label",{staticClass:"name__label",attrs:{for:"name"}},[t._v("Имя")]),i("br"),i("input",{directives:[{name:"model",rawName:"v-model",value:t.name,expression:"name"}],attrs:{type:"text",id:"name",name:"name",title:"Ваше имя"},domProps:{value:t.name},on:{input:function(e){e.target.composing||(t.name=e.target.value)}}})]),i("div",{staticClass:"surname__input"},[i("label",{staticClass:"surname__label",attrs:{for:"surname"}},[t._v("Фамилия")]),i("br"),i("input",{directives:[{name:"model",rawName:"v-model",value:t.surname,expression:"surname"}],attrs:{type:"text",id:"surname",name:"surname",title:"Ваша фамилия"},domProps:{value:t.surname},on:{input:function(e){e.target.composing||(t.surname=e.target.value)}}})])]):t._e(),t.order.client.is_temporary?t._e():i("div",{staticClass:"userInfo"},[i("div",{staticClass:"userInfo__inner"},[i("div",{staticClass:"userInfo__info"},[i("div",{staticClass:"info__nameSurname"},[t._v(" "+t._s(t.order.client.firstname)+t._s(t.order.client.lastname?t.order.client.lastname:"")+" ")]),i("div",{staticClass:"textWhatsapp"},[t._v(" Написать в Whatsapp ")])]),i("div",{staticClass:"userInfo__photo"},[i("img",{attrs:{src:"https://almvtst.ml/storage/profile_avatars/"+t.order.client.avatar,alt:""}})])])]),i("div",{staticClass:"client__type"},[i("div",{staticClass:"radio-buttons"},[i("div",{staticClass:"type__individual"},[i("label",{staticClass:"custom-radio"},[i("input",{attrs:{type:"radio",name:"radio",checked:""},on:{click:function(e){t.companyChecked=!1}}}),t._m(0)])]),i("div",{staticClass:"type__company"},[i("label",{staticClass:"custom-radio"},[i("input",{attrs:{type:"radio",name:"radio"},on:{click:function(e){t.companyChecked=!0}}}),t._m(1)])])])]),t.companyChecked?i("div",{staticClass:"company__input"},[i("label",{staticClass:"company__label",attrs:{for:"company"}},[t._v("Компания")]),i("br"),i("input",{directives:[{name:"model",rawName:"v-model",value:t.company,expression:"company"}],attrs:{type:"text",id:"company",name:"company",title:"Компания"},domProps:{value:t.company},on:{input:function(e){e.target.composing||(t.company=e.target.value)}}})]):t._e(),i("div",{staticClass:"payload"},[i("p",[t._v("Способ оплаты")]),i("div",{staticClass:"pay__cash"},[i("input",{staticStyle:{"margin-right":"10px"},attrs:{type:"radio",name:"payload",title:"Наличными",checked:""},on:{click:function(e){t.pay__type="cash"}}}),i("label",{staticClass:"cash"},[t._v("Наличными")])]),i("div",{staticClass:"pay__card"},[i("input",{staticStyle:{"margin-right":"10px"},attrs:{type:"radio",name:"payload",title:"По реквизитам"},on:{click:function(e){t.pay__type="card"}}}),i("label",{staticClass:"card"},[t._v("По реквизитам")])])]),i("div",{staticClass:"create__order",on:{click:t.createOrder}},[t._v(" Создать заказ ")])])])},S=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("span",{staticClass:"radio-btn"},[i("p",[t._v("Физ. лицо")])])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("span",{staticClass:"radio-btn"},[i("p",[t._v("Юр. лицо")])])}],D=(i("b0c0"),{data:function(){return{name:"",surname:"",telephone:"",companyChecked:!1,company:"",pay__type:"cash",userExists:!1}},mounted:function(){this.name=this.order.client.firstname,this.surname=this.order.client.lastname,this.telephone=this.order.client.phone},methods:{createOrder:function(){this.$store.dispatch("order/setPayType",this.pay__type),this.companyChecked&&this.$store.dispatch("order/setCompany",this.company),this.order.client.is_temporary&&this.$store.dispatch("order/setClient",Object(m["a"])(Object(m["a"])({},this.order.client),{},{firstname:this.name,lastname:this.surname,company:this.company})),this.$emit("createOrder")}},computed:Object(m["a"])({},Object(b["c"])("order",["order"]))}),I=D,$=(i("3158"),Object(p["a"])(I,P,S,!1,null,"1586dd70",null)),N=$.exports,A=function(){var t=this,e=t.$createElement,i=t._self._c||e;return t.start?i("div",{staticClass:"spinner__wrapper"},[t._m(0)]):t._e()},M=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"spinner"},[i("div",{staticClass:"lds-ring"},[i("div"),i("div"),i("div"),i("div")])])}],B={props:["start"]},F=B,E=(i("dbc9"),Object(p["a"])(F,A,M,!1,null,"6ccb6851",null)),T=E.exports,V=i("5a0c"),R=i.n(V),H=(i("276b"),i("62c3")),Y=i.n(H),W={components:{OrderHeader:j,UserRegisterForm:N,Spinner:T},data:function(){return{start:!1}},methods:{goBack:function(){this.$store.dispatch("booking/resetState"),this.$store.dispatch("order/resetState"),this.$router.push({path:"/"})},createOrder:function(){var t=this;return Object(y["a"])(regeneratorRuntime.mark((function e(){var i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.start=!0,i={phone:t.order.client.phone,order:{start_date:t.order.start_date.format("YYYY-MM-DD"),end_date:t.order.end_date.format("YYYY-MM-DD"),payment_type:t.order.payment_type,type:t.order.type},bookings:t.order.bookings.map((function(t){var e={playfield_id:t.playfield_id,start_time:t.start_time,end_time:t.end_time,discount:t.discount,price:t.price,date:t.date.format("YYYY-MM-DD")};return e}))},t.order.client.is_temporary&&(i["client"]={firstname:t.order.client.firstname,lastname:t.order.client.lastname}),e.next=5,Y.a.post("https://almvtst.ml/crm/user/".concat(localStorage.getItem("id"),"/order/make"),Object(m["a"])({},i),{headers:{Authorization:"Bearer ".concat(localStorage.getItem("access_token"))}}).then((function(e){console.log(e),t.$store.dispatch("order/setOrder",e.data.order),t.$store.dispatch("order/replaceBooking",e.data.bookings),t.$store.dispatch("order/setClient",e.data.client)}));case 5:t.$router.push({path:"/order/".concat(t.order.orderId)});case 6:case"end":return e.stop()}}),e)})))()},durationFormat:function(t){var e=Math.floor(t/60),i=t%60;return V().hour(e).minute(i).second(0).format("HH:mm:ss")}},computed:Object(m["a"])(Object(m["a"])(Object(m["a"])({},Object(b["b"])("order",["getOrder","getClient","getAllDiscount","getAllPaid","getAllCost"])),Object(b["c"])("booking",["booking"])),Object(b["c"])("order",["order"]))},L=W,J=(i("e781"),Object(p["a"])(L,_,g,!1,null,"4ab5e310",null)),z=J.exports,U=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{ref:"main",staticClass:"timetable__wrapper"},[i("MainHeader",{attrs:{filterType:"allTime"}}),t._l(t.dates,(function(e,s){return i("div",{key:s,staticClass:"content"},[i("DateHeader",{attrs:{date:e,buttonNeeded:!1}}),i("Timetable",{attrs:{id:s,date:e,infoAboutDay:t.infoAboutDay[s]},on:{move:t.move}})],1)})),i("BottomMenu",{attrs:{active:"calendar"}})],2)},q=[],Z=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"timetable",attrs:{id:t.id}},[t.getLen||t.show?i("div",{staticClass:"backdrop",on:{click:t.closePopup}}):t._e(),i("div",{staticClass:"container",class:t.getLen?"active":""},[i("div",{staticClass:"timetable__content",class:t.getLen?"active":""},[t.isToday?i("div",{staticClass:"redLine",style:t.moveRedLine()}):t._e(),i("div",{staticClass:"timetable__fields"},[i("div",{staticClass:"timetable__field empty"}),t._l(t.getFacility,(function(e){return i("div",{key:e.id,staticClass:"timetable__field"},[t._v(" "+t._s(e.id)+" ")])}))],2),i("div",{staticClass:"timetable__time__cells"},[i("div",{staticClass:"timetable__timeline"},t._l(t.timelines,(function(e,s){return i("div",{key:s,staticClass:"timetable__time"},[i("p",[t._v(t._s(e))])])})),0),t._l(t.getFacility,(function(e){return i("div",{key:e.id,staticClass:"timetable__cells"},t._l(t.timelines.slice(0,-1),(function(s,a){return i("Cell",{key:a,class:{selected:t.selectedCells.indexOf(e.id+"_"+a)>=0,notAvaiable:!t.isAvaiable},style:t.timelineStyles[e.id][a],attrs:{value:t.cellValues[e.id][a]},on:{makeOrder:function(i){t.isAvaiable&&t.makeOrder(a,e.id)},showInfoAboutOrder:function(i){return t.showOrderInfo(a,e.id)}}})})),1)}))],2)])]),t.selectedCells.length&&!t.show?i("OrderPopup",{on:{closePopup:function(e){return t.closePopup()}}}):t._e(),t.show?i("OrderInfoPopup",{attrs:{info:t.infoToShow}}):t._e()],1)},G=[],K=(i("99af"),i("c740"),i("b64b"),i("ac1f"),i("1276"),i("4de4"),function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"popup"},[i("div",{staticClass:"popup__inner"},[i("div",{staticClass:"popup__order"},[t._m(0),i("div",{staticClass:"order__duration__wrapper"},[i("p",{staticClass:"order__duration"},[t._v(t._s(t.getDuration))])]),i("div",{staticClass:"close__popup",on:{click:t.closePopup}},[i("div",{staticClass:"close__button"})])]),i("div",{staticClass:"popup__orderDescription"},[i("div",{staticClass:"order__desription"},[i("p",{staticClass:"order__date"},[t._v(t._s(t.getDateFormat))]),i("p",{staticClass:"order__time"},[t._v(t._s(t.booking.start_time)+" - "+t._s(t.booking.end_time))]),i("p",{staticClass:"order__cost"},[t._v(t._s(t.booking.price)+" тг")])]),i("select",{directives:[{name:"model",rawName:"v-model",value:t.orderType,expression:"orderType"}],staticClass:"order__type",on:{change:function(e){var i=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.orderType=e.target.multiple?i:i[0]}}},t._l(t.types,(function(e,s){return i("option",{key:s},[t._v(t._s(e))])})),0)]),i("div",{staticClass:"continue__order"},[i("button",{staticClass:"continue__button",on:{click:function(e){return t.continueOrder()}}},[t._v("Продолжить")])])])])}),Q=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"new__order__wrapper"},[i("p",{staticClass:"new__order"},[t._v("Новый заказ")])])}],X={data:function(){return{types:["Разовая бронь","Долгосрочная бронь"],orderType:"Разовая бронь"}},methods:{closePopup:function(){this.$emit("closePopup")},continueOrder:function(){this.$store.dispatch("order/setType","Разовая бронь"===this.orderType?1:0),this.$store.dispatch("order/setDate",{start_date:this.booking.date,end_date:this.booking.date}),this.$store.dispatch("order/addBooking",this.getBooking),"Разовая бронь"===this.orderType?this.$router.push({name:"order"}):"Долгосрочная бронь"===this.orderType&&this.$router.push({name:"longTermOrder"})}},computed:Object(m["a"])(Object(m["a"])(Object(m["a"])(Object(m["a"])({},Object(b["c"])("booking",["booking"])),Object(b["c"])("facility",["facility"])),Object(b["b"])("booking",["getBooking","getDuration"])),{},{getDateFormat:function(){return V(this.booking.date).format("DD MMMM, dd")}})},tt=X,et=(i("949a"),Object(p["a"])(tt,K,Q,!1,null,"9c409e34",null)),it=et.exports,st=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"timetable__cell",class:{reserved:t.isReserved},on:{click:function(e){return t.handleClick()}}},[t._v(" "+t._s(t.value)+" ")])},at=[],nt={data:function(){return{isReserved:!1}},props:["field","index","value"],methods:{handleClick:function(){this.isReserved?this.$emit("showInfoAboutOrder"):this.$emit("makeOrder")}}},ot=nt,rt=(i("f4a1"),Object(p["a"])(ot,st,at,!1,null,"4224ae89",null)),ct=rt.exports,lt=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"orderInfo__popup"},[i("div",{staticClass:"orderInfo__inner"},[i("div",{staticClass:"orderInfo__top"},[i("div",{staticClass:"orderInfo__left"},[i("div",{staticClass:"order__number"},[t._v(" Заказ №"+t._s(t.info.orderId)+" ")]),i("div",{staticClass:"order__remain"},[t._v(" Бронь, "+t._s(t.getDate)+" ")])]),i("div",{staticClass:"orderInfo__right"},[i("client-card-mini",{attrs:{order:t.info}})],1)]),i("div",{staticClass:"orderInfo__content"},[i("div",{staticClass:"orderInfo__remain margin-bottom"},[i("div",{staticClass:"orderInfo__key"},[t._v(" Осталось броней ")]),i("div",{staticClass:"orderInfo__value"},[t._v(" "+t._s(t.getRemainBookings)+" ")])]),i("div",{staticClass:"orderInfo__details margin-bottom"},[i("div",{staticClass:"orderInfo__key"},[t._v(" Детали ")]),i("div",{staticClass:"orderInfo__value"},[t._v(" "+t._s(t.info.bookingInfo.start_time)+"-"+t._s(t.info.bookingInfo.end_time)+", Площадка "+t._s(t.info.bookingInfo.field_id)+" ")])]),i("div",{staticClass:"orderInfo__cost margin-bottom"},[i("div",{staticClass:"orderInfo__key"},[t._v(" Общая сумма ")]),i("div",{staticClass:"orderInfo__value"},[t._v(" "+t._s(t.info.bookingInfo.price)+" ")])]),i("div",{staticClass:"orderInfo__payType margin-bottom"},[i("div",{staticClass:"orderInfo__key"},[t._v(" Способ оплаты ")]),i("div",{staticClass:"orderInfo__value"},[t._v(" "+t._s("cash"===t.info.pay__type?"Наличными":"По реквизитам")+" ")])]),i("div",{staticClass:"orderInfo__paid margin-bottom"},[i("div",{staticClass:"orderInfo__key"},[t._v(" Оплачено ")]),i("div",{staticClass:"orderInfo__value"},[t._v(" "+t._s(t.info.bookingInfo.paid)+" ")])]),i("div",{staticClass:"orderInfo_discount margin-bottom"},[i("div",{staticClass:"orderInfo__key"},[t._v(" Скидка ")]),i("div",{staticClass:"orderInfo__value"},[t._v(" "+t._s(t.info.bookingInfo.booking_discount)+" ")])]),i("div",{staticClass:"orderInfo__payRemain margin-bottom"},[i("div",{staticClass:"orderInfo__key"},[t._v(" Остаток ")]),i("div",{staticClass:"orderInfo__value"},[t._v(" "+t._s(t.getRemainMoney)+" ")])]),i("div",{staticClass:"orderInfo__button",on:{click:function(e){return t.goToBooking()}}},[t._v(" Перейти к брони ")])])])])},dt=[],ut=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"user__description",on:{click:function(e){e.stopPropagation(),t.show=t.show=!0}}},[t.show?i("div",{staticClass:"backdrop",on:{click:function(e){e.stopPropagation(),t.show=!1}}}):t._e(),i("div",{staticClass:"user__photo"},["default_avatar.png"!==t.client.avatar?i("img",{attrs:{src:"/storage/profile_original_avatars/"+t.client.avatar,alt:""}}):"default_avatar.png"===t.client.avatar?i("i",{staticClass:"fas fa-user-circle"}):t._e()]),i("div",{staticClass:"user__info"},[i("div",{staticClass:"user__name"},[t._v(" "+t._s(t.client.firstname)+" ")]),""!=t.client.company?i("div",{staticClass:"user__company"},[t._v(" "+t._s(t.client.company)+" ")]):t._e()]),i("client-card",{directives:[{name:"show",rawName:"v-show",value:t.show,expression:"show"}],attrs:{client:t.client}})],1)},pt=[],ft=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"clientCard"},[i("div",{staticClass:"clientCard__inner"},[i("div",{staticClass:"client__info"},[i("div",{staticClass:"info__left"},[i("div",{staticClass:"name__surname"},[t._v(t._s(t.client.firstname)+" "+t._s(t.client.lastname))]),i("div",{staticClass:"company"},[t._v(t._s(t.client.company))]),i("div",{staticClass:"call"},[t._v("Позвонить "+t._s(t.client.phone))]),i("div",{staticClass:"text"},[t._v("Написать в WhatsApp")])]),i("div",{staticClass:"info__right"},[i("div",{staticClass:"client__photo"},["default_avatar.png"!==t.client.avatar?i("img",{attrs:{src:"/storage/profile_original_avatars/"+t.client.avatar,alt:"Photo"}}):i("i",{staticClass:"fas fa-user-circle"})])])]),i("div",{staticClass:"order__info"},[i("p",{staticClass:"order__amount"},[t._v("Общее количество заказов:"+t._s(t.getOrderAmount))]),i("div",{staticClass:"order__current"},[i("p",[t._v("Текущие: "+t._s(t.order_info.orders_activated))]),t._m(0)]),i("div",{staticClass:"order__finished"},[i("p",[t._v("Завершеннные: "+t._s(t.order_info.orders_completed))]),t._m(1)]),i("div",{staticClass:"order__canceled"},[i("p",[t._v("Отмененные: "+t._s(t.order_info.orders_canceled))]),t._m(2)])]),i("div",{staticClass:"payload__info"},[i("p",{staticStyle:{margin:"16px 0px","font-weight":"500"}},[t._v("Оплата")]),i("div",{staticClass:"all__paid"},[i("div",{staticClass:"key"},[t._v("Всего оплачено:")]),i("div",{staticClass:"value"},[t._v(t._s(t.order_info.paid)+" ₸")])]),i("div",{staticClass:"remaining__current"},[i("div",{staticClass:"key"},[t._v("Остаток по текущим заказам:")]),i("div",{staticClass:"value"},[t._v(t._s(t.order_info.residue)+" ₸")])]),i("div",{staticClass:"debt"},[i("div",{staticClass:"key"},[t._v("Долги:")]),i("div",{staticClass:"value"},[t._v(t._s(t.order_info.debt)+" ₸")])])])])])},ht=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"btn"},[i("i",{staticClass:"fas fa-chevron-right"})])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"btn"},[i("i",{staticClass:"fas fa-chevron-right"})])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"btn"},[i("i",{staticClass:"fas fa-chevron-right"})])}],mt={props:["client"],data:function(){return{order_info:{}}},mounted:function(){var t=this;return Object(y["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Y.a.post("https://almvtst.ml/crm/user/".concat(localStorage.getItem("id"),"/orders"),{client_id:t.client.id},{headers:{Authorization:"Bearer ".concat(localStorage.getItem("access_token"))}}).then((function(e){return t.order_info=e.data.data}));case 2:console.log(t.order_info);case 3:case"end":return e.stop()}}),e)})))()}},vt=mt,_t=(i("b988"),Object(p["a"])(vt,ft,ht,!1,null,"8061cb82",null)),gt=_t.exports,yt={props:["client"],components:{ClientCard:gt},data:function(){return{show:!1}}},bt=yt,kt=(i("ad1b"),Object(p["a"])(bt,ut,pt,!1,null,"613912c3",null)),Ct=kt.exports,Ot={components:{ClientCardMini:Ct},props:["info"],computed:{getDate:function(){return V(this.info["bookingInfo"].date).locale("ru").format("DD MMMM")},getRemainMoney:function(){return this.info.bookingInfo.price-(this.info.bookingInfo.paid+this.info.bookingInfo.booking_discount)},getRemainBookings:function(){var t=0,e=V();for(var i in this.info.bookings){var s=V(this.info.bookings[i].date);s.diff(e,"day",!1)>=0&&(t+=1)}return t}},methods:{goToBooking:function(){this.$store.dispatch("order/setOrder",this.info),this.$store.dispatch("booking/setBooking",this.info.bookingInfo),this.$router.push({path:"/order/:".concat(this.info.orderId,"/booking/:").concat(this.info.bookingInfo.bookingId)})}}},wt=Ot,xt=(i("ce84"),Object(p["a"])(wt,lt,dt,!1,null,"08cc5045",null)),jt=xt.exports,Pt={components:{OrderPopup:it,Cell:ct,OrderInfoPopup:jt},props:["id","date","infoAboutDay","buttonNeeded"],data:function(){return{timelines:[],firstSelected:null,selectedCells:[],duration:30,durationRange:1,today:V(),timelineStyles:{},cellValues:{},leftScroll:0,show:!1,orders:JSON.parse(localStorage.getItem("orderInfo")),infoToShow:{},facility:JSON.parse(localStorage.getItem("facility"))}},created:function(){var t=this;return Object(y["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t.generateTime(),t.disableTime(),t.getPrice(),t.getOrders(),t.isToday&&t.moveRedLine();case 5:case"end":return e.stop()}}),e)})))()},mounted:function(){this.$emit("move",this.leftScroll)},methods:{generateTime:function(){for(var t=5;t<29;t++){var e=t%24,i=e<10?"0".concat(e):"".concat(e);this.timelines.push("".concat(i,":00")),this.timelines.push("".concat(i,":30"))}this.timelines.push(this.timelines[0])},makeOrder:function(t,e){if(this.moveTableToCenter(),this.firstSelected)if(e===this.firstSelected.fieldId)if(this.firstSelected.cellId===t)this.selectedCells=[],this.firstSelected=null;else{var i=Math.min(this.firstSelected.cellId,t),s=Math.max(this.firstSelected.cellId,t);for(this.setOrderInfo(i,e,s);i<=s;i++)this.selectedCells.push("".concat(e,"_").concat(i));this.firstSelected=null}else this.setOrderInfo(t,e),this.firstSelected={fieldId:e,cellId:t},this.selectedCells=[],this.selectedCells.push("".concat(e,"_").concat(t));else this.selectedCells=[],this.selectedCells.push("".concat(e,"_").concat(t)),this.firstSelected={fieldId:e,cellId:t},this.setOrderInfo(t,e)},setOrderInfo:function(t,e){for(var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t,s=0,a=t;a<i+1;a++)s+=this.cellValues[e][a];this.durationRange=i-t+1,this.$store.dispatch("booking/setBookingTime",{start_time:this.timelines[t],end_time:this.timelines[i+1]}),this.$store.dispatch("booking/setBookingField",e),this.$store.dispatch("booking/setBookingDate",this.dateFormat(this.getDayIfMidnight,this.timelines[i+1])),this.$store.dispatch("booking/setBookingPrice",s),this.$store.dispatch("booking/setDuration",this.duration*this.durationRange)},closePopup:function(){this.selectedCells=[],this.orderInfo={description:"",date:this.date,duration:30,durationRange:1},this.firstSelected=null,this.show=!1,this.$store.dispatch("booking/resetState")},moveRedLine:function(){var t=49,e=1,i=62,s="".concat(V().format("HH"),":").concat(V().minute()<30?"00":"30"),a=this.timelines.findIndex((function(t){return t===s})),n=i+Math.floor(t/2)+(t+e)*a;return this.leftScroll=n,"left:".concat(n,"px")},moveTableToCenter:function(){document.getElementById(this.id).scrollIntoView({behavior:"smooth",block:"center"})},disableTime:function(){for(var t in this.getFacility){for(var e=[],i=this.infoAboutDay[t],s=this.timelines.indexOf(i.start_time)<0?0:this.timelines.indexOf(i.start_time),a=this.timelines.indexOf(i.end_time)<0?this.timelines.length:this.timelines.indexOf(i.end_time),n=0;n<this.timelines.length-1;n++)if(s>=a)for(var o=a;o<s;o++)e[o]="pointer-events: none; background: #2F5061";else{for(var r=0;r<s;r++)e[r]="pointer-events: none; background: #2F5061";for(var c=a;c<this.timelines.length;c++)e[c]="pointer-events: none; background: #2F5061"}this.timelineStyles[this.getFacility[t].id]=e}},getPrice:function(){var t=this,e=function(e){for(var i=Object.keys(t.infoAboutDay[e].prices).map((function(e){return t.timelines.indexOf(e)})),s=Object.keys(t.infoAboutDay[e].prices).map((function(i){return t.infoAboutDay[e].prices[i]})),a=[],n=0;n<i.length-1;n++)for(var o=i[n];o<i[n+1];o++)a[o]=parseInt(s[n]);if(i[i.length-1]>t.timelines.indexOf(t.infoAboutDay[e].end_time)){for(var r=0;r<t.timelines.indexOf(t.infoAboutDay[e].end_time);r++)a[r]=parseInt(s[s.length-1]);for(var c=i[i.length-1];c<t.timelines.length-1;c++)a[c]=parseInt(s[s.length-1])}else for(var l=i[i.length-1];l<t.timelines.indexOf(t.infoAboutDay[e].end_time);l++)a[l]=parseInt(s[s.length-1]);t.cellValues[t.getFacility[e].id]=a};for(var i in this.infoAboutDay)e(i)},getOrders:function(){for(var t in this.orders)for(var e in this.orders[t]["bookings"]){var i=this.date;if(this.timelines.indexOf(this.orders[t]["bookings"][e]["start_time"])>=this.timelines.indexOf("00:00")&&(i=i.add(1,"day")),V(this.orders[t]["bookings"][e]["date"]).format("DD-MM-YYYY")===i.format("DD-MM-YYYY")&&"Отменено"!==this.orders[t]["bookings"][e].status)for(var s=this.timelines.indexOf(this.orders[t]["bookings"][e]["end_time"]),a=this.timelines.indexOf(this.orders[t]["bookings"][e]["start_time"]),n=this.orders[t]["bookings"][e]["field_id"],o=a;o<s;o++)this.cellValues[n][o]=this.orders[t].client.firstname}},showOrderInfo:function(t,e){for(var i in this.selectedCells=[],this.orders)for(var s in this.orders[i]["bookings"]){var a=this.orders[i]["bookings"][s],n=this.date;if(this.timelines.indexOf(this.orders[i]["bookings"][s]["start_time"])>=this.timelines.indexOf("00:00")&&(n=n.add(1,"day")),V(a.date).format("DD-MM-YYYY")===n.format("DD-MM-YYYY")&&a.field_id===e){var o=this.timelines.indexOf(a.start_time),r=this.timelines.indexOf(a.end_time);t>=o&&t<r&&(this.infoToShow=Object(m["a"])(Object(m["a"])({},this.orders[i]),{},{bookingInfo:a}))}}this.show=!0},dateFormat:function(t,e){return V(t).hour(e.split(":")[0]).minute(e.split(":")[1]).second(0).millisecond(0)}},computed:{getLen:function(){return this.selectedCells.length},isAvaiable:function(){return this.date.diff(this.today,"day",!1)>=0},isEmpty:function(){return 0===Object.keys(this.cellValues).length},isToday:function(){return this.date.format("DD-MM-YYYY")===this.today.format("DD-MM-YYYY")},getDayIfMidnight:function(){var t=this.$store.state.booking,e="00:00";return this.timelines.indexOf(t.start_time)>=this.timelines.indexOf(e)?this.date.add(1,"day"):this.date},getFacility:function(){var t=this;return this.facility.filter((function(e){return!e.periods_data[t.date.day()].dayoff}))}}},St=Pt,Dt=(i("2a13"),Object(p["a"])(St,Z,G,!1,null,null,null)),It=Dt.exports,$t=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"mainHeader"},[i("div",{staticClass:"mainHeader__inner"},[i("div",{staticClass:"mainHeader__top"},[i("p",[t._v("Расписание")]),i("div",{staticClass:"mainHeader__filters"},[i("div",{staticClass:"filter__day",class:"oneDay"===t.active?"active":"",on:{click:function(e){return t.setFilter("oneDay")}}},[i("p",[t._v("День")])]),i("div",{staticClass:"filter__allTime",class:"allTime"===t.active?"active":"",on:{click:function(e){return t.setFilter("allTime")}}},[i("p",[t._v("Все время")])])])])])])},Nt=[],At={props:["filterType"],data:function(){return{active:this.filterType}},created:function(){this.setFilter(this.filterType)},methods:{setFilter:function(t){this.active=t,"oneDay"===this.active?this.$router.push({path:"/"}):"allTime"===this.active&&this.$router.push({path:"/allTime",name:"main"})}}},Mt=At,Bt=(i("80d6"),Object(p["a"])(Mt,$t,Nt,!1,null,"7170201a",null)),Ft=Bt.exports,Et=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"timetable__dateline"},[i("div",{staticClass:"timetable__date"},[i("p",{class:t.isToday?"today":""},[t._v(t._s(t.date.format("DD MMMM, dd")))]),t.buttonNeeded?i("div",{staticClass:"changeDate__buttons"},[i("div",{staticClass:"prev__day",on:{click:function(e){return t.handleClick("prev")}}},[i("i",{staticClass:"fas fa-angle-left"})]),i("div",{staticClass:"next__day",on:{click:function(e){return t.handleClick("next")}}},[i("i",{staticClass:"fas fa-angle-right"})])]):t._e()])])},Tt=[],Vt={props:["date","buttonNeeded"],methods:{handleClick:function(t){this.$emit(t)}},computed:{isToday:function(){return this.date.format("DD MMMM, dd")===R()().locale("ru").format("DD MMMM, dd")}}},Rt=Vt,Ht=(i("9179"),Object(p["a"])(Rt,Et,Tt,!1,null,"3086bca6",null)),Yt=Ht.exports,Wt=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"bottom__menu"},[i("div",{staticClass:"menu__option calendar",on:{click:function(e){return t.makeActive("calendar")}}},[i("i",{staticClass:"far fa-calendar",class:"calendar"===t.activeTab?"active":""}),i("p",{class:"calendar"===t.activeTab?"active":""},[t._v("Календарь")])]),i("div",{staticClass:"menu__option orders",on:{click:function(e){return t.makeActive("orders")}}},[i("i",{staticClass:"fas fa-plus-circle",class:"orders"===t.activeTab?"active":""}),i("p",{class:"orders"===t.activeTab?"active":""},[t._v("Заказы")])]),i("div",{staticClass:"menu__option clients",on:{click:function(e){return t.makeActive("clients")}}},[i("i",{staticClass:"fas fa-user",class:"clients"===t.activeTab?"active":""}),i("p",{class:"clients"===t.activeTab?"active":""},[t._v("Клиенты")])]),i("div",{staticClass:"menu__option menu",on:{click:function(e){return t.makeActive("menu")}}},[i("i",{staticClass:"fas fa-bars",class:"menu"===t.activeTab?"active":""}),i("p",{class:"menu"===t.activeTab?"active":""},[t._v("Меню")])])])},Lt=[],Jt={props:["active"],data:function(){return{activeTab:this.active}},methods:{makeActive:function(t){switch(this.activeTab=t,this.activeTab){case"calendar":this.$router.push({path:"/"});break;case"orders":this.$router.push({path:"/orders"});break;case"clients":this.$router.push({path:"/clients"});break;case"menu":this.$router.push({path:"/auth"});break}}}},zt=Jt,Ut=(i("a06a"),Object(p["a"])(zt,Wt,Lt,!1,null,"3f7ae794",null)),qt=Ut.exports,Zt={components:{Timetable:It,MainHeader:Ft,DateHeader:Yt,BottomMenu:qt},data:function(){return{dates:[],today:V().locale("ru"),infoAboutDay:[],facility:JSON.parse(localStorage.getItem("facility"))}},created:function(){var t=this;return Object(y["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t.setDate();case 1:case"end":return e.stop()}}),e)})))()},mounted:function(){this.scrollToToday()},methods:{setDate:function(){var t=V().locale("ru");t=t.subtract(7,"day").hour(0).minute(0).second(0);for(var e=0;e<30;e++)this.infoAboutDay.push(this.setInfo(t.day())),this.dates.push(t),t=t.add(1,"day")},setInfo:function(t){return this.facility.map((function(e){if(!JSON.parse(e.periods_data)[t].dayoff)return JSON.parse(e.periods_data)[t]}))},scrollToToday:function(){var t=114,e=7;window.scrollTo(0,t*e),window.onbeforeunload=function(){window.scrollTo(0,t*e)}},move:function(t){this.$refs["main"].scrollLeft+=4*t/5}}},Gt=Zt,Kt=(i("b8b2"),Object(p["a"])(Gt,U,q,!1,null,"d0267aac",null)),Qt=Kt.exports,Xt=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"order__wrapper"},[i("order-header",{scopedSlots:t._u([{key:"orderHeader",fn:function(){return[i("p",{staticClass:"new__order"},[t._v("Новый заказ")]),i("div",{staticClass:"close__order",on:{click:function(e){return t.goBack()}}},[i("i",{staticClass:"fa fa-times-circle",attrs:{"aria-hidden":"true"}})])]},proxy:!0},{key:"headerBottom",fn:function(){return[i("div",{staticClass:"header__bottom"},[i("p",[t._v("Добавление клиента")])])]},proxy:!0}])}),i("order-info",{attrs:{buttonNeeded:"true"}}),i("div",{staticClass:"search__input"},[i("label",{staticClass:"phone__label",attrs:{for:"phone"}},[t._v("Номер телефона")]),i("br"),i("input",{directives:[{name:"mask",rawName:"v-mask",value:"+7 ### ### ## ##",expression:"'+7 ### ### ## ##'"},{name:"model",rawName:"v-model",value:t.search,expression:"search"}],ref:"telephone",attrs:{type:"tel",name:"phone",id:"phone",placeholder:"Введите номер телефона"},domProps:{value:t.search},on:{keypress:function(e){return e.stopPropagation(),t.isNumber(e)},keyup:function(e){return e.stopPropagation(),t.isValid()},input:function(e){e.target.composing||(t.search=e.target.value)}}})]),i("div",{staticClass:"continue__btn",class:{valid:t.isValid()},on:{click:function(e){return t.searchNumber()}}},[t._v("Продолжить")])],1)},te=[],ee=(i("a15b"),i("841c"),i("caad"),i("2532"),function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"orderInfo"},[i("div",{staticClass:"orderInfo__inner"},[i("div",{staticClass:"orderInfo__info"},[i("div",{staticClass:"order__date flex"},[i("p",{staticClass:"order__type"},[t._v(t._s(t.order.type?"Разовая бронь":"Период бронирования"))]),i("p",{staticClass:"date__value"},[t._v(t._s(t.getDateFormat(t.order.start_date))+t._s(t.order.type?"":" - "+t.getDateFormat(t.order.end_date)))])]),i("div",{staticClass:"order__details flex"},[i("p",{staticClass:"details__key"},[t._v("Детали")]),i("div",{staticClass:"details__value"},[i("p",[t._v(t._s(t.booking.start_time)+" - "+t._s(t.booking.end_time)+", "+t._s(t.getDayFormat(t.order.start_date)))]),i("p",[t._v(t._s(t.getDuration)+"("+t._s(t.booking.price)+" ₸)")])])]),i("div",{staticClass:"order__field flex"},[i("p",{staticClass:"field__key"},[t._v("Площадка")]),i("p",{staticClass:"field__value"},[t._v(t._s(t.getPlayfieldName))])]),i("div",{staticClass:"order__cost flex"},[i("p",{staticClass:"cost__key"},[t._v("Общая сумма")]),i("p",{staticClass:"cost__value"},[t._v(t._s(t.getAllCost)+" ₸")])]),t._t("extraInfo"),i("div",{staticClass:"order__discount"},[i("div",{staticClass:"flex"},[i("p",{staticClass:"discount__key"},[t._v("Скидка")]),i("p",{staticClass:"discount__value"},[t._v(t._s(t.getAllDiscount)+" ₸ ("+t._s(t.order.bookings.length)+" x "+t._s(t.booking.discount)+" ₸)")])])]),i("div",{staticClass:"order__remainingPaylaod flex"},[i("p",{staticClass:"remainingPayload__key"},[t._v(t._s("Завершено"===t.order.status?"Долг":"Остаток"))]),i("p",{staticClass:"remaininPayload__value"},[t._v(t._s(t.getRemainMoney)+" ₸")])]),t.buttonNeeded?i("div",{staticClass:"discount__button",on:{click:function(e){t.discountAdd=!0}}},[t._v(" Добавить скидку ")]):t._e()],2),t.buttonNeeded?t._e():i("div",{staticClass:"order__deposit"},[i("div",{staticClass:"flex"},[i("p",{staticClass:"deposit__key"},[t._v("Залог")]),i("p",{staticClass:"deposit__value"},[t._v(t._s(""+t.order.deposit)+" ₸")])]),i("div",{staticClass:"deposit__button",on:{click:function(e){t.depositAdd=!0}}},[t._v("Добавить залог")])]),i("payment-popup",{directives:[{name:"show",rawName:"v-show",value:t.discountAdd||t.depositAdd,expression:"discountAdd||depositAdd"}],attrs:{remain:t.getRemainMoney},on:{addPayment:t.addPayment,closePayment:t.closePayment},scopedSlots:t._u([{key:"title",fn:function(){return[i("p",[t._v(t._s(t.discountAdd?"Добавьте сумму скидки за одну бронь":"Добавьте залог"))])]},proxy:!0}])})],1)])}),ie=[],se=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"payment__popup"},[i("div",{staticClass:"payment__inner"},[i("div",{staticClass:"payment__top"},[t._t("title"),i("div",{staticClass:"close",on:{click:function(e){return e.stopPropagation(),t.closePayment.apply(null,arguments)}}},[i("i",{staticClass:"fas fa-times"})])],2),i("div",{staticClass:"payment__input"},[i("input",{directives:[{name:"model",rawName:"v-model",value:t.money,expression:"money"}],ref:"payment",class:{notValid:!t.isValid},attrs:{type:"text",inputmode:"tel"},domProps:{value:t.money},on:{keypress:function(e){return e.stopPropagation(),t.isNumber(e)},keyup:function(e){return e.stopPropagation(),t.isMore()},click:function(t){t.stopPropagation()},input:function(e){e.target.composing||(t.money=e.target.value)}}}),t.isValid?t._e():i("p",{staticClass:"error"},[t._v("Сумма оплаты/скидки/залога не может превышать остаток")])]),i("div",{staticClass:"addPayment",class:{disableBtn:!t.isValid},on:{click:function(e){return e.stopPropagation(),t.addPayment.apply(null,arguments)}}},[t._v(" Добавить ")])])])},ae=[],ne={props:["remain"],data:function(){return{money:"",isValid:!0}},mounted:function(){this.$refs["payment"].focus()},methods:{closePayment:function(){this.$emit("closePayment"),this.money=""},addPayment:function(){this.isValid&&this.$emit("addPayment",parseInt(this.money)),this.money=""},isNumber:function(t){t=t||window.event;var e=t.which?t.which:t.keyCode;if(!(e>31&&(e<48||e>57)))return!0;t.preventDefault()},isMore:function(){this.isValid=!(parseInt(this.money)>this.remain)}}},oe=ne,re=(i("83e5"),Object(p["a"])(oe,se,ae,!1,null,"7ebbdee0",null)),ce=re.exports,le={components:{PaymentPopup:ce},props:["buttonNeeded"],data:function(){return{discountAdd:!1,depositAdd:!1}},methods:{addPayment:function(t){this.discountAdd?(this.$store.dispatch("order/setBookingDiscount",t),this.$store.dispatch("booking/setBookingDiscount",t)):this.depositAdd&&this.$store.dispatch("order/addDeposit",t),this.discountAdd=!1,this.depositAdd=!1},closePayment:function(){this.discountAdd=!1,this.depositAdd=!1},addDeposit:function(){this.depositAdd=!0},getDateFormat:function(t){return V(t).locale("ru").format("DD MMMM")},getDayFormat:function(t){return V(t).locale("ru").format("dddd")}},computed:Object(m["a"])(Object(m["a"])(Object(m["a"])(Object(m["a"])({},Object(b["c"])("booking",["booking"])),Object(b["c"])("order",["order"])),Object(b["b"])("order",["getRemainMoney","getAllDiscount","getAllCost"])),Object(b["b"])("booking",["getDuration","getPlayfieldName"]))},de=le,ue=(i("4518"),Object(p["a"])(de,ee,ie,!1,null,"4fec5cf4",null)),pe=ue.exports,fe={components:{OrderInfo:pe,OrderHeader:j},data:function(){return{search:"",discount:0,client:{}}},methods:{searchNumber:function(){var t=this;return Object(y["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Y.a.post("https://almvtst.ml/crm/user/".concat(localStorage.getItem("id"),"/client-interaction"),{phone:"".concat(t.search.split(" ").join(""))},{headers:{Authorization:"Bearer ".concat(localStorage.getItem("access_token"))}}).then((function(e){return t.$store.dispatch("order/setClient",e.data.client)}));case 2:t.$router.push({name:"registerUser"});case 3:case"end":return e.stop()}}),e)})))()},goBack:function(){this.$store.dispatch("booking/resetState"),this.$store.dispatch("order/resetState"),this.$router.push({path:"/"})},isNumber:function(t){t=t||window.event;var e=t.which?t.which:t.keyCode;return!(e>31&&46!=e&&(e<48||e>57))},isValid:function(){return this.search.length&&!this.search.includes("_")}},computed:Object(m["a"])({},Object(b["c"])("order",["order"]))},he=fe,me=(i("b4b0"),Object(p["a"])(he,Xt,te,!1,null,"b624a220",null)),ve=me.exports,_e=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{ref:"main",staticClass:"singleDay__main"},[i("Spinner",{attrs:{start:t.start}}),i("MainHeader",{attrs:{filterType:"oneDay"}}),i("div",{staticClass:"content"},[i("DateHeader",{key:t.id,attrs:{date:t.day,buttonNeeded:!0},on:{prev:t.prev,next:t.next}}),i("Timetable",{key:t.day.toString(),attrs:{id:t.id,date:t.day,infoAboutDay:t.setInfo(t.day.day())},on:{move:t.move}})],1),i("div",{staticClass:"bookings"},[i("div",{staticClass:"bookings__title"},[i("p",[t._v("Брони: "+t._s(t.bookings.length))])]),t._l(t.bookings,(function(e,s){return i("div",{key:s,staticClass:"bookings__content"},[i("BookingMiniature",{attrs:{info:e},on:{addPayload:t.addPayload}})],1)}))],2),i("BottomMenu",{attrs:{active:"calendar"}}),t.openPopup?i("payment-popup",{attrs:{remain:t.remainForBooking},on:{addPayment:t.addMoney,closePayment:t.closePayment},scopedSlots:t._u([{key:"title",fn:function(){return[i("p",[t._v("Добавьте оплату")])]},proxy:!0}],null,!1,244481939)}):t._e()],1)},ge=[],ye=i("ade3"),be=(i("d3b7"),i("25f0"),function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"main__content",class:{fullPay:t.fullPay},on:{click:function(e){return t.goToBooking()}}},[i("div",{staticClass:"content__inner"},[i("div",{staticClass:"content_top"},[i("div",{staticClass:"contentTop__inner"},[i("div",{staticClass:"content__left"},[i("div",{staticClass:"mini__description"},[i("b",[t._v(t._s(t.info.booking.start_time)+"-"+t._s(t.info.booking.end_time))]),t._v(", Площадка "+t._s(t.info.booking.playfield_id)+" ")]),i("div",{staticClass:"info__payload"},[i("div",{staticClass:"payload__type"},[t._v(" "+t._s("cash"===t.info.pay_type?"Наличными":"По реквизитам")+" ")]),i("div",{staticClass:"payload__remain"},[t._v(" Остаток: "+t._s(t.info.booking.debt)+"тг ")])])]),i("div",{staticClass:"content__right"},[i("ClientCardMini",{attrs:{order:t.info}})],1)])]),t.fullPay?t._e():i("div",{staticClass:"content__bottom"},[i("div",{staticClass:"payload__button",on:{click:function(e){return e.stopPropagation(),t.addPayload()}}},[t._v(" Добавить оплату ")])])])])}),ke=[],Ce={props:["info"],components:{ClientCardMini:Ct},computed:{fullPay:function(){return this.getRemainMoney<=0},getRemainMoney:function(){return this.info.booking.price-(this.info.booking.paid+this.info.booking.booking_discount)}},methods:{addPayload:function(){this.$emit("addPayload",this.info.orderId,this.info.booking.bookingId,this.getRemainMoney)},goToBooking:function(){this.$store.dispatch("order/setOrder",this.info),this.$store.dispatch("booking/setBooking",this.info.booking),this.$router.push({path:"/order/:".concat(this.info.orderId,"/booking/:").concat(this.info.booking.bookingId)})}}},Oe=Ce,we=(i("a381"),Object(p["a"])(Oe,be,ke,!1,null,"709eecd4",null)),xe=we.exports,je={data:function(){return{facility:JSON.parse(localStorage.getItem("facility")),day:R()().locale("ru"),id:7,bookings:[],orders:JSON.parse(localStorage.getItem("orderInfo")),openPopup:!1,oId:"",bId:"",remainForBooking:0,start:!1,timelines:["05:00","05:30","06:00","06:30","07:00","07:30","08:00","08:30","09:00","09:30","10:00","10:30","11:00","11:30","12:00","12:30","13:00","13:30","14:00","14:30","15:00","15:30","16:00","16:30","17:00","17:30","18:00","18:30","19:00","19:30","20:00","20:30","21:00","21:30","22:00","22:30","23:00","23:30","00:00","00:30","01:00","01:30","02:00","02:30","03:00","03:30","04:00","04:30"]}},created:function(){var t=this;return Object(y["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.getDailyOrders();case 2:case"end":return e.stop()}}),e)})))()},mounted:function(){window.scrollTo(0,0),window.onbeforeunload=function(){window.scrollTo(0,0)}},methods:{move:function(t){this.$refs["main"].scrollLeft+=4*t/5},setInfo:function(t){var e={};for(var i in this.getFacility)e=Object(m["a"])(Object(m["a"])({},e),{},Object(ye["a"])({},i,this.getFacility[i].periods_data[t]));return e},getDailyOrders:function(){for(var t in this.bookings=[],this.orders)for(var e in this.orders[t]["bookings"]){var i=this.day;this.timelines.indexOf(this.orders[t]["bookings"][e]["start_time"])>=this.timelines.indexOf("00:00")&&(i=i.add(1,"day")),R()(this.orders[t]["bookings"][e].date).format("DD-MM-YYYY")===i.format("DD-MM-YYYY")&&"Отменено"!==this.orders[t]["bookings"][e].status&&this.bookings.push(Object(m["a"])(Object(m["a"])({},this.orders[t]),{},{booking:this.orders[t]["bookings"][e],client:this.orders[t]["client"]}))}},prev:function(){this.day=this.day.subtract(1,"day"),this.$router.push({name:"day",params:{id:this.day.format("DD-MM-YYYY")}})},next:function(){this.day=this.day.add(1,"day"),this.$router.push({name:"day",params:{id:this.day.format("DD-MM-YYYY")}})},addPayload:function(t,e,i){this.bId=e,this.oId=t,this.openPopup=!0,this.remainForBooking=i},closePayment:function(){this.openPopup=!1},addMoney:function(t){for(var e in this.orders)if(this.oId===this.orders[e].orderId)for(var i in this.orders[e]["bookings"])if(this.orders[e]["bookings"][i].bookingId===this.bId){this.orders[e]["bookings"][i].paid+=t;break}localStorage.setItem("orderInfo",JSON.stringify(this.orders)),this.openPopup=!1}},components:{Timetable:It,MainHeader:Ft,DateHeader:Yt,BookingMiniature:xe,PaymentPopup:ce,BottomMenu:qt,Spinner:T},computed:Object(m["a"])({getSingleDay:function(){return this.$route.params.id.toString()},getFacility:function(){var t=this;return this.facility.filter((function(e){return!e.periods_data[t.day.day()].dayoff}))}},Object(b["c"])("admin",["user"]))},Pe=je,Se=(i("32af"),Object(p["a"])(Pe,_e,ge,!1,null,"14ee0777",null)),De=Se.exports,Ie=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"confirmation__wrapper"},[t.show?i("div",{staticClass:"backdrop",on:{click:function(e){e.stopPropagation(),t.show=!1}}}):t._e(),i("confirm-header",{scopedSlots:t._u([{key:"main",fn:function(){return[i("p",{staticClass:"order__id"},[t._v("Заказ №"+t._s(t.getOrderId))])]},proxy:!0},{key:"status",fn:function(){return[i("p",{staticClass:"order__status"},[t._v(t._s(t.order.status))])]},proxy:!0}])}),i("confirmation-card",{directives:[{name:"show",rawName:"v-show",value:"В ожидании"===t.order.status,expression:"order.status==='В ожидании'"}],attrs:{fromNelsette:!1},on:{updateLocalStorage:t.updateLocalStorage}}),i("order-info",{attrs:{buttonNeeded:!1},scopedSlots:t._u([{key:"extraInfo",fn:function(){return[i("div",{staticClass:"order__paytype flex"},[i("p",{staticClass:"paytype__key"},[t._v("Способ оплаты")]),i("p",{staticClass:"paytype__value"},[t._v(t._s("cash"===t.order.pay_type?"Наличными":"По реквизитам"))])]),i("div",{staticClass:"order__paid flex"},[i("p",{staticClass:"paid__key"},[t._v("Оплачено")]),i("p",{staticClass:"paid__value"},[t._v(t._s(t.getAllPaid)+" ₸")])])]},proxy:!0}])}),i("div",{directives:[{name:"show",rawName:"v-show",value:t.show,expression:"show"}],staticClass:"confirm__popup"},[i("div",{staticClass:"popup__inner"},[i("i",{staticClass:"fas fa-times",on:{click:function(e){t.show=!1}}}),i("p",{staticClass:"confirm__text"},[t._v("Вы уверены, что хотите отменить все?")]),i("div",{staticClass:"confirm__buttons"},[i("div",{staticClass:"button__yes",on:{click:function(e){return t.cancelOrder(!0)}}},[t._v("Да")]),i("div",{staticClass:"button__no",on:{click:function(e){return t.cancelOrder(!1)}}},[t._v("Нет")])])])]),i("div",{staticClass:"booking__status"},[i("div",{staticClass:"bookingStatus__inner"},[i("p",[t._v("Брони")]),i("div",{staticClass:"statuses"},[i("div",{staticClass:"upcoming",class:{active:"upcoming"===t.active},on:{click:function(e){return t.getBookings("upcoming")}}},[t._v(" Предстоящие: "+t._s(t.activeCount)+" "),i("div",{staticClass:"line"})]),i("div",{staticClass:"finished",class:{active:"finished"===t.active},on:{click:function(e){return t.getBookings("finished")}}},[t._v(" Завершенные: "+t._s(t.finishedCount)+" "),i("div",{staticClass:"line"})]),i("div",{staticClass:"canceled",class:{active:"canceled"===t.active},on:{click:function(e){return t.getBookings("canceled")}}},[t._v(" Отмененные: "+t._s(t.canceledCount)+" "),i("div",{staticClass:"line"})])])])]),i("div",{directives:[{name:"show",rawName:"v-show",value:!t.IsArchive&&"upcoming"===t.active&&0===t.order.deposit&&t.containsUnpaid,expression:"!IsArchive&&active==='upcoming'&&order.deposit===0&&containsUnpaid"}],staticClass:"cancel__order"},[i("p",{staticClass:"cancelOrder__btn",on:{click:function(e){t.show=!0}}},[t._v("Отменить все")])]),i("div",{directives:[{name:"show",rawName:"v-show",value:t.filteredBookings.length>0,expression:"filteredBookings.length>0"}],staticClass:"miniCards"},t._l(t.getOrder.bookings,(function(e,s){return i("MiniOrderCard",{key:s,attrs:{booking:e},on:{addPayment:t.addMoney}})})),1),i("div",{directives:[{name:"show",rawName:"v-show",value:0===t.filteredBookings.length,expression:"filteredBookings.length===0"}],staticClass:"noBookings"},[i("p",{directives:[{name:"show",rawName:"v-show",value:"upcoming"===t.active,expression:"active==='upcoming'"}]},[t._v("Нет предстоящих заказов")]),i("p",{directives:[{name:"show",rawName:"v-show",value:"finished"===t.active,expression:"active==='finished'"}]},[t._v("Нет завершенных заказов")]),i("p",{directives:[{name:"show",rawName:"v-show",value:"canceled"===t.active,expression:"active==='canceled'"}]},[t._v("Нет отмененных заказов")])])],1)},$e=[],Ne=(i("159b"),function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"confirmation__card"},[i("div",{staticClass:"confirmation__inner"},[t.fromNelsette?t.fromNelsette?i("div",{staticClass:"nelsette__user"},[i("p",{staticStyle:{"margin-bottom":"16px"}},[t._v("Ожидание потверждения заказа")]),i("p",[t._v(t._s(t.order.client.firstname)+" "+t._s(t.order.client.lastname)+" должен потвердить заказ зайдя в приложение")])]):t._e():i("div",{staticClass:"ordinary__user"},[i("p",{staticStyle:{"font-weight":"500","margin-bottom":"16px"}},[t._v("Потверждение заказа")]),i("p",{staticClass:"confirmation__text",staticStyle:{"margin-bottom":"16px"}},[t._v(" На номер телефон клиента был отправлен код, для подтверждения заказа попросите назвать его вам. ")]),i("div",{staticClass:"confirmation__code"},[i("input",{ref:"one",attrs:{maxlength:"1",type:"text",inputmode:"tel"},on:{keyup:function(e){return t.handleClick("","one","two")}}}),i("input",{ref:"two",attrs:{maxlength:"1",type:"text",inputmode:"tel"},on:{keyup:function(e){return t.handleClick("one","two","three")}}}),i("input",{ref:"three",attrs:{maxlength:"1",type:"text",inputmode:"tel"},on:{keyup:function(e){return t.handleClick("two","three","four")}}}),i("input",{ref:"four",attrs:{maxlength:"1",type:"text",inputmode:"tel"},on:{keyup:function(e){return t.handleClick("three","four","")}}})]),i("div",{staticClass:"sendConfirmation",on:{click:function(e){return t.sendOrder()}}},[t._v(" Отправить ")])])])])}),Ae=[],Me={props:["fromNelsette"],data:function(){return{orders:JSON.parse(localStorage.getItem("orderInfo"))}},mounted:function(){this.$refs["one"].focus()},methods:{handleClick:function(t,e,i){this.$refs[e].value.length?""!=i&&this.$refs[i].focus():""!=t&&this.$refs[t].focus()},sendOrder:function(){this.$store.dispatch("order/setStatus","Потверждено"),this.getOrder.bookings.forEach((function(t){return t.status="Потверждено"})),this.$store.dispatch("booking/setStatus","Потверждено"),this.$emit("updateLocalStorage",this.getOrder)}},computed:Object(m["a"])(Object(m["a"])(Object(m["a"])({},Object(b["b"])("order",["getOrder"])),Object(b["b"])("booking",["getBooking"])),Object(b["c"])("order",["order"]))},Be=Me,Fe=(i("6c18"),Object(p["a"])(Be,Ne,Ae,!1,null,"3953d9d2",null)),Ee=Fe.exports,Te=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"confirm__header"},[i("div",{staticClass:"confirmHeader__inner"},[i("div",{staticClass:"confirmHeader__left"},[i("div",{staticClass:"backToOrders"},[i("div",{staticClass:"back__button",on:{click:function(e){return t.resetStore()}}},[i("i",{staticClass:"fas fa-chevron-left"})])]),i("div",{staticClass:"orderDescription"},[t._t("main"),t._t("status"),t._t("date"),t._t("title")],2)]),i("div",{staticClass:"userInformation"},[i("client-card-mini",{attrs:{client:t.order.client}})],1)])])},Ve=[],Re={components:{ClientCardMini:Ct},computed:Object(m["a"])(Object(m["a"])({},Object(b["c"])("order",["order"])),{},{getOrderId:function(){return this.order.orderId.length>5?this.order.orderId.substring(0,5)+"...":this.order.orderId}}),methods:{resetStore:function(){this.$store.dispatch("order/resetState"),this.$store.dispatch("booking/resetState"),this.$router.push({path:"/orders"})}}},He=Re,Ye=(i("b87d"),Object(p["a"])(He,Te,Ve,!1,null,"3b05ae7b",null)),We=Ye.exports,Le=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"mini__card",class:{fullpay:t.getRemainMoney<=0},on:{click:function(e){return e.stopPropagation(),t.goToBookingCard()}}},[i("div",{staticClass:"miniCard__inner"},[i("div",{staticClass:"miniCard__top"},[i("span",{staticClass:"order__date"},[t._v(t._s(t.capitalizeAndFormat(t.booking.date)))]),i("span",{directives:[{name:"show",rawName:"v-show",value:t.orderValid&&"finished"!==t.booking.status,expression:"orderValid&&booking.status!=='finished'"}],staticClass:"order__edit",on:{click:function(e){return e.stopPropagation(),t.goToEdit()}}},[i("i",{staticClass:"fas fa-pen"})])]),i("div",{staticClass:"miniCard__bottom"},[i("div",{staticClass:"bottom__description"},[i("p",[t._v(t._s(t.booking.start_time)+" - "+t._s(t.booking.end_time))]),i("p",[t._v("Площадка "+t._s(t.booking.playfield_id))]),i("p",[t._v("Остаток: "+t._s(t.getRemainMoney)+"₸")])]),t.getRemainMoney>0&&t.orderValid?i("div",{staticClass:"bottom__payment",on:{click:function(e){return e.stopPropagation(),t.setBooking()}}},[t._v(" Добавить оплату ")]):t._e()])]),t.openPopup?i("payment-popup",{attrs:{remain:t.getRemainMoney},on:{addPayment:t.addPayment,closePayment:t.closePayment},scopedSlots:t._u([{key:"title",fn:function(){return[i("p",[t._v("Добавьте оплату")])]},proxy:!0}],null,!1,244481939)}):t._e()],1)},Je=[],ze=(i("5319"),{props:["booking"],components:{PaymentPopup:ce},data:function(){return{orders:JSON.parse(localStorage.getItem("orderInfo")),openPopup:!1}},methods:{capitalizeAndFormat:function(t){return t=V(t).locale("ru").format("dd, DD MMMM"),t.replace(t[0],t[0].toUpperCase())},setBooking:function(){this.openPopup=!0,this.$store.dispatch("booking/setBooking",this.booking)},addPayment:function(t){this.openPopup=!1,this.$emit("addPayment",t,this.booking.bookingId)},closePayment:function(){this.openPopup=!1},goToBookingCard:function(){this.setBooking(),this.$router.push({path:"/order/:".concat(this.order.id,"/booking/:").concat(this.booking.id)})},goToEdit:function(){this.$store.dispatch("booking/setBooking",this.booking),this.$router.push({path:"/order/:".concat(this.order.orderId,"/booking/:").concat(this.booking.bookingId,"/edit")})}},computed:Object(m["a"])(Object(m["a"])(Object(m["a"])({},Object(b["c"])("order",["order"])),Object(b["b"])("booking",["getRemainMoney"])),{},{orderValid:function(){return"waiting"!==this.booking.status&&"canceled"!==this.booking.status},getRemainMoney:function(){return this.booking.price-this.booking.paid-this.booking.discount}})}),Ue=ze,qe=(i("a9fa"),Object(p["a"])(Ue,Le,Je,!1,null,"7b1fc1af",null)),Ze=qe.exports,Ge={data:function(){return{orders:JSON.parse(localStorage.getItem("orderInfo")),show:!1,answer:!1,active:"upcoming",filteredBookings:[],activeCount:0,canceledCount:0,finishedCount:0}},created:function(){this.getBookings(this.active)},mounted:function(){this.setBookingStatusCount()},components:{ConfirmHeader:We,ConfirmationCard:Ee,OrderInfo:pe,MiniOrderCard:Ze},methods:{addMoney:function(t,e){for(var i=0;i<this.getOrder.bookings.length;i++)if(this.getOrder.bookings[i].bookingId===e){var s=this.getOrder.bookings;s[i]=Object(m["a"])(Object(m["a"])({},this.getOrder.bookings[i]),{},{paid:this.getOrder.bookings[i].paid+t}),this.$store.dispatch("booking/setBookingPaid",t),this.$store.dispatch("order/replaceBooking",s);break}this.updateLocalStorage(this.getOrder)},cancelOrder:function(t){var e=this;t?(this.getOrder.bookings.forEach((function(t){0===t.paid&&e.isMoreThanSevenDays(t.date)&&(t.status="Отменено")})),this.allBookingsCanceled&&this.$store.dispatch("order/setStatus","Отменено"),this.updateLocalStorage(this.getOrder),this.$store.dispatch("order/resetState"),this.$store.dispatch("booking/resetState")):this.show=!1},updateLocalStorage:function(t){for(var e=t.orderId,i=0;i<this.orders.length;i++)this.orders[i].orderId==e&&(this.orders[i]=t);localStorage.setItem("orderInfo",JSON.stringify(this.orders)),this.getBookings(this.active),this.setBookingStatusCount()},getBookings:function(t){switch(this.active=t,this.active){case"upcoming":this.filteredBookings=this.getOrder.bookings.filter((function(t){return V(t.date).diff(V(),"day",!0)>0&&"Отменено"!==t.status}));break;case"finished":this.filteredBookings=this.getOrder.bookings.filter((function(t){return"Завершено"===t.status}));break;case"canceled":this.filteredBookings=this.getOrder.bookings.filter((function(t){return"Отменено"===t.status}));break}},isMoreThanSevenDays:function(t){return V(t).diff(V())>7},setBookingStatusCount:function(){this.activeCount=this.getOrder.bookings.filter((function(t){return"Потверждено"===t.status||"В ожидании"===t.status})).length,console.log(this.activeCount),this.canceledCount=this.getOrder.bookings.filter((function(t){return"Отменено"===t.status})).length,this.finishedCount=this.getOrder.bookings.filter((function(t){return"Завершено"===t.status})).length}},computed:Object(m["a"])(Object(m["a"])(Object(m["a"])(Object(m["a"])({},Object(b["c"])("order",["order"])),Object(b["b"])("order",["getAllPaid","getOrder"])),Object(b["b"])("booking",["getRemainMoney"])),{},{getBooking:function(){var t=this;return this.getOrder.bookings.filter((function(e){return e.bookingId===t.bId}))[0]},getOrderId:function(){return this.order.orderId.length>5?this.order.orderId.substring(0,5)+"...":this.order.orderId},isPaid:function(){return this.getAllPaid>0},IsArchive:function(){return"Отменено"===this.order.status||"Завершено"===this.order.status},allBookingsCanceled:function(){var t=this.getOrder.bookings.length;return this.getOrder.bookings.filter((function(t){return"Отменено"===t.status})).length===t},containsUnpaid:function(){return 0!==this.filteredBookings.filter((function(t){return 0===t.paid})).length}})},Ke=Ge,Qe=(i("516b"),Object(p["a"])(Ke,Ie,$e,!1,null,"5007de90",null)),Xe=Qe.exports,ti=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"order__view"},[i("Spinner",{attrs:{start:t.start}}),i("div",{staticClass:"orderView__header"},[i("div",{staticClass:"header__inner"},[t._m(0),i("div",{staticClass:"order__status"},[i("div",{staticClass:"order__waiting",class:"В ожидании"===t.active?"active":"",on:{click:function(e){return t.makeActive("В ожидании")}}},[i("p",[t._v("В ожидании")]),i("p",{staticClass:"amount"},[t._v(t._s(t.getWaiting.length))])]),i("div",{staticClass:"order__confirmed",class:"Активные"===t.active?"active":"",on:{click:function(e){return t.makeActive("Активные")}}},[i("p",[t._v("Активные")]),i("p",{staticClass:"amount"},[t._v(t._s(t.getConfirmed.length))])]),i("div",{staticClass:"order__archive",class:"Архив"===t.active?"active":"",on:{click:function(e){return t.makeActive("Архив")}}},[i("p",[t._v("Архив")]),i("p",{staticClass:"amount"},[t._v(t._s(t.getArchive.length))])])])])]),i("OrderCardWrapper",{attrs:{status:t.active,filteredOrders:t.filteredOrders}}),i("BottomMenu",{attrs:{active:"orders"}})],1)},ei=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"header__title"},[i("p",{staticClass:"order__title"},[t._v("Заказы")])])}],ii=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"orderCard__wrapper"},t._l(t.filteredOrders,(function(t,e){return i("OrderCard",{key:e,attrs:{order:t}})})),1)},si=[],ai=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"order__card",on:{click:function(e){return t.singleOrder()}}},[i("div",{staticClass:"orderCard__inner"},[i("div",{staticClass:"card__little"},[i("div",{staticClass:"little__left"},[i("p",{staticClass:"order__id"},[t._v("Заказ №"+t._s(t.order.id)+",")])]),i("div",{staticClass:"little__status"},[i("p",{directives:[{name:"show",rawName:"v-show",value:"waiting"===t.order.status,expression:"order.status==='waiting'"}],staticClass:"status waiting"},[t._v("Ожидает потверждения")]),i("p",{directives:[{name:"show",rawName:"v-show",value:"finished"===t.order.status,expression:"order.status==='finished'"}],staticClass:"status finished"},[t._v("Завершен")]),i("p",{directives:[{name:"show",rawName:"v-show",value:"canceled"===t.order.status,expression:"order.status==='canceled'"}],staticClass:"status canceled"},[t._v("Отменен")]),i("p",{directives:[{name:"show",rawName:"v-show",value:"confirmed"===t.order.status,expression:"order.status==='confirmed'"}],staticClass:"status confirmed"},[t._v("Подтвержден")])])]),t._m(0)])])},ni=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"card__content"},[i("div",{staticClass:"content__left"},[i("p",{staticClass:"time"},[t._v("0")]),i("p",{staticClass:"field"},[t._v("Площадка №0")])]),i("div",{staticClass:"content__right"})])}],oi={props:["order"],components:{},data:function(){return{show:!1}},methods:{formatDate:function(t){return V(t).locale("ru").format("DD MMMM")},singleOrder:function(){this.$store.dispatch("order/setOrder",this.order),this.$router.push({path:"/order/:".concat(this.order.id)})},closePopup:function(){this.show=!1}}},ri=oi,ci=(i("6336"),Object(p["a"])(ri,ai,ni,!1,null,"59d812ec",null)),li=ci.exports,di={props:["status","filteredOrders"],components:{OrderCard:li}},ui=di,pi=(i("e2fe"),Object(p["a"])(ui,ii,si,!1,null,"47bdae30",null)),fi=pi.exports,hi={components:{BottomMenu:qt,OrderCardWrapper:fi,Spinner:T},data:function(){return{active:"В ожидании",orders:JSON.parse(localStorage.getItem("orderInfo")),filteredOrders:[],today:V().locale("ru"),start:!1}},created:function(){var t=this;return Object(y["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Y.a.get("https://almvtst.ml/crm/order").then((function(e){t.start=!1,t.orders=e.data.orders}));case 2:t.filteredOrders=t.getWaiting;case 3:case"end":return e.stop()}}),e)})))()},methods:{updateLocalStorage:function(t){for(var e=t.orderId,i=0;i<this.orders.length;i++)this.orders[i].orderId===e&&(this.orders[i]=t);localStorage.setItem("orderInfo",JSON.stringify(this.orders))},makeActive:function(t){switch(this.active=t,this.active){case"Активные":this.filteredOrders=this.getConfirmed;break;case"В ожидании":this.filteredOrders=this.getWaiting;break;case"Архив":this.filteredOrders=this.getArchive;break}}},computed:{getConfirmed:function(){return this.orders.filter((function(t){return"confirmed"===t.status}))},getWaiting:function(){return this.orders.filter((function(t){return"waiting"===t.status}))},getArchive:function(){return this.orders.filter((function(t){return"canceled"===t.status||"finished"===t.status}))}}},mi=hi,vi=(i("c09b"),Object(p["a"])(mi,ti,ei,!1,null,"0dcb35e3",null)),_i=vi.exports,gi=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"single__order"},[t.show||t.showConditions?i("div",{staticClass:"backdrop",on:{click:function(e){e.stopPropagation(),t.show=!1,t.showConditions=!1}}}):t._e(),i("ConfirmHeader",{scopedSlots:t._u([{key:"main",fn:function(){return[i("p",{staticClass:"order__id"},[t._v("Заказ №"+t._s(t.order.id))])]},proxy:!0},{key:"status",fn:function(){return[i("p",{staticClass:"order__status"},[t._v(t._s(t.getOrderStatus))])]},proxy:!0}])}),i("confirmation-card",{directives:[{name:"show",rawName:"v-show",value:"pending"===t.order.status,expression:"order.status==='pending'"}],on:{updateLocalStorage:t.updateLocalStorage}}),i("OrderInfo",{attrs:{buttonNeeded:!1},scopedSlots:t._u([{key:"extraInfo",fn:function(){return[i("div",{staticClass:"order__paytype flex"},[i("p",{staticClass:"paytype__key"},[t._v("Способ оплаты")]),i("p",{staticClass:"paytype__value"},[t._v(t._s("cash"===t.order.pay_type?"Наличными":"По реквизитам"))])]),i("div",{staticClass:"order__paid flex"},[i("p",{staticClass:"paid__key"},[t._v("Оплачено")]),i("p",{staticClass:"paid__value"},[t._v(t._s(t.getAllPaid)+" ₸")])])]},proxy:!0}])}),i("div",{directives:[{name:"show",rawName:"v-show",value:t.show,expression:"show"}],staticClass:"confirm__popup"},[i("div",{staticClass:"popup__inner"},[i("i",{staticClass:"fas fa-times",on:{click:function(e){t.show=!1}}}),i("p",{staticClass:"confirm__text"},[t._v("Вы уверены, что хотите отменить все?")]),i("div",{staticClass:"confirm__buttons"},[i("div",{staticClass:"button__yes",on:{click:function(e){return t.cancelOrder(!0)}}},[t._v("Да")]),i("div",{staticClass:"button__no",on:{click:function(e){return t.cancelOrder(!1)}}},[t._v("Нет")])])])]),i("div",{staticClass:"booking__status"},[i("div",{staticClass:"bookingStatus__inner"},[i("p",[t._v("Брони")]),i("div",{staticClass:"statuses"},[i("div",{staticClass:"upcoming",class:{active:"upcoming"===t.active},on:{click:function(e){return t.getBookings("upcoming")}}},[t._v(" Предстоящие: "+t._s(t.activeCount)+" "),i("div",{staticClass:"line"})]),i("div",{staticClass:"finished",class:{active:"finished"===t.active},on:{click:function(e){return t.getBookings("finished")}}},[t._v(" Завершенные: "+t._s(t.finishedCount)+" "),i("div",{staticClass:"line"})]),i("div",{staticClass:"canceled",class:{active:"canceled"===t.active},on:{click:function(e){return t.getBookings("canceled")}}},[t._v(" Отмененные: "+t._s(t.canceledCount)+" "),i("div",{staticClass:"line"})])])])]),i("div",{directives:[{name:"show",rawName:"v-show",value:!t.IsArchive&&"upcoming"===t.active&&t.containsUnpaid,expression:"!IsArchive&&active==='upcoming'&&containsUnpaid"}],staticClass:"cancel__order"},[i("p",{staticClass:"cancel__order_btn",class:{canCancel:0===t.order.deposit},on:{click:function(e){t.show=!0}}},[t._v("Отменить брони")]),i("p",{staticClass:"cancel__order_conditions",on:{click:function(e){t.showConditions=!0}}},[t._v("Условия отмены")])]),i("div",{directives:[{name:"show",rawName:"v-show",value:t.showConditions,expression:"showConditions"}],staticClass:"condition__popup"},[i("div",{staticClass:"condition__popup_inner"},[i("p",{staticClass:"condition__title"},[t._v("Отмена броней")]),i("p",{staticClass:"condition one"},[t._v('Нажатием кнопки "Отменить брони", вы отменяете все брони за которые не была внесена предоплата.')]),i("div",{staticClass:"condition two"},[t._v("Отмена броней невозможна если был внесён залог.")]),i("div",{staticClass:"close__popup",on:{click:function(e){t.showConditions=!1}}},[t._v("Закрыть")])])]),i("div",{staticClass:"miniCards"},t._l(t.filteredBookings,(function(e,s){return i("MiniOrderCard",{key:s,attrs:{booking:e},on:{addPayment:t.addMoney}})})),1),i("div",{directives:[{name:"show",rawName:"v-show",value:0===t.filteredBookings.length,expression:"filteredBookings.length===0"}],staticClass:"noBookings"},[i("p",{directives:[{name:"show",rawName:"v-show",value:"upcoming"===t.active,expression:"active==='upcoming'"}]},[t._v("Нет предстоящих заказов")]),i("p",{directives:[{name:"show",rawName:"v-show",value:"finished"===t.active,expression:"active==='finished'"}]},[t._v("Нет завершенных заказов")]),i("p",{directives:[{name:"show",rawName:"v-show",value:"canceled"===t.active,expression:"active==='canceled'"}]},[t._v("Нет отмененных заказов")])])],1)},yi=[],bi={data:function(){return{show:!1,active:"upcoming",filteredBookings:[],remainForBooking:0,activeCount:0,canceledCount:0,finishedCount:0,showConditions:!1,bookings:[]}},created:function(){this.bookings=this.order.bookings,this.getBookings(this.active),this.setBookingStatusCount()},mounted:function(){this.setBookingStatusCount()},components:{ConfirmHeader:We,OrderInfo:pe,MiniOrderCard:Ze,ConfirmationCard:Ee},computed:Object(m["a"])(Object(m["a"])(Object(m["a"])({},Object(b["c"])("order",["order"])),Object(b["b"])("order",["getOrder","getAllPaid","getRemainMoney"])),{},{isPaid:function(){return this.getAllPaid>0},IsArchive:function(){return"canceled"===this.order.status||"finished"===this.order.status},containsUnpaid:function(){return 0!==this.filteredBookings.filter((function(t){return 0===t.paid})).length},getOrderStatus:function(){switch(this.order.status){case"pending":return"В ожидании";case"activated":return"Потвержден";case"canceled":return"Отменен";case"finished":return"Завершен";default:return!0}}}),methods:{getBookings:function(t){switch(this.active=t,this.active){case"upcoming":this.filteredBookings=this.bookings.filter((function(t){return"pending"===t.status}));break;case"finished":this.filteredBookings=this.bookings.filter((function(t){return"finished"===t.status}));break;case"canceled":this.filteredBookings=this.bookings.filter((function(t){return"canceled"===t.status}));break}},addMoney:function(t,e){for(var i=0;i<this.getOrder.bookings.length;i++)if(this.getOrder.bookings[i].bookingId===e){var s=this.getOrder.bookings;s[i]=Object(m["a"])(Object(m["a"])({},this.getOrder.bookings[i]),{},{paid:this.getOrder.bookings[i].paid+t}),this.$store.dispatch("booking/setBookingPaid",t),this.$store.dispatch("order/replaceBooking",s);break}this.updateLocalStorage(this.getOrder),this.openPopup=!1},updateLocalStorage:function(t){for(var e=t.orderId,i=0;i<this.orders.length;i++)this.orders[i].orderId===e&&(this.orders[i]=t);localStorage.setItem("orderInfo",JSON.stringify(this.orders)),this.getBookings(this.active)},cancelOrder:function(t){var e=this;t?(this.$store.dispatch("order/setStatus","canceled"),this.getOrder.bookings.forEach((function(t){0===t.paid&&e.isMoreThanSevenDays(t.date)&&(t.status="canceled")})),this.updateLocalStorage(this.getOrder),this.active="canceled",this.getBookings(this.active),this.setBookingStatusCount(),this.show=!1):this.show=!1},isMoreThanSevenDays:function(t){return V(t).diff(V())>7},setBookingStatusCount:function(){this.activeCount=this.bookings.filter((function(t){return"activated"===t.status||"pending"===t.status})).length,this.canceledCount=this.bookings.filter((function(t){return"canceled"===t.status})).length,this.finishedCount=this.bookings.filter((function(t){return"completed"===t.status})).length}}},ki=bi,Ci=(i("e761"),Object(p["a"])(ki,gi,yi,!1,null,"2067d38c",null)),Oi=Ci.exports,wi=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"single__booking"},[i("confirm-header",{scopedSlots:t._u([{key:"main",fn:function(){return[i("p",{staticClass:"order__id"},[t._v("Заказ №"+t._s(t.order.id))])]},proxy:!0},{key:"date",fn:function(){return[i("p",{staticClass:"order__date"},[t._v("Бронь, "+t._s(t.getDateFormat))])]},proxy:!0}])}),i("div",{staticClass:"toggle__mode"},[i("div",{staticClass:"information",class:"info"===t.active?"active":"",on:{click:function(e){t.active="info"}}},[t._v(" Информация "),i("div",{staticClass:"bottomLine"})]),i("div",{staticClass:"history",class:"history"===t.active?"active":"",on:{click:function(e){t.active="history"}}},[t._v(" История "),i("div",{staticClass:"bottomLine"})])]),i("booking-card",{directives:[{name:"show",rawName:"v-show",value:"info"===t.active,expression:"active==='info'"}]}),i("div",{directives:[{name:"show",rawName:"v-show",value:t.orderValid,expression:"orderValid"}],staticClass:"edit"},[i("div",{staticClass:"edit__button",on:{click:function(e){return t.goToEdit()}}},[t._v("Редактировать")])])],1)},xi=[],ji=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"booking__card"},[i("div",{staticClass:"bookingCard__inner"},[i("div",{staticClass:"booking__time"},[i("p",{staticClass:"time key"},[t._v("Время брони:")]),i("p",{staticClass:"time value"},[t._v(t._s(t.booking.start_time)+"-"+t._s(t.booking.end_time))])]),i("div",{staticClass:"booking__field"},[i("p",{staticClass:"field key"},[t._v("Площадка:")]),i("p",{staticClass:"field value"},[t._v("Площадка "+t._s(t.booking.playfield_id))])]),i("div",{staticClass:"booking__price"},[i("p",{staticClass:"price key"},[t._v("Стоимость:")]),i("p",{staticClass:"price value"},[t._v(t._s(t.booking.price)+" тг")])]),i("div",{staticClass:"booking__paytype"},[i("p",{staticClass:"paytype key"},[t._v("Способ оплаты")]),i("p",{staticClass:"paytype value"},[t._v(t._s("cash"===t.order.pay_type?"Наличными":"По реквизитам"))])]),i("div",{staticClass:"booking__discount"},[i("p",{staticClass:"discount key"},[t._v("Сумма скидки:")]),i("p",{staticClass:"discount value"},[t._v(t._s(t.booking.discount)+" тг")])]),i("div",{directives:[{name:"show",rawName:"v-show",value:t.booking.debt>0&&t.orderValid,expression:"booking.debt>0&&orderValid"}],staticClass:"discount__button",on:{click:function(e){return t.addDiscount()}}},[t._v(" Добавить скидку ")]),i("div",{staticClass:"booking__paid"},[i("p",{staticClass:"paid key"},[t._v("Оплачено:")]),i("p",{staticClass:"paid value"},[t._v(t._s(t.booking.paid)+" тг")])]),i("div",{directives:[{name:"show",rawName:"v-show",value:t.booking.debt>0&&t.orderValid,expression:"booking.debt>0&&orderValid"}],staticClass:"pay__button",on:{click:function(e){return t.addPay()}}},[t._v(" Добавить оплату ")]),i("div",{staticClass:"booking__remaining"},[i("p",{staticClass:"remaining key"},[t._v(t._s("completed"===t.booking.status?"Долг":"Остаток"))]),i("p",{staticClass:"remaining value"},[t._v(t._s(t.booking.debt)+" тг")])])]),i("payment-popup",{directives:[{name:"show",rawName:"v-show",value:t.show,expression:"show"}],attrs:{remain:t.booking.debt},on:{addPayment:t.addPayment,closePayment:t.closePayment}})],1)},Pi=[],Si={data:function(){return{show:!1,active:"payment",orders:JSON.parse(localStorage.getItem("orderInfo"))}},components:{PaymentPopup:ce},methods:{addPayment:function(t){switch(this.active){case"payment":this.$store.dispatch("booking/setBookingPaid",t);break;case"discount":this.$store.dispatch("booking/addBookingDiscount",t);break}this.show=!1},updateLocalStorage:function(t){for(var e=t.orderId,i=0;i<this.orders.length;i++)this.orders[i].orderId==e&&(this.orders[i]=t);localStorage.setItem("orderInfo",JSON.stringify(this.orders))},closePayment:function(){this.show=!1},addPay:function(){this.show=!0,this.active="payment"},addDiscount:function(){this.show=!0,this.active="discount"}},computed:Object(m["a"])(Object(m["a"])(Object(m["a"])({},Object(b["c"])("booking",["booking"])),Object(b["c"])("order",["order"])),{},{orderValid:function(){return"completed"!==this.order.status&&"pending"!==this.order.status}})},Di=Si,Ii=(i("dc79"),Object(p["a"])(Di,ji,Pi,!1,null,"53617351",null)),$i=Ii.exports,Ni={data:function(){return{active:"info"}},components:{ConfirmHeader:We,BookingCard:$i},computed:Object(m["a"])(Object(m["a"])(Object(m["a"])({},Object(b["c"])("booking",["booking"])),Object(b["c"])("order",["order"])),{},{getDateFormat:function(){return V(this.booking.date).locale("ru").format("DD MMMM")},orderValid:function(){return"Отменено"!==this.order.status&&"В ожидании"!==this.order.status&&"Завершено"!==this.order.status}}),methods:{goToEdit:function(){this.$router.push({path:"/order/:".concat(this.order.id,"/booking/:").concat(this.booking.id,"/edit")})}}},Ai=Ni,Mi=(i("63ae"),Object(p["a"])(Ai,wi,xi,!1,null,"f9798bf0",null)),Bi=Mi.exports,Fi=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"edit__booking"},[i("confirm-header",{scopedSlots:t._u([{key:"main",fn:function(){return[i("p",{staticClass:"order__id"},[t._v("Редактирование")])]},proxy:!0},{key:"date",fn:function(){return[i("p",{staticClass:"order__date"},[t._v("Бронь, "+t._s(t.getDateFormat))])]},proxy:!0}])}),i("edit-card",{on:{hasChanged:t.hasChangedMethod}}),i("div",{staticClass:"save"},[i("div",{staticClass:"save__button",class:t.hasChanged?"changed":"notChanged",on:{click:function(e){t.hasChanged&&t.saveChanges()}}},[t._v("Сохранить")])])],1)},Ei=[],Ti=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"edit__card"},[i("div",{staticClass:"card__inner"},[i("div",{staticClass:"edit__date"},[i("p",{staticClass:"bold"},[t._v("Дата бронирования")]),i("drop-down",{attrs:{options:t.getDateOptions,id:"date",initialValue:t.changedDate},on:{selected:t.selected}})],1),i("div",{staticClass:"edit__timeAndField"},[i("p",{staticClass:"bold"},[t._v("Время бронирования")]),i("div",{staticClass:"time"},[i("div",{staticClass:"time__start"},[i("label",{staticStyle:{"margin-bottom":"4px"}},[t._v("Время начала")]),i("drop-down",{attrs:{options:t.getStartOptions,id:"start",initialValue:t.changedStartTime},on:{selected:t.selected}})],1),i("div",{staticClass:"time__end"},[i("label",{staticStyle:{"margin-bottom":"4px"}},[t._v("Время окончания")]),i("drop-down",{attrs:{options:t.getEndOptions,id:"end",initialValue:t.changedEndTime},on:{selected:t.selected}})],1)]),i("div",{staticClass:"field"},[i("drop-down",{attrs:{options:t.fields,id:"field",initialValue:t.changedField},on:{selected:t.selected}})],1)]),i("div",{staticClass:"changes"},[i("p",{staticClass:"bold"},[t._v("Изменения")]),i("div",{staticClass:"changes__info"},[i("table",{staticStyle:{width:"100%"}},[i("tr",[i("td",{staticClass:"key"},[t._v("Дата:")]),i("td",{staticClass:"old"},[t._v(t._s(t.getDateFormat(this.booking.date)))]),i("td",{staticClass:"new",class:t.isDateEdited?"":"notEdited"},[t._v(t._s(t.getDateFormat(this.changedDate)))])]),i("tr",[i("td",{staticClass:"key"},[t._v("Время:")]),i("td",{staticClass:"old"},[t._v(t._s(t.booking.start_time+"-"+t.booking.end_time))]),i("td",{staticClass:"new",class:{notEdited:!t.isTimeEdited,notValid:!t.isChangeValid()}},[t._v(t._s(t.changedStartTime+"-"+t.changedEndTime))])]),i("tr",[i("td",{staticClass:"key"},[t._v("Площадка:")]),i("td",{staticClass:"old"},[t._v("№"+t._s(t.booking.field_id))]),i("td",{staticClass:"new",class:{notEdited:!t.isFieldEdited,notValid:!t.isChangeValid()}},[t._v("№"+t._s(t.changedField))])]),i("tr",[i("td",{staticClass:"key"},[t._v("Цена:")]),i("td",{staticClass:"old"},[t._v(t._s(t.booking.price)+" тг")]),i("td",{staticClass:"new",class:{notEdited:!t.isEdited,notValid:!t.isChangeValid()}},[t._v(t._s(t.changedPrice)+" тг")])])])])])])])},Vi=[],Ri=(i("fb6a"),function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"dropdown"},[i("div",{staticClass:"chosen",class:{fixed:t.fixed},on:{click:function(e){e.stopPropagation(),t.toggleDropdown=!t.toggleDropdown}}},[i("div",{staticClass:"value"},[t._t("image"),i("span",[i("label",[t._v(t._s(t.selectedText))])])],2),i("i",{staticClass:"fa fa-caret-down icon"})]),i("div",{staticClass:"dropdown__options",class:{show:t.toggleDropdown}},t._l(t.options,(function(e,s){return i("div",{key:s,staticClass:"dropdown__option",attrs:{value:e.value},on:{click:function(i){return i.stopPropagation(),t.setSelect(e)}}},[t._v(t._s(e.text))])})),0)])}),Hi=[],Yi={props:["options","initialValue","id","fixed"],data:function(){return{selected:"",selectedText:"Выберите",toggleDropdown:!1}},watch:{"initialValue.value":function(){this.selected=this.initialValue.value,this.selectedText=this.initialValue.text}},methods:{setSelect:function(t){this.selected=t.value,this.selectedText=t.text,this.toggleDropdown=!1,this.$emit("selected",{value:this.selected,text:this.selectedText},this.id)}}},Wi=Yi,Li=(i("b1f7"),Object(p["a"])(Wi,Ri,Hi,!1,null,"44ebe603",null)),Ji=Li.exports,zi={data:function(){return{changedDate:"",changedStartTime:"",changedEndTime:"",changedField:"",changedPrice:"",timelines:["05:00","05:30","06:00","06:30","07:00","07:30","08:00","08:30","09:00","09:30","10:00","10:30","11:00","11:30","12:00","12:30","13:00","13:30","14:00","14:30","15:00","15:30","16:00","16:30","17:00","17:30","18:00","18:30","19:00","19:30","20:00","20:30","21:00","21:30","22:00","22:30","23:00","23:30","00:00","00:30","01:00","01:30","02:00","02:30","03:00","03:30","04:00","04:30"],fields:[],facility:JSON.parse(localStorage.getItem("facility")),timelinesPrices:[],orders:JSON.parse(localStorage.getItem("orderInfo"))}},mounted:function(){var t=this;this.timelinesPrices=new Array(this.timelines.length),this.changedDate=this.booking.date,this.changedStartTime=this.booking.start_time,this.changedEndTime=this.booking.end_time,this.changedField=this.booking.field_id,this.changedPrice=this.booking.price,this.fields=Object.keys(this.facility.fields).map((function(e){return t.facility.fields[e].id}))},components:{DropDown:Ji},computed:Object(m["a"])(Object(m["a"])(Object(m["a"])({},Object(b["c"])("booking",["booking"])),Object(b["c"])("order",["order"])),{},{isEdited:function(){return this.isDateEdited||this.isTimeEdited||this.isFieldEdited},isDateEdited:function(){return this.getDateFormat(this.date)!==this.getDateFormat(this.changedDate)},isTimeEdited:function(){return this.booking.start_time!==this.changedStartTime||this.booking.end_time!==this.changedEndTime},isFieldEdited:function(){return this.booking.field_id!==this.changedField},getStartTime:function(){var t=this;return this.facility.fields.filter((function(e){return e.id===t.changedField}))[0]["weekdays"][this.getDayOfWeek(this.changedDate)].start_time},getEndTime:function(){var t=this;return this.facility.fields.filter((function(e){return e.id===t.changedField}))[0]["weekdays"][this.getDayOfWeek(this.changedDate)].end_time},getStartOptions:function(){var t=this.timelines.indexOf(this.getStartTime),e=this.timelines.indexOf(this.getEndTime);return this.timelines.slice(t,e)},getEndOptions:function(){var t=this.timelines.indexOf(this.changedStartTime),e=this.timelines.indexOf(this.getEndTime);return this.timelines.slice(t+1,e+1)},getDateOptions:function(){for(var t=[],e=V().locale("ru"),i=0;i<7;i++)t.push(e),e=e.add(1,"day");return t},getDuration:function(){var t=30*(this.timelines.indexOf(this.changedEndTime)-this.timelines.indexOf(this.changedStartTime)+1),e=Math.floor(t/60),i=t%60;return"".concat(e," ч ").concat(i," мин")}}),methods:{checkDates:function(t,e){return V(t).locale("ru").format("DD-MMMM-YYYY")===V(e).locale("ru").format("DD-MMMM-YYYY")},isChangeValid:function(){for(var t in this.orders){var e=this.orders[t].bookings;for(var i in e)if(this.orders[t].orderId!==this.order.orderId&&e[i].bookingId!==this.booking.bookingId&&this.checkDates(e[i].date,this.changedDate)&&this.isOverlapping(e[i].start_time,e[i].end_time)&&this.checkFields(this.changedField,e[i].field_id))return!1}return!0},checkFields:function(t,e){return t===e},isOverlapping:function(t,e){var i=this.timelines.indexOf(this.changedStartTime),s=this.timelines.indexOf(this.changedEndTime),a=this.timelines.indexOf(t),n=this.timelines.indexOf(e);return!(i>=n||s<=a)},getDateFormat:function(t){return V(t).locale("ru").format("DD MMMM")},selected:function(t,e){"start"===e?(this.timelines.indexOf(t)<this.timelines.indexOf("00:00")&&this.timelines.indexOf(this.changedStartTime)>=this.timelines.indexOf("00:00")&&(this.changedDate=V(this.changedDate).subtract(1,"day")),this.timelines.indexOf(t)>=this.timelines.indexOf("00:00")&&this.timelines.indexOf(this.changedStartTime)<this.timelines.indexOf("00:00")&&(this.changedDate=V(this.changedDate).add(1,"day")),this.changedStartTime=t,this.changedEndTime=this.timelines[this.timelines.indexOf(this.changedStartTime)+1]):"end"===e?this.changedEndTime=t:"field"===e?this.changedField=t:"date"===e&&(this.changedDate=t),this.getPrice(),this.$emit("hasChanged",this.isEdited&&this.isChangeValid(),{date:this.changedDate,time:{start_time:this.changedStartTime,end_time:this.changedEndTime},field_id:this.changedField,price:this.changedPrice,duration:this.getDuration})},dateChanged:function(){this.getPrice()},getDayOfWeek:function(t){return V(t).day()},getPrice:function(){var t=this,e=this.facility.fields.filter((function(e){return e.id===t.changedField}))[0].weekdays[this.getDayOfWeek(this.changedDate)].price;Object.keys(e).forEach((function(i){return t.timelinesPrices[t.timelines.indexOf(i)]=e[i]}));for(var i=0,s=0;s<this.timelinesPrices.length;s++)void 0===this.timelinesPrices[s]?this.timelinesPrices[s]=i:i=this.timelinesPrices[s];var a=this.timelines.indexOf(this.changedStartTime),n=this.timelines.indexOf(this.changedEndTime);this.changedPrice=this.timelinesPrices.slice(a,n).reduce((function(t,e){return t+e}),0)}}},Ui=zi,qi=(i("1186"),Object(p["a"])(Ui,Ti,Vi,!1,null,"6457a5fe",null)),Zi=qi.exports,Gi={data:function(){return{hasChanged:!1,changed:{},orders:JSON.parse(localStorage.getItem("orderInfo"))}},components:{ConfirmHeader:We,EditCard:Zi},computed:Object(m["a"])(Object(m["a"])(Object(m["a"])(Object(m["a"])(Object(m["a"])(Object(m["a"])({},Object(b["c"])("booking",["booking"])),Object(b["c"])("order",["order"])),Object(b["b"])("order",["getOrder"])),Object(b["b"])("booking",["getBooking"])),Object(b["c"])("admin",["user"])),{},{getDateFormat:function(){return V(this.booking.date).locale("ru").format("DD MMMM")}}),methods:{saveChanges:function(){this.$store.dispatch("booking/setBookingTime",this.changed.time),this.$store.dispatch("booking/setBookingPrice",this.changed.price),this.$store.dispatch("booking/setBookingDate",this.changed.date),this.$store.dispatch("booking/setBookingField",this.changed.field_id),this.$store.dispatch("booking/setDuration",this.changed.duration);for(var t=0;t<this.getOrder.bookings.length;t++)if(this.getOrder.bookings[t].bookingId===this.booking.bookingId){var e=this.getOrder.bookings;e[t]=this.getBooking,this.$store.dispatch("order/replaceBooking",e);break}this.updateLocalStorage(this.getOrder)},hasChangedMethod:function(t,e){console.log(t),this.hasChanged=t,this.changed=e},updateLocalStorage:function(t){for(var e=t.orderId,i=0;i<this.orders.length;i++)this.orders[i].orderId===e&&(this.orders[i]=t);localStorage.setItem("orderInfo",JSON.stringify(this.orders))}}},Ki=Gi,Qi=(i("04af"),Object(p["a"])(Ki,Fi,Ei,!1,null,"7ce5a3ea",null)),Xi=Qi.exports,ts=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"clients__wrapper"},t._l(t.clients,(function(t){return i("ClientCardMini",{key:t.phone})})),1)},es=[],is={components:{ClientCardMini:Ct},data:function(){return{clients:[]}},created:function(){this.clients=JSON.parse(localStorage.getItem("users"))}},ss=is,as=Object(p["a"])(ss,ts,es,!1,null,"30b0b9cf",null),ns=as.exports,os=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"field__setting"},[i("ConfirmHeader",{scopedSlots:t._u([{key:"title",fn:function(){return[i("p",{staticClass:"field__time"},[t._v("Время на площадке")])]},proxy:!0}])}),i("div",{staticClass:"field__text"},[t._v(t._s(t.isDaySelected?"Проставьте цены":"Укажите режим работы"))]),i("working-hours",{directives:[{name:"show",rawName:"v-show",value:t.show&&7!==t.saved.length,expression:"show&&saved.length!==7"}],attrs:{saved:t.saved},on:{daySelected:t.daySelected}}),i("PriceSettings",{directives:[{name:"show",rawName:"v-show",value:!t.show&&!t.isDayOff,expression:"!show&&!isDayOff"}],attrs:{selectedDays:t.selectedDaysF,workingHours:t.workingHours},on:{readyToChange:t.readyToChange}}),i("div",{staticClass:"wrapper"},t._l(t.changedInfo,(function(e,s){return i("ChangedCard",{directives:[{name:"show",rawName:"v-show",value:t.show,expression:"show"}],key:s,staticStyle:{"margin-bottom":"16px"},attrs:{info:e,start_time:e.start,end_time:e.end},on:{clear:t.clear}})})),1),i("div",{staticClass:"save__btn",class:{available:7===t.saved.length,notDisplayed:!t.show},on:{click:function(e){return t.commitChanges()}}},[t._v(" Сохранить ")])],1)},rs=[],cs=i("2909"),ls=(i("7db0"),function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"workingHours"},[i("div",{staticClass:"workingHours__inner"},[i("p",{staticClass:"title"},[t._v("Выберите дни")]),i("div",{staticClass:"week__days"},[i("div",{staticClass:"day monday",class:{daySelected:t.selectedDays.includes("1"),saved:t.saved.includes("1")},on:{click:function(e){return t.daySelected("1")}}},[t._v("Пн")]),i("div",{staticClass:"day tuesday",class:{daySelected:t.selectedDays.includes("2"),saved:t.saved.includes("2")},on:{click:function(e){return t.daySelected("2")}}},[t._v("Вт")]),i("div",{staticClass:"day wednesday",class:{daySelected:t.selectedDays.includes("3"),saved:t.saved.includes("3")},on:{click:function(e){return t.daySelected("3")}}},[t._v("Ср")]),i("div",{staticClass:"day thursday",class:{daySelected:t.selectedDays.includes("4"),saved:t.saved.includes("4")},on:{click:function(e){return t.daySelected("4")}}},[t._v("Чт")]),i("div",{staticClass:"day friday",class:{daySelected:t.selectedDays.includes("5"),saved:t.saved.includes("5")},on:{click:function(e){return t.daySelected("5")}}},[t._v("Пт")]),i("div",{staticClass:"day saturday",class:{daySelected:t.selectedDays.includes("6"),saved:t.saved.includes("6")},on:{click:function(e){return t.daySelected("6")}}},[t._v("Сб")]),i("div",{staticClass:"day sunday",class:{daySelected:t.selectedDays.includes("0"),saved:t.saved.includes("0")},on:{click:function(e){return t.daySelected("0")}}},[t._v("Вс")])]),i("p",{staticClass:"workingHours__text"},[t._v("Режим работы")]),i("div",{directives:[{name:"show",rawName:"v-show",value:!t.checked,expression:"!checked"}],staticClass:"startTime__endTime"},[i("div",{staticClass:"start__time"},[i("drop-down",{attrs:{options:t.getStartOptions,id:"start",initialValue:t.startValue},on:{selected:t.selected}})],1),i("div",{staticClass:"end__time"},[i("drop-down",{attrs:{options:t.getEndOptions,id:"end",initialValue:t.endValue},on:{selected:t.selected}})],1)]),i("div",{directives:[{name:"show",rawName:"v-show",value:t.selectedDays.length>0,expression:"selectedDays.length>0"}],staticClass:"dayOff"},[i("p",[t._v("Выходной")]),i("label",{staticClass:"switch"},[i("input",{directives:[{name:"model",rawName:"v-model",value:t.checked,expression:"checked"}],attrs:{type:"checkbox"},domProps:{checked:Array.isArray(t.checked)?t._i(t.checked,null)>-1:t.checked},on:{click:function(e){t.checked=!t.checked},change:function(e){var i=t.checked,s=e.target,a=!!s.checked;if(Array.isArray(i)){var n=null,o=t._i(i,n);s.checked?o<0&&(t.checked=i.concat([n])):o>-1&&(t.checked=i.slice(0,o).concat(i.slice(o+1)))}else t.checked=a}}}),i("span",{staticClass:"slider round"})])]),i("div",{staticClass:"add__button",class:{available:t.isAvailable},on:{click:function(e){return t.addWorkingHours()}}},[t._v(" Добавить ")])])])}),ds=[],us={props:["saved"],data:function(){return{selectedDays:[],workingHours:[],checked:!1,startValue:{value:"",text:""},endValue:{value:"",text:""},timelines:["05:00","05:30","06:00","06:30","07:00","07:30","08:00","08:30","09:00","09:30","10:00","10:30","11:00","11:30","12:00","12:30","13:00","13:30","14:00","14:30","15:00","15:30","16:00","16:30","17:00","17:30","18:00","18:30","19:00","19:30","20:00","20:30","21:00","21:30","22:00","22:30","23:00","23:30","00:00","00:30","01:00","01:30","02:00","02:30","03:00","03:30","04:00","04:30"]}},components:{DropDown:Ji},computed:{isAvailable:function(){return this.startValue.value&&this.endValue.value&&this.selectedDays.length>0||this.checked},getStartOptions:function(){return this.timelines.map((function(t){return{value:t,text:t}}))},getEndOptions:function(){return this.timelines.slice(this.timelines.indexOf(this.startValue.value)+1).map((function(t){return{value:t,text:t}}))}},methods:{daySelected:function(t){this.selectedDays.includes(t)?this.selectedDays=this.selectedDays.filter((function(e){return e!==t})):this.selectedDays.push(t)},addWorkingHours:function(){this.$emit("daySelected",this.selectedDays,this.checked,this.workingHours),this.resetValues()},selected:function(t,e){"start"===e?(this.startValue=Object(m["a"])({},t),this.endValue.text=this.timelines[this.timelines.indexOf(t.text)+1],this.endValue.value=this.timelines[this.timelines.indexOf(t.text)+1]):"end"===e&&(this.endValue=Object(m["a"])({},t)),this.workingHours=this.timelines.slice(this.timelines.indexOf(this.startValue.value),this.timelines.indexOf(this.endValue.value)+1)},resetValues:function(){this.selectedDays=[],this.workingHours=[],this.checked=!1,this.startValue={value:"",text:""},this.endValue={value:"",text:""}}}},ps=us,fs=(i("0cd9"),Object(p["a"])(ps,ls,ds,!1,null,"e27269ce",null)),hs=fs.exports,ms=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"priceSettings"},[i("div",{staticClass:"priceSettings__inner"},[i("p",{staticClass:"title"},[t._v("Проставьте цены")]),i("div",{staticClass:"week__days"},t._l(t.selectedDays,(function(e,s){return i("div",{key:s,staticClass:"day"},[t._v(t._s(e))])})),0),i("p",{staticClass:"tip"},[t._v("Добавьте цену за полчаса и промежуток действия")]),i("div",{directives:[{name:"show",rawName:"v-show",value:t.startValue&&t.endValue&&t.localWH.length>1,expression:"startValue&&endValue&&localWH.length>1"}],staticClass:"input__fields"},[i("div",{staticClass:"price__input"},[i("input",{directives:[{name:"model",rawName:"v-model",value:t.price,expression:"price"}],attrs:{type:"text",inputmode:"tel",placeholder:"Добавьте цену за полчаса"},domProps:{value:t.price},on:{input:function(e){e.target.composing||(t.price=e.target.value)}}})]),i("div",{staticClass:"interval__input"},[i("div",{staticClass:"start__time"},[i("drop-down",{attrs:{options:t.getStartOptions,id:"start",fixed:!0,initialValue:t.startValue},on:{selected:t.selected}})],1),i("div",{staticClass:"end__time"},[i("drop-down",{attrs:{options:t.getEndOptions,id:"end",initialValue:t.endValue},on:{selected:t.selected}})],1)])]),i("div",{staticClass:"info__wrapper"},t._l(t.info,(function(e,s){return i("div",{key:s,staticClass:"info__show"},[i("div",{staticClass:"interval"},[t._v(t._s(e.start_time.text)+" - "+t._s(e.end_time.text))]),i("div",{staticClass:"price__and__cancel"},[i("div",{staticClass:"price"},[t._v(t._s(e.price)+" ₸")])])])})),0),i("div",{staticClass:"add__button",class:{available:t.isAvailable||t.allDone},on:{click:function(e){return t.addToInfo()}}},[t._v(" Добавить ")])])])},vs=[],_s={props:["selectedDays","workingHours"],data:function(){return{info:[],startValue:{},endValue:{},price:"",localWH:[],sendData:{},timelines:["05:00","05:30","06:00","06:30","07:00","07:30","08:00","08:30","09:00","09:30","10:00","10:30","11:00","11:30","12:00","12:30","13:00","13:30","14:00","14:30","15:00","15:30","16:00","16:30","17:00","17:30","18:00","18:30","19:00","19:30","20:00","20:30","21:00","21:30","22:00","22:30","23:00","23:30","00:00","00:30","01:00","01:30","02:00","02:30","03:00","03:30","04:00","04:30","05:00"]}},watch:{workingHours:function(t){this.localWH=t,this.startValue={value:this.localWH[0],text:this.localWH[0]},this.endValue={value:this.localWH[1],text:this.localWH[1]}}},components:{DropDown:Ji},methods:{selected:function(t,e){"end"===e&&(this.endValue=Object(m["a"])({},t))},addToInfo:function(){for(var t=this.timelines.indexOf(this.startValue.value);t<this.timelines.indexOf(this.endValue.value);t++)this.sendData[[this.timelines[t]]]=this.price;this.info.push({start_time:this.startValue,end_time:this.endValue,price:this.price}),this.localWH=this.localWH.slice(this.localWH.indexOf(this.endValue.value)),this.allDone&&(this.$emit("readyToChange",this.info,this.workingHours[0],this.workingHours[this.workingHours.length-1],this.sendData),this.info=[],this.sendData={}),this.clear()},clear:function(){this.startValue={value:this.localWH[0],text:this.localWH[0]},this.endValue={value:this.localWH[1],text:this.localWH[1]},this.price=""}},computed:{isAvailable:function(){return this.startValue&&this.endValue&&this.price},allDone:function(){return!(this.startValue&&this.endValue&&this.localWH.length>1)},getStartOptions:function(){return this.localWH.map((function(t){return{value:t,text:t}}))},getEndOptions:function(){return this.localWH.slice(this.localWH.indexOf(this.startValue.value)+1).map((function(t){return{value:t,text:t}}))}}},gs=_s,ys=(i("7781"),Object(p["a"])(gs,ms,vs,!1,null,"eb218afc",null)),bs=ys.exports,ks=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"changedCard"},[i("div",{staticClass:"changedCard__inner"},[i("div",{staticClass:"week__days"},t._l(t.info.selectedDays,(function(e,s){return i("div",{key:s,staticClass:"day"},[t._v(t._s(e))])})),0),i("div",{staticClass:"workingHours"},[i("p",[t._v("Режим работы")]),t.info.dayOff?t.info.dayOff?i("p",{staticClass:"dayoff"},[t._v("Выходной день")]):t._e():i("p",[t._v(t._s(t.start_time)+" - "+t._s(t.end_time))])]),t.info.dayOff?t._e():i("div",{staticClass:"schedule"},t._l(t.info.info,(function(e,s){return i("div",{key:s,staticClass:"schedule__info"},[i("p",{staticClass:"time"},[t._v(t._s(e.start_time.text)+" - "+t._s(e.end_time.text))]),i("p",{staticClass:"price"},[t._v(t._s(e.price)+" ₸")])])})),0),i("div",{staticClass:"clear__button",on:{click:t.clear}},[t._v("Очистить")])])])},Cs=[],Os={props:["info","start_time","end_time"],methods:{clear:function(){this.$emit("clear",this.info,this.start_time,this.end_time)}}},ws=Os,xs=(i("927f"),Object(p["a"])(ws,ks,Cs,!1,null,"0d9a7677",null)),js=xs.exports,Ps={data:function(){return{isDaySelected:!1,sendData:{},selectedDaysF:[],selectedDays:[],isDayOff:!1,workingHours:[],changedInfo:[],saved:[],show:!0,showInfo:!1,daysToChange:[],facility:JSON.parse(localStorage.getItem("facility"))}},components:{ConfirmHeader:We,WorkingHours:hs,PriceSettings:bs,ChangedCard:js},methods:{clear:function(t){this.selectedDays=this.selectedDays.filter((function(e){return!t.selectedDays.includes(e)})),this.saved=this.dayFormatReversed(this.dayFormat(this.saved).filter((function(e){return!t.selectedDays.includes(e)}))),this.changedInfo=this.changedInfo.filter((function(e){return JSON.stringify(e)!==JSON.stringify(t)})),this.showInfo=!1,this.show=!0},dayFormat:function(t){return t.map((function(t){switch(t){case"1":return"Пн";case"2":return"Вт";case"3":return"Ср";case"4":return"Чт";case"5":return"Пт";case"6":return"Сб";case"0":return"Вс"}}))},dayFormatReversed:function(t){return t.map((function(t){switch(t){case"Пн":return"1";case"Вт":return"2";case"Ср":return"3";case"Чт":return"4";case"Пт":return"5";case"Сб":return"6";case"Вс":return"0"}}))},daySelected:function(t,e,i){var s,a=this;(this.show=!1,this.selectedDays=t,this.selectedDaysF=this.dayFormat(t),this.isDayOff=e,this.workingHours=i,this.isDayOff)&&(this.showInfo=!0,this.show=!0,(s=this.saved).push.apply(s,Object(cs["a"])(t)),this.changedInfo.push({dayOff:this.isDayOff,selectedDays:this.selectedDays}),this.selectedDays.forEach((function(t){a.sendData[t]={dayoff:!0}})))},readyToChange:function(t,e,i,s){var a,n=this;this.changedInfo.push({info:t,dayOff:this.isDayOff,selectedDays:this.selectedDays,start:e,end:i}),this.selectedDays.forEach((function(t){n.sendData[[t]]={start_time:e,end_time:i,prices:Object(m["a"])({},s),dayoff:!1}})),(a=this.saved).push.apply(a,Object(cs["a"])(this.selectedDays)),this.selectedDays=[],this.selectedDaysF=[],this.show=!0,this.showInfo=!0},commitChanges:function(){var t=this;return Object(y["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.facility.forEach((function(e){e.id===t.playfield.id&&(e["periods_data"]=JSON.stringify(t.sendData))})),e.next=3,Y.a.post("https://almvtst.ml/crm/user/".concat(localStorage.getItem("id"),"/playfield/").concat(t.playfield.id,"/update-data"),{periods_data:t.facility.find((function(e){return e.id===t.playfield.id})).periods_data},{headers:{Authorization:"Bearer ".concat(localStorage.getItem("access_token"))}}).then((function(t){return console.log(t)})).catch((function(t){return console.log(t)}));case 3:localStorage.setItem("facility",JSON.stringify(t.facility));case 4:case"end":return e.stop()}}),e)})))()}},computed:Object(m["a"])({},Object(b["c"])("playfield",["playfield"]))},Ss=Ps,Ds=(i("1f20"),Object(p["a"])(Ss,os,rs,!1,null,"2e5d4b82",null)),Is=Ds.exports,$s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"longTermOrder"},[i("order-header",{scopedSlots:t._u([{key:"orderHeader",fn:function(){return[i("p",{staticClass:"new__order"},[t._v("Новый заказ")]),i("div",{staticClass:"close__order",on:{click:function(e){return t.goBack()}}},[i("i",{staticClass:"fa fa-times-circle",attrs:{"aria-hidden":"true"}})])]},proxy:!0},{key:"headerBottom",fn:function(){return[i("div",{staticClass:"header__bottom"},[i("p",[t._v("Добавление клиента")])])]},proxy:!0}])}),i("div",{staticClass:"info"},[i("p",{staticClass:"order__type"},[t._v(t._s(t.order.type))]),i("p",{staticClass:"start__date"},[t._v(t._s(t.getDateFormat(t.order.start_date)))]),i("p",{staticClass:"startTime__endTime"},[t._v(t._s(t.booking.start_time)+" - "+t._s(t.booking.end_time))]),i("p",{staticClass:"price"},[t._v(t._s(t.booking.price))]),i("p",{staticClass:"field"},[t._v("Площадка № "+t._s(t.booking.field_id)+"("+t._s(t.booking.description)+")")])]),i("div",{staticClass:"order__period"},[i("p",{staticClass:"title"},[t._v("Период бронирования")]),i("div",{staticClass:"order__periods"},[i("div",{staticClass:"start__period"},[i("p",{staticClass:"start__title"},[t._v("Дата начала")]),i("date-picker",{staticStyle:{width:"100%",height:"40px"},attrs:{format:"D MMMM, dd",placeholder:t.startDate,disabled:""},model:{value:t.startDate,callback:function(e){t.startDate=e},expression:"startDate"}})],1),i("div",{staticClass:"end__period"},[i("p",{staticClass:"end__title"},[t._v("Дата окончания")]),i("date-picker",{staticStyle:{width:"100%",height:"40px"},attrs:{format:"D MMMM, dd"},model:{value:t.endDate,callback:function(e){t.endDate=e},expression:"endDate"}})],1)])]),i("div",{staticClass:"continue__button",class:{available:t.endDate},on:{click:function(e){return t.continueOrder()}}},[t._v(" Продолжить ")])],1)},Ns=[],As=i("ec45"),Ms=(i("411c"),i("107a"),{components:{OrderHeader:j,DatePicker:As["default"]},data:function(){return{startDate:"",endDate:""}},mounted:function(){this.startDate=this.getDateFormat(this.order.start_date)},computed:Object(m["a"])(Object(m["a"])({},Object(b["c"])("order",["order"])),Object(b["c"])("booking",["booking"])),methods:{getDateFormat:function(t){return V(t).format("DD MMMM, dd")},goBack:function(){this.$store.dispatch("order/resetState"),this.$store.dispatch("booking/resetState"),this.$router.push({path:"/"})},continueOrder:function(){this.$store.dispatch("order/setDate",{start_date:this.order.start_date,end_date:V(this.endDate)}),this.$router.push({path:"/availableBookings"})}}}),Bs=Ms,Fs=(i("2b29"),Object(p["a"])(Bs,$s,Ns,!1,null,"26c1d3b2",null)),Es=Fs.exports,Ts=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"longTermSearch"},[i("order-header",{scopedSlots:t._u([{key:"orderHeader",fn:function(){return[i("p",{staticClass:"new__order"},[t._v("Результаты поиска")]),i("div",{staticClass:"close__order",on:{click:function(e){return t.goBack()}}},[i("i",{staticClass:"fa fa-times-circle",attrs:{"aria-hidden":"true"}})])]},proxy:!0}])}),i("div",{staticClass:"longTermSearch__inner"},[i("div",{staticClass:"little__info"},[i("p",{staticClass:"first__line"},[t._v("Площадка №"+t._s(t.booking.field_id)+", "+t._s(t.getDayOfWeek(t.order.start_date)))]),i("p",{staticClass:"second__line"},[t._v("С "+t._s(t.getDateFormat(t.order.start_date))+" по "+t._s(t.getDateFormat(t.order.end_date)))]),i("p",{staticClass:"third__ling"},[t._v("Доступно "+t._s(t.getAvailable)+" из "+t._s(t.getAllBookingsCount))])]),i("div",{staticClass:"results"},t._l(t.bookings,(function(e,s){return i("booking-availability",{key:s,attrs:{date:e,isFree:t.isFree(e)},on:{handleSelect:t.handleSelect,addValue:t.addValue}})})),1)]),i("div",{staticClass:"information"},[i("p",{staticClass:"selected"},[t._v("Выбрано "+t._s(t.count)+" броней")]),i("p",{staticClass:"all__price"},[t._v("Общая сумма: "+t._s(t.getAllCount)+" тг")]),i("div",{staticClass:"continue",on:{click:function(e){return t.createOrder()}}},[t._v("Продолжить")])])],1)},Vs=[],Rs=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"container",class:{free:t.selected}},[i("input",{attrs:{type:"checkbox",disabled:!t.isFree},domProps:{checked:t.selected},on:{click:function(e){return t.handleSelect()}}}),i("p",{staticClass:"date"},[t._v(t._s(t.getDateFormat))])])},Hs=[],Ys={props:["date","isFree"],data:function(){return{selected:!1}},mounted:function(){this.selected=this.isFree,this.$emit("addValue",{date:this.date,isSelected:this.selected})},computed:{getDateFormat:function(){return this.date.locale("ru").format("DD MMMM")}},methods:{handleSelect:function(){this.selected=!this.selected,this.$emit("handleSelect",{date:this.date,isSelected:this.selected})}}},Ws=Ys,Ls=(i("8589"),Object(p["a"])(Ws,Rs,Hs,!1,null,"59bba8b7",null)),Js=Ls.exports,zs={data:function(){return{bookings:[],timelines:["05:00","05:30","06:00","06:30","07:00","07:30","08:00","08:30","09:00","09:30","10:00","10:30","11:00","11:30","12:00","12:30","13:00","13:30","14:00","14:30","15:00","15:30","16:00","16:30","17:00","17:30","18:00","18:30","19:00","19:30","20:00","20:30","21:00","21:30","22:00","22:30","23:00","23:30","00:00","00:30","01:00","01:30","02:00","02:30","03:00","03:30","04:00","04:30"],orders:JSON.parse(localStorage.getItem("orderInfo")),selectedDates:[],count:0}},created:function(){this.getAllBookings()},mounted:function(){this.count=this.getSelectedBookingsCount()},components:{OrderHeader:j,BookingAvailability:Js},computed:Object(m["a"])(Object(m["a"])(Object(m["a"])(Object(m["a"])({},Object(b["c"])("order",["order"])),Object(b["b"])("booking",["getBooking"])),Object(b["c"])("booking",["booking"])),{},{getAllBookingsCount:function(){var t=this.order.start_date,e=this.order.end_date;return e.diff(t,"week")+1},getAvailable:function(){return this.selectedDates.filter((function(t){return t.isSelected})).length},getAllCount:function(){return this.count*this.booking.price}}),methods:{addValue:function(t){this.selectedDates.push(t)},handleSelect:function(t){var e=this;this.selectedDates.find((function(i,s){if(e.checkDates(i.date,t.date))return e.selectedDates[s]=t,!0})),this.count=this.getSelectedBookingsCount()},getSelectedBookingsCount:function(){return this.selectedDates.filter((function(t){return t.isSelected})).length},getDayOfWeek:function(t){return V(t).locale("ru").format("dddd")},getDateFormat:function(t){return V(t).locale("ru").format("DD MMMM")},getAllBookings:function(){for(var t=this.order.start_date,e=this.getAllBookingsCount,i=0;i<e;i++)this.bookings.push(t),t=t.add(7,"day")},checkDates:function(t,e){return V(t).locale("ru").format("DD-MMMM-YYYY")===V(e).locale("ru").format("DD-MMMM-YYYY")},checkFields:function(t,e){return t===e},isFree:function(t){for(var e in this.orders){var i=this.orders[e].bookings;for(var s in i)if(this.checkDates(i[s].date,t)&&this.isOverlapping(i[s].start_time,i[s].end_time)&&this.checkFields(this.field_id,i[s].field_id))return!1}return!0},isOverlapping:function(t,e){var i=this.timelines.indexOf(this.booking.start_time),s=this.timelines.indexOf(this.booking.end_time),a=this.timelines.indexOf(t),n=this.timelines.indexOf(e);return!(i>=n||s<=a)},createOrder:function(){var t=this,e=1,i=[];this.selectedDates.filter((function(t){return t.isSelected})).forEach((function(s){t.$store.dispatch("booking/setBookingDate",s.date),t.$store.dispatch("booking/setBookingId",e),i.push(t.getBooking),e+=1})),this.$store.dispatch("order/replaceBooking",i),this.$router.push({path:"/order"})}}},Us=zs,qs=(i("e8a0"),Object(p["a"])(Us,Ts,Vs,!1,null,"84ae227c",null)),Zs=qs.exports,Gs=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"authorization"},[i("Spinner",{attrs:{start:t.start}}),i("div",{staticClass:"authorization__inner"},[t._m(0),i("div",{staticClass:"content"},[i("div",{staticClass:"content__inner"},[t._m(1),i("div",{staticClass:"user__inputs"},[i("div",{staticClass:"telephone__input"},[i("label",{attrs:{for:"telephone"}},[t._v("Номер телефона")]),i("div",{staticClass:"flex"},[i("input",{directives:[{name:"mask",rawName:"v-mask",value:"+7 ### ### ## ##",expression:"'+7 ### ### ## ##'"},{name:"model",rawName:"v-model",value:t.tel,expression:"tel"}],attrs:{type:"tel",name:"telephone",id:"telephone",required:"",placeholder:"+7"},domProps:{value:t.tel},on:{input:function(e){e.target.composing||(t.tel=e.target.value)}}})])]),i("div",{staticClass:"password__input"},[i("label",{attrs:{for:"password"}},[t._v("Пароль")]),i("div",{staticClass:"flex"},[i("input",{directives:[{name:"model",rawName:"v-model",value:t.password,expression:"password"}],ref:"password",attrs:{type:"password",name:"password",id:"password",required:""},domProps:{value:t.password},on:{input:function(e){e.target.composing||(t.password=e.target.value)}}}),i("span",{staticClass:"showHide"},[i("i",{directives:[{name:"show",rawName:"v-show",value:t.showPassword,expression:"showPassword"}],staticClass:"fas fa-eye",on:{click:function(e){return e.stopPropagation(),t.togglePassword.apply(null,arguments)}}}),i("i",{directives:[{name:"show",rawName:"v-show",value:!t.showPassword,expression:"!showPassword"}],staticClass:"fas fa-eye-slash",on:{click:function(e){return e.stopPropagation(),t.togglePassword.apply(null,arguments)}}})])])])]),i("div",{staticClass:"signIn__btn",on:{click:t.signIn}},[t._v(" Войти ")]),i("p",{staticClass:"forget__password"},[t._v("Забыли пароль?")])])])])],1)},Ks=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"header"},[i("p",{staticClass:"app__title"},[t._v("Fizra")])])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"content__title"},[i("p",{staticClass:"signIn"},[t._v("Вход")])])}],Qs={data:function(){return{showPassword:!1,tel:"",password:"",start:!1}},components:{Spinner:T},methods:{togglePassword:function(){this.showPassword?this.$refs["password"].type="password":this.$refs["password"].type="text",this.showPassword=!this.showPassword},signIn:function(){var t=this;return Object(y["a"])(regeneratorRuntime.mark((function e(){var i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.start=!0,i=t.tel.split(" ").join(""),e.next=4,t.$store.dispatch("admin/loginUser",{tel:i,password:t.password}).then((function(){t.start=!1}));case 4:case"end":return e.stop()}}),e)})))()}}},Xs=Qs,ta=(i("7182"),Object(p["a"])(Xs,Gs,Ks,!1,null,"d9a52094",null)),ea=ta.exports,ia=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"myFacilities"},[i("Spinner",{attrs:{start:t.start}}),i("MenuHeader",{attrs:{backButton:!1},scopedSlots:t._u([{key:"title",fn:function(){return[i("p",{staticClass:"my-facilities"},[t._v("Мои сооружения")])]},proxy:!0}])}),t._l(t.facilities,(function(t){return i("FacilityCard",{key:t.id,attrs:{facility:t}})})),i("BottomMenu")],2)},sa=[],aa=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"menu__header"},[i("div",{directives:[{name:"show",rawName:"v-show",value:t.backButton,expression:"backButton"}],staticClass:"back__btn",on:{click:function(e){return t.handleClick()}}},[i("i",{staticClass:"fas fa-arrow-left"})]),t._t("title")],2)},na=[],oa={props:["backButton"],methods:{handleClick:function(){this.$emit("back")}}},ra=oa,ca=(i("2663"),Object(p["a"])(ra,aa,na,!1,null,"73cce102",null)),la=ca.exports,da=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"facilityCard",on:{click:t.goToFacility}},[i("div",{staticClass:"facilityCard__inner"},[i("div",{staticClass:"flex"},[i("p",{staticClass:"facility__name"},[t._v(t._s(t.facility.fc_name))]),i("i",{staticClass:"fas fa-chevron-right"})]),i("div",{staticClass:"playfields__amount"},[t._v(" "+t._s(t.facility.pf_amount)+" площадка(-и) ")])])])},ua=[],pa={props:["facility"],methods:{goToFacility:function(){var t=this;return Object(y["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Y.a.get("https://almvtst.ml/crm/user/".concat(localStorage.getItem("id"),"/facility/").concat(t.facility.id),{headers:{Authorization:"Bearer ".concat(localStorage.getItem("access_token"))}}).then(function(){var e=Object(y["a"])(regeneratorRuntime.mark((function e(i){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.$store.dispatch("facility/setFacility",i.data.facility);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 2:t.$router.push({name:"myFacility",params:{id:t.facility.id}});case 3:case"end":return e.stop()}}),e)})))()}}},fa=pa,ha=(i("98c9"),Object(p["a"])(fa,da,ua,!1,null,"a34eae46",null)),ma=ha.exports,va={components:{MenuHeader:la,BottomMenu:qt,FacilityCard:ma,Spinner:T},data:function(){return{start:!0,facilities:[]}},created:function(){var t=this;return Object(y["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Y.a.get("https://almvtst.ml/crm/user/".concat(localStorage.getItem("id"),"/facilities"),{headers:{Authorization:"Bearer ".concat(localStorage.getItem("access_token"))}}).then((function(e){return t.$store.dispatch("facility/setFacility",e.data.user.facilities[0]),t.start=!1,e.data.user.facilities})).catch((function(t){return console.log(t)}));case 2:t.facilities=e.sent;case 3:case"end":return e.stop()}}),e)})))()},computed:Object(m["a"])({},Object(b["c"])("admin",["user"]))},_a=va,ga=(i("6934"),Object(p["a"])(_a,ia,sa,!1,null,"ec25d136",null)),ya=ga.exports,ba=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"facility"},[i("MenuHeader",{attrs:{backButton:!1},scopedSlots:t._u([{key:"title",fn:function(){return[i("p",{staticClass:"facility__title"},[t._v(" "+t._s(t.facility.fc_name)+" ")])]},proxy:!0}])}),i("div",{staticClass:"content"},[i("div",{staticClass:"content__inner"},[i("div",{staticClass:"add__photo"},[i("div",{directives:[{name:"show",rawName:"v-show",value:t.photoAction,expression:"photoAction"}],staticClass:"backdrop",on:{click:function(e){e.stopPropagation(),t.photoAction=!1}}}),i("div",{staticClass:"photo__icon",on:{click:function(e){t.photoAction=!0}}},[i("input",{ref:"facility__photo",attrs:{type:"file",name:"file"},on:{change:t.setPhoto}}),t.hasNotPhoto?i("i",{staticClass:"fas fa-camera"}):i("img",{attrs:{src:"https://almvtst.ml/"+t.facility.avatar}})])]),i("FacilityName"),i("FacilityAddress"),i("FacilityContact"),i("FacilityDescription"),i("FacilityInfrastructure"),i("FacilityPayment"),i("p",{staticClass:"playfields"},[t._v("Площадки")]),t._l(t.facility.playfields,(function(e){return i("playfield-card",{key:e.id,attrs:{playfield:e},on:{goToPlayfield:t.goToPlayfield}})}))],2)]),i("PhotoModal",{directives:[{name:"show",rawName:"v-show",value:t.photoAction,expression:"photoAction"}],attrs:{needed:!0},on:{changePhoto:t.changePhoto,deletePhoto:t.deletePhoto}}),i("bottom-menu")],1)},ka=[],Ca=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"playfieldCard",on:{click:function(e){return t.goToPlayfield()}}},[i("div",{staticClass:"playFieldCard__inner"},[i("div",{staticClass:"firstLine"},[i("p",{staticClass:"playfield__name"},[t._v(t._s(t.playfield.pf_name))]),i("i",{staticClass:"fas fa-chevron-right"})]),i("div",{staticClass:"playfield__description line1"},[t._v(t._s(t.getIndoor)+" "+t._s(t.getSurface))]),i("div",{staticClass:"playfield__description line2"},[t._v(t._s(t.getFormat)+t._s(t.getLengthWidth))])])])},Oa=[],wa={props:["playfield"],methods:{goToPlayfield:function(){this.$store.dispatch("playfield/setPlayfield",this.playfield),this.$emit("goToPlayfield",this.playfield.id)}},computed:{getSurface:function(){var t="";switch(this.playfield.surf_type){case 0:t="Трава.";break;case 1:t="Искусственная трава.";break;case 2:t="Паркет.";break;case 3:t="Грунт.";break;case 4:t="Песок.";break;case 5:t="Бетон.";break;case 6:t="Резина.";break;default:t="Не указан."}return t},getIndoor:function(){return this.playfield.indoor?"Крытая.":"Открытая."},getFormat:function(){return this.playfield.format?"".concat(this.playfield.format,"x").concat(this.playfield.format,"."):"Не указан."},getLengthWidth:function(){return"".concat(this.playfield.length,"м x ").concat(this.playfield.width,"м.")}}},xa=wa,ja=(i("78df"),Object(p["a"])(xa,Ca,Oa,!1,null,"032091f4",null)),Pa=ja.exports,Sa=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"facility__name",on:{click:function(e){t.clicked=!0}}},[i("div",{directives:[{name:"show",rawName:"v-show",value:t.clicked,expression:"clicked"}],staticClass:"backdrop",on:{click:function(e){return e.stopPropagation(),t.closePopup.apply(null,arguments)}}}),t._m(0),i("div",{staticClass:"value"},[t._v(t._s(t.facility.fc_name))]),i("edit-popup",{directives:[{name:"show",rawName:"v-show",value:t.clicked,expression:"clicked"}],on:{close:t.closePopup},scopedSlots:t._u([{key:"title",fn:function(){return[i("p",{staticClass:"facility__title"},[t._v("Название")])]},proxy:!0},{key:"content",fn:function(){return[i("div",{staticClass:"content"},[i("div",{staticClass:"content__inner"},[i("p",{staticClass:"name__required"},[t._v("Название сооружения*")]),i("input",{directives:[{name:"model",rawName:"v-model",value:t.changedName,expression:"changedName"}],attrs:{type:"text",name:"name",id:"facility_name",placeholder:"Например: Плошадка №1",maxlength:"25"},domProps:{value:t.changedName},on:{input:function(e){e.target.composing||(t.changedName=e.target.value)}}})])])]},proxy:!0},{key:"button",fn:function(){return[i("div",{staticClass:"save__btn"},[i("div",{staticClass:"btn",class:{active:t.changedName.trim().length},on:{click:function(e){return e.stopPropagation(),t.saveName()}}},[t._v("Сохранить")])])]},proxy:!0}])})],1)},Da=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"flex"},[i("div",{staticClass:"flex__key"},[t._v("Название")]),i("i",{staticClass:"fas fa-chevron-right"})])}],Ia=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"editPopup"},[i("div",{staticClass:"editPopup__inner"},[i("div",{staticClass:"editPopup__header"},[t._t("title"),i("div",{staticClass:"close__btn"},[i("i",{staticClass:"fas fa-times",on:{click:function(e){return e.stopPropagation(),t.close.apply(null,arguments)}}})])],2),i("div",{staticClass:"editPopup__content"},[t._t("content")],2),t._t("button")],2)])},$a=[],Na={methods:{close:function(){this.$emit("close")}}},Aa=Na,Ma=(i("9b4d"),Object(p["a"])(Aa,Ia,$a,!1,null,"0af9b50a",null)),Ba=Ma.exports,Fa={data:function(){return{clicked:!1,changedName:""}},created:function(){this.setValues()},components:{EditPopup:Ba},computed:Object(m["a"])({},Object(b["c"])("facility",["facility"])),methods:{closePopup:function(){this.clicked=!1,this.setValues()},saveName:function(){var t=this;return Object(y["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Y.a.post("https://almvtst.ml/crm/user/".concat(localStorage.getItem("id"),"/facility/").concat(t.facility.id,"/update-data"),{fc_name:t.changedName},{headers:{Authorization:"Bearer ".concat(localStorage.getItem("access_token"))}}).then((function(e){return t.$store.dispatch("facility/setFacilityName",e.data.facility.fc_name)}));case 2:t.clicked=!1;case 3:case"end":return e.stop()}}),e)})))()},setValues:function(){this.changedName=this.facility.fc_name}}},Ea=Fa,Ta=(i("705e"),Object(p["a"])(Ea,Sa,Da,!1,null,"cfa7c8d4",null)),Va=Ta.exports,Ra=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"facility__address",on:{click:function(e){e.stopPropagation(),t.clicked=!0}}},[i("div",{directives:[{name:"show",rawName:"v-show",value:t.clicked,expression:"clicked"}],staticClass:"backdrop",on:{click:function(e){return e.stopPropagation(),t.closePopup.apply(null,arguments)}}}),t._m(0),i("div",{staticClass:"value"},[t._v(t._s(t.facility.address))]),i("edit-popup",{directives:[{name:"show",rawName:"v-show",value:t.clicked,expression:"clicked"}],on:{close:t.closePopup},scopedSlots:t._u([{key:"title",fn:function(){return[i("p",{staticClass:"facility__title"},[t._v("Адрес")])]},proxy:!0},{key:"content",fn:function(){return[i("div",{staticClass:"content"},[i("div",{staticClass:"content__inner"},[i("p",{staticClass:"facility__location"},[t._v("Местоположение*")]),i("div",{staticClass:"facility__map"},[i("i",{staticClass:"fas fa-map-marker-alt"}),i("input",{directives:[{name:"model",rawName:"v-model",value:t.address,expression:"address"}],attrs:{type:"text",name:"map",id:"map",placeholder:"Укажите адрес на карте, либо введите вручную",disabled:""},domProps:{value:t.address},on:{input:function(e){e.target.composing||(t.address=e.target.value)}}})]),i("div",{staticClass:"inMap__btn"},[i("div",{staticClass:"map__btn"}),i("div",{attrs:{id:"mapid"}})])])])]},proxy:!0},{key:"button",fn:function(){return[i("div",{staticClass:"save__btn"},[i("div",{staticClass:"btn active",on:{click:function(e){return e.stopPropagation(),t.saveLocation.apply(null,arguments)}}},[t._v("Сохранить")])])]},proxy:!0}])})],1)},Ha=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"flex"},[i("div",{staticClass:"flex__key"},[t._v("Адрес")]),i("i",{staticClass:"fas fa-chevron-right"})])}],Ya=i("e11e"),Wa=i.n(Ya),La={data:function(){return{clicked:!1,long:0,lat:0,address:""}},created:function(){this.setValues()},mounted:function(){var t=this,e=Wa.a.map("mapid").setView([this.lat,this.long],13);Wa.a.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{attribution:'&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'}).addTo(e);var i=Wa.a.marker([this.lat,this.long]).addTo(e);e.on("click",function(){var s=Object(y["a"])(regeneratorRuntime.mark((function s(a){var n,o,r;return regeneratorRuntime.wrap((function(s){while(1)switch(s.prev=s.next){case 0:return i.setLatLng(a.latlng),e.setView(i.getLatLng(),e.getZoom()),n=i.getLatLng(),o=n.lat,r=n.lng,t.lat=o,t.long=r,s.next=7,Y.a.get("https://api.opencagedata.com/geocode/v1/json?&key=0c63f52ded21aee72fecbb8563769237&q=".concat(o,"+").concat(r)).then((function(e){return t.address=e.data.results[0].formatted}));case 7:case"end":return s.stop()}}),s)})));return function(t){return s.apply(this,arguments)}}())},computed:Object(m["a"])({},Object(b["c"])("facility",["facility"])),components:{EditPopup:Ba},methods:{closePopup:function(){this.clicked=!1,this.setValues()},setValues:function(){this.long=parseFloat(this.facility.longitude),this.lat=parseFloat(this.facility.latitude),this.address=this.facility.address},saveLocation:function(){var t=this;return Object(y["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Y.a.post("https://almvtst.ml/crm/user/".concat(localStorage.getItem("id"),"/facility/").concat(t.facility.id,"/update-data"),{longitude:t.long,latitude:t.lat,address:t.address},{headers:{Authorization:"Bearer ".concat(localStorage.getItem("access_token"))}}).then((function(e){t.$store.dispatch("facility/setFacilityCoordinates",{address:e.data.facility.address,lng:e.data.facility.longitude,lat:e.data.facility.latitude})}));case 2:t.clicked=!1;case 3:case"end":return e.stop()}}),e)})))()}}},Ja=La,za=(i("869a"),Object(p["a"])(Ja,Ra,Ha,!1,null,"db3b0eb4",null)),Ua=za.exports,qa=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"facility__description",on:{click:function(e){t.clicked=!0}}},[i("div",{directives:[{name:"show",rawName:"v-show",value:t.clicked,expression:"clicked"}],staticClass:"backdrop",on:{click:function(e){return e.stopPropagation(),t.closePopup.apply(null,arguments)}}}),t._m(0),i("div",{staticClass:"value"},[t._v(t._s(t.facility.description))]),i("edit-popup",{directives:[{name:"show",rawName:"v-show",value:t.clicked,expression:"clicked"}],on:{close:t.closePopup},scopedSlots:t._u([{key:"title",fn:function(){return[i("p",{staticClass:"facility__title"},[t._v("Описание")])]},proxy:!0},{key:"content",fn:function(){return[i("div",{staticClass:"content"},[i("div",{staticClass:"content__inner"},[i("label",{attrs:{for:"facility_description"}},[t._v("Описание сооружения*")]),i("textarea",{directives:[{name:"model",rawName:"v-model",value:t.changedDescription,expression:"changedDescription"}],attrs:{id:"facility_description",name:"desctiption",placeholder:"Расскажите о соружении"},domProps:{value:t.changedDescription},on:{input:function(e){e.target.composing||(t.changedDescription=e.target.value)}}})])])]},proxy:!0},{key:"button",fn:function(){return[i("div",{staticClass:"save__btn"},[i("div",{staticClass:"btn",class:{active:t.changedDescription.trim().length},on:{click:function(e){return e.stopPropagation(),t.setDescription()}}},[t._v("Сохранить")])])]},proxy:!0}])})],1)},Za=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"flex"},[i("div",{staticClass:"flex__key"},[t._v("Описание")]),i("i",{staticClass:"fas fa-chevron-right"})])}],Ga=(i("a4d3"),i("e01a"),{data:function(){return{clicked:!1,changedDescription:""}},created:function(){this.setValues()},components:{EditPopup:Ba},computed:Object(m["a"])({},Object(b["c"])("facility",["facility"])),methods:{closePopup:function(){this.clicked=!1,this.setValues()},setDescription:function(){var t=this;return Object(y["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Y.a.post("https://almvtst.ml/crm/user/".concat(localStorage.getItem("id"),"/facility/").concat(t.facility.id,"/update-data"),{description:t.changedDescription},{headers:{Authorization:"Bearer ".concat(localStorage.getItem("access_token"))}}).then((function(e){return t.$store.dispatch("facility/setFacilityDescription",e.data.facility.description)}));case 2:t.clicked=!1;case 3:case"end":return e.stop()}}),e)})))()},setValues:function(){this.changedDescription=this.facility.description}}}),Ka=Ga,Qa=(i("5fe2"),Object(p["a"])(Ka,qa,Za,!1,null,"5a8fd230",null)),Xa=Qa.exports,tn=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"facility__infrastructure",on:{click:function(e){e.stopPropagation(),t.clicked=!0}}},[i("div",{directives:[{name:"show",rawName:"v-show",value:t.clicked,expression:"clicked"}],staticClass:"backdrop",on:{click:function(e){return e.stopPropagation(),t.closePopup.apply(null,arguments)}}}),t._m(0),i("div",{staticClass:"value"},t._l(t.selectedOptions,(function(e,s){return i("div",{key:s,staticClass:"infr__option"},[i("div",{staticClass:"option"},[t._v(t._s(t.getValue(e)))]),i("div",{staticClass:"circle"})])})),0),i("edit-popup",{directives:[{name:"show",rawName:"v-show",value:t.clicked,expression:"clicked"}],on:{close:t.closePopup},scopedSlots:t._u([{key:"title",fn:function(){return[i("p",{staticClass:"facility__title"},[t._v("Инфраструктура")])]},proxy:!0},{key:"content",fn:function(){return[i("div",{staticClass:"content"},[i("div",{staticClass:"content__inner"},[i("div",{staticClass:"shower common"},[i("input",{directives:[{name:"model",rawName:"v-model",value:t.selectedOptions,expression:"selectedOptions"}],attrs:{type:"checkbox",name:"shower",id:"shower",value:"shower"},domProps:{checked:Array.isArray(t.selectedOptions)?t._i(t.selectedOptions,"shower")>-1:t.selectedOptions},on:{change:function(e){var i=t.selectedOptions,s=e.target,a=!!s.checked;if(Array.isArray(i)){var n="shower",o=t._i(i,n);s.checked?o<0&&(t.selectedOptions=i.concat([n])):o>-1&&(t.selectedOptions=i.slice(0,o).concat(i.slice(o+1)))}else t.selectedOptions=a}}}),i("label",{attrs:{for:"shower"}},[t._v("Душ")])]),i("div",{staticClass:"cloakroom common"},[i("input",{directives:[{name:"model",rawName:"v-model",value:t.selectedOptions,expression:"selectedOptions"}],attrs:{type:"checkbox",name:"cloakroom",id:"cloakroom",value:"cloakroom"},domProps:{checked:Array.isArray(t.selectedOptions)?t._i(t.selectedOptions,"cloakroom")>-1:t.selectedOptions},on:{change:function(e){var i=t.selectedOptions,s=e.target,a=!!s.checked;if(Array.isArray(i)){var n="cloakroom",o=t._i(i,n);s.checked?o<0&&(t.selectedOptions=i.concat([n])):o>-1&&(t.selectedOptions=i.slice(0,o).concat(i.slice(o+1)))}else t.selectedOptions=a}}}),i("label",{attrs:{for:"cloakroom"}},[t._v("Раздевалка")])]),i("div",{staticClass:"parking common"},[i("input",{directives:[{name:"model",rawName:"v-model",value:t.selectedOptions,expression:"selectedOptions"}],attrs:{type:"checkbox",name:"parking",id:"parking",value:"parking"},domProps:{checked:Array.isArray(t.selectedOptions)?t._i(t.selectedOptions,"parking")>-1:t.selectedOptions},on:{change:function(e){var i=t.selectedOptions,s=e.target,a=!!s.checked;if(Array.isArray(i)){var n="parking",o=t._i(i,n);s.checked?o<0&&(t.selectedOptions=i.concat([n])):o>-1&&(t.selectedOptions=i.slice(0,o).concat(i.slice(o+1)))}else t.selectedOptions=a}}}),i("label",{attrs:{for:"parking"}},[t._v("Парковка")])]),i("div",{staticClass:"water common"},[i("input",{directives:[{name:"model",rawName:"v-model",value:t.selectedOptions,expression:"selectedOptions"}],attrs:{type:"checkbox",name:"water",id:"water",value:"water"},domProps:{checked:Array.isArray(t.selectedOptions)?t._i(t.selectedOptions,"water")>-1:t.selectedOptions},on:{change:function(e){var i=t.selectedOptions,s=e.target,a=!!s.checked;if(Array.isArray(i)){var n="water",o=t._i(i,n);s.checked?o<0&&(t.selectedOptions=i.concat([n])):o>-1&&(t.selectedOptions=i.slice(0,o).concat(i.slice(o+1)))}else t.selectedOptions=a}}}),i("label",{attrs:{for:"water"}},[t._v("Вода")])]),i("div",{staticClass:"ball common"},[i("input",{directives:[{name:"model",rawName:"v-model",value:t.selectedOptions,expression:"selectedOptions"}],attrs:{type:"checkbox",name:"balls",id:"balls",value:"balls"},domProps:{checked:Array.isArray(t.selectedOptions)?t._i(t.selectedOptions,"balls")>-1:t.selectedOptions},on:{change:function(e){var i=t.selectedOptions,s=e.target,a=!!s.checked;if(Array.isArray(i)){var n="balls",o=t._i(i,n);s.checked?o<0&&(t.selectedOptions=i.concat([n])):o>-1&&(t.selectedOptions=i.slice(0,o).concat(i.slice(o+1)))}else t.selectedOptions=a}}}),i("label",{attrs:{for:"balls"}},[t._v("Мячи")])]),i("div",{staticClass:"shirtfront common"},[i("input",{directives:[{name:"model",rawName:"v-model",value:t.selectedOptions,expression:"selectedOptions"}],attrs:{type:"checkbox",name:"shirtfronts",id:"shirtfronts",value:"shirtfronts"},domProps:{checked:Array.isArray(t.selectedOptions)?t._i(t.selectedOptions,"shirtfronts")>-1:t.selectedOptions},on:{change:function(e){var i=t.selectedOptions,s=e.target,a=!!s.checked;if(Array.isArray(i)){var n="shirtfronts",o=t._i(i,n);s.checked?o<0&&(t.selectedOptions=i.concat([n])):o>-1&&(t.selectedOptions=i.slice(0,o).concat(i.slice(o+1)))}else t.selectedOptions=a}}}),i("label",{attrs:{for:"shirtfronts"}},[t._v("Манишка")])]),i("div",{staticClass:"sauna common"},[i("input",{directives:[{name:"model",rawName:"v-model",value:t.selectedOptions,expression:"selectedOptions"}],attrs:{type:"checkbox",name:"sauna",id:"sauna",value:"sauna"},domProps:{checked:Array.isArray(t.selectedOptions)?t._i(t.selectedOptions,"sauna")>-1:t.selectedOptions},on:{change:function(e){var i=t.selectedOptions,s=e.target,a=!!s.checked;if(Array.isArray(i)){var n="sauna",o=t._i(i,n);s.checked?o<0&&(t.selectedOptions=i.concat([n])):o>-1&&(t.selectedOptions=i.slice(0,o).concat(i.slice(o+1)))}else t.selectedOptions=a}}}),i("label",{attrs:{for:"sauna"}},[t._v("Сауна")])]),i("div",{staticClass:"bar common"},[i("input",{directives:[{name:"model",rawName:"v-model",value:t.selectedOptions,expression:"selectedOptions"}],attrs:{type:"checkbox",name:"bar-cafe",id:"bar-cafe",value:"bar-cafe"},domProps:{checked:Array.isArray(t.selectedOptions)?t._i(t.selectedOptions,"bar-cafe")>-1:t.selectedOptions},on:{change:function(e){var i=t.selectedOptions,s=e.target,a=!!s.checked;if(Array.isArray(i)){var n="bar-cafe",o=t._i(i,n);s.checked?o<0&&(t.selectedOptions=i.concat([n])):o>-1&&(t.selectedOptions=i.slice(0,o).concat(i.slice(o+1)))}else t.selectedOptions=a}}}),i("label",{attrs:{for:"bar-cafe"}},[t._v("Бар/Кафе")])]),i("div",{staticClass:"pump common"},[i("input",{directives:[{name:"model",rawName:"v-model",value:t.selectedOptions,expression:"selectedOptions"}],attrs:{type:"checkbox",name:"pump",id:"pump",value:"pump"},domProps:{checked:Array.isArray(t.selectedOptions)?t._i(t.selectedOptions,"pump")>-1:t.selectedOptions},on:{change:function(e){var i=t.selectedOptions,s=e.target,a=!!s.checked;if(Array.isArray(i)){var n="pump",o=t._i(i,n);s.checked?o<0&&(t.selectedOptions=i.concat([n])):o>-1&&(t.selectedOptions=i.slice(0,o).concat(i.slice(o+1)))}else t.selectedOptions=a}}}),i("label",{attrs:{for:"pump"}},[t._v("Насос")])]),i("div",{staticClass:"tribune common"},[i("input",{directives:[{name:"model",rawName:"v-model",value:t.selectedOptions,expression:"selectedOptions"}],attrs:{type:"checkbox",name:"tribunes",id:"tribunes",value:"tribunes"},domProps:{checked:Array.isArray(t.selectedOptions)?t._i(t.selectedOptions,"tribunes")>-1:t.selectedOptions},on:{change:function(e){var i=t.selectedOptions,s=e.target,a=!!s.checked;if(Array.isArray(i)){var n="tribunes",o=t._i(i,n);s.checked?o<0&&(t.selectedOptions=i.concat([n])):o>-1&&(t.selectedOptions=i.slice(0,o).concat(i.slice(o+1)))}else t.selectedOptions=a}}}),i("label",{attrs:{for:"tribunes"}},[t._v("Трибуна")])]),i("div",{staticClass:"heating common"},[i("input",{directives:[{name:"model",rawName:"v-model",value:t.selectedOptions,expression:"selectedOptions"}],attrs:{type:"checkbox",name:"heating",id:"heating",value:"heating"},domProps:{checked:Array.isArray(t.selectedOptions)?t._i(t.selectedOptions,"heating")>-1:t.selectedOptions},on:{change:function(e){var i=t.selectedOptions,s=e.target,a=!!s.checked;if(Array.isArray(i)){var n="heating",o=t._i(i,n);s.checked?o<0&&(t.selectedOptions=i.concat([n])):o>-1&&(t.selectedOptions=i.slice(0,o).concat(i.slice(o+1)))}else t.selectedOptions=a}}}),i("label",{attrs:{for:"heating"}},[t._v("Отопление")])]),i("div",{staticClass:"conditioner common"},[i("input",{directives:[{name:"model",rawName:"v-model",value:t.selectedOptions,expression:"selectedOptions"}],attrs:{type:"checkbox",name:"conditioner",id:"conditioner",value:"conditioner"},domProps:{checked:Array.isArray(t.selectedOptions)?t._i(t.selectedOptions,"conditioner")>-1:t.selectedOptions},on:{change:function(e){var i=t.selectedOptions,s=e.target,a=!!s.checked;if(Array.isArray(i)){var n="conditioner",o=t._i(i,n);s.checked?o<0&&(t.selectedOptions=i.concat([n])):o>-1&&(t.selectedOptions=i.slice(0,o).concat(i.slice(o+1)))}else t.selectedOptions=a}}}),i("label",{attrs:{for:"conditioner"}},[t._v("Кондиционер")])]),i("div",{staticClass:"training-equipment common"},[i("input",{directives:[{name:"model",rawName:"v-model",value:t.selectedOptions,expression:"selectedOptions"}],attrs:{type:"checkbox",name:"training-equipment",id:"training-equipment",value:"training-equipment"},domProps:{checked:Array.isArray(t.selectedOptions)?t._i(t.selectedOptions,"training-equipment")>-1:t.selectedOptions},on:{change:function(e){var i=t.selectedOptions,s=e.target,a=!!s.checked;if(Array.isArray(i)){var n="training-equipment",o=t._i(i,n);s.checked?o<0&&(t.selectedOptions=i.concat([n])):o>-1&&(t.selectedOptions=i.slice(0,o).concat(i.slice(o+1)))}else t.selectedOptions=a}}}),i("label",{attrs:{for:"training-equipment"}},[t._v("Тренировочный инвентарь")])]),i("div",{staticClass:"toilet common"},[i("input",{directives:[{name:"model",rawName:"v-model",value:t.selectedOptions,expression:"selectedOptions"}],attrs:{type:"checkbox",name:"toilet",id:"toilet",value:"toilet"},domProps:{checked:Array.isArray(t.selectedOptions)?t._i(t.selectedOptions,"toilet")>-1:t.selectedOptions},on:{change:function(e){var i=t.selectedOptions,s=e.target,a=!!s.checked;if(Array.isArray(i)){var n="toilet",o=t._i(i,n);s.checked?o<0&&(t.selectedOptions=i.concat([n])):o>-1&&(t.selectedOptions=i.slice(0,o).concat(i.slice(o+1)))}else t.selectedOptions=a}}}),i("label",{attrs:{for:"toilet"}},[t._v("Туалет")])]),i("div",{staticClass:"lighting common"},[i("input",{directives:[{name:"model",rawName:"v-model",value:t.selectedOptions,expression:"selectedOptions"}],attrs:{type:"checkbox",name:"lighting",id:"lighting",value:"lighting"},domProps:{checked:Array.isArray(t.selectedOptions)?t._i(t.selectedOptions,"lighting")>-1:t.selectedOptions},on:{change:function(e){var i=t.selectedOptions,s=e.target,a=!!s.checked;if(Array.isArray(i)){var n="lighting",o=t._i(i,n);s.checked?o<0&&(t.selectedOptions=i.concat([n])):o>-1&&(t.selectedOptions=i.slice(0,o).concat(i.slice(o+1)))}else t.selectedOptions=a}}}),i("label",{attrs:{for:"lighting"}},[t._v("Освещение")])]),i("div",{staticClass:"sporting-goods common"},[i("input",{directives:[{name:"model",rawName:"v-model",value:t.selectedOptions,expression:"selectedOptions"}],attrs:{type:"checkbox",name:"sporting-goods",id:"sporting-goods",value:"sporting-goods"},domProps:{checked:Array.isArray(t.selectedOptions)?t._i(t.selectedOptions,"sporting-goods")>-1:t.selectedOptions},on:{change:function(e){var i=t.selectedOptions,s=e.target,a=!!s.checked;if(Array.isArray(i)){var n="sporting-goods",o=t._i(i,n);s.checked?o<0&&(t.selectedOptions=i.concat([n])):o>-1&&(t.selectedOptions=i.slice(0,o).concat(i.slice(o+1)))}else t.selectedOptions=a}}}),i("label",{attrs:{for:"sporting-goods"}},[t._v("Спорттовары")])])])])]},proxy:!0},{key:"button",fn:function(){return[i("div",{staticClass:"save__btn"},[i("div",{staticClass:"btn",class:{active:t.selectedOptions.length},on:{click:function(e){return e.stopPropagation(),t.setInfrastructure()}}},[t._v("Применить")])])]},proxy:!0}])})],1)},en=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"flex"},[i("div",{staticClass:"flex__key"},[t._v("Инфраструктура")]),i("i",{staticClass:"fas fa-chevron-right"})])}],sn={data:function(){return{clicked:!1,options:["shower","cloakroom","parking","water","balls","shirtfronts","sauna","bar-cafe","pump","tribunes","heating","conditioner","training-equipment","toilet","lighting","sporting-goods"],selectedOptions:[]}},computed:Object(m["a"])({},Object(b["c"])("facility",["facility"])),created:function(){this.setValues()},methods:{closePopup:function(){this.clicked=!1,this.setValues()},setInfrastructure:function(){var t=this;return Object(y["a"])(regeneratorRuntime.mark((function e(){var i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return i={},t.options.map((function(e){return Object(ye["a"])({},e,t.selectedOptions.includes(e))})).forEach((function(t){return i=Object(m["a"])(Object(m["a"])({},i),t)})),e.next=4,Y.a.post("https://almvtst.ml/crm/user/".concat(localStorage.getItem("id"),"/facility/").concat(t.facility.id,"/update-data"),{infrastructure:i},{headers:{Authorization:"Bearer ".concat(localStorage.getItem("access_token"))}}).then((function(e){return t.$store.dispatch("facility/setFacilityInfr",e.data.facility.infrastructure)}));case 4:t.clicked=!1;case 5:case"end":return e.stop()}}),e)})))()},setValues:function(){var t=this;this.selectedOptions=Object.keys(this.facility.infrastructure).filter((function(e){return t.facility.infrastructure[e]}))},getValue:function(t){switch(t){case"shower":return"Душ";case"cloakroom":return"Раздевалка";case"parking":return"Паркинг";case"water":return"Вода";case"balls":return"Мячи";case"shirtfronts":return"Манишки";case"sauna":return"Сауна";case"bar-cafe":return"Бар/кафе";case"pump":return"Насос";case"tribunes":return"Трибуны";case"heating":return"Отопление";case"conditioner":return"Кондиционер";case"training-equipment":return"Тренировочный инвентарь";case"toilet":return"Туалет";case"lighting":return"Освещение";case"sporting-goods":return"Спортивные товары"}}},components:{EditPopup:Ba}},an=sn,nn=(i("9d00"),Object(p["a"])(an,tn,en,!1,null,"a921ed0c",null)),on=nn.exports,rn=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"facility__payment",on:{click:function(e){t.clicked=!0}}},[i("div",{directives:[{name:"show",rawName:"v-show",value:t.clicked,expression:"clicked"}],staticClass:"backdrop",on:{click:function(e){return e.stopPropagation(),t.closePopup.apply(null,arguments)}}}),t._m(0),i("div",{staticClass:"value"},[t._v("Предоплата: "+t._s(t.prepaid__amount)+" ₸")]),i("edit-popup",{directives:[{name:"show",rawName:"v-show",value:t.clicked,expression:"clicked"}],on:{close:t.closePopup},scopedSlots:t._u([{key:"title",fn:function(){return[i("p",{staticClass:"facility__title"},[t._v("Условия предоплаты")])]},proxy:!0},{key:"content",fn:function(){return[i("div",{staticClass:"content"},[i("div",{staticClass:"content__inner"},[i("p",{staticClass:"payment__title"},[t._v("Сумма предоплаты*")]),i("input",{directives:[{name:"model",rawName:"v-model",value:t.prepaid__amount,expression:"prepaid__amount"}],attrs:{type:"text",name:"prepaid",id:"prepaid",placeholder:"0 ₸",inputmode:"tel"},domProps:{value:t.prepaid__amount},on:{keypress:function(e){return e.stopPropagation(),t.isNumber(e)},input:function(e){e.target.composing||(t.prepaid__amount=e.target.value)}}}),i("div",{staticClass:"dropdown__cancel"},[i("p",{staticClass:"cancel__title"},[t._v("Время отмены брони")]),i("div",{staticClass:"dropdown"},[i("select",{ref:"cancel_time"},[i("option",{attrs:{value:"0"}},[t._v("В любое время")]),i("option",{attrs:{value:"3600"}},[t._v("За 1 час")]),i("option",{attrs:{value:"7200"}},[t._v("За 2 часа")]),i("option",{attrs:{value:"14400"}},[t._v("За 4 часа")]),i("option",{attrs:{value:"21600"}},[t._v("За 6 часов")]),i("option",{attrs:{value:"28800"}},[t._v("За 8 часов")]),i("option",{attrs:{value:"36000"}},[t._v("За 10 часов")]),i("option",{attrs:{value:"43200"}},[t._v("За 12 часов")]),i("option",{attrs:{value:"86400"}},[t._v("За 24 часа")]),i("option",{attrs:{value:"172800"}},[t._v("За 48 часов")])])])])])])]},proxy:!0},{key:"button",fn:function(){return[i("div",{staticClass:"save__btn"},[i("div",{staticClass:"btn",class:{active:t.prepaid__amount.trim().length},on:{click:function(e){return e.stopPropagation(),e.preventDefault(),t.setPrepaidCondition()}}},[t._v("Применить")])])]},proxy:!0}])})],1)},cn=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"flex"},[i("div",{staticClass:"flex__key"},[t._v("Условия оплаты")]),i("i",{staticClass:"fas fa-chevron-right"})])}],ln={computed:Object(m["a"])({},Object(b["c"])("facility",["facility"])),components:{EditPopup:Ba},data:function(){return{clicked:!1,prepaid__amount:""}},mounted:function(){this.setValues()},methods:{closePopup:function(){this.clicked=!1,this.setValues()},setPrepaidCondition:function(){var t=this;return Object(y["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Y.a.post("https://almvtst.ml/crm/user/".concat(localStorage.getItem("id"),"/facility/").concat(t.facility.id,"/update-data"),{conditions:{prepaid:t.prepaid__amount,cancel_time:t.$refs["cancel_time"].value}},{headers:{Authorization:"Bearer ".concat(localStorage.getItem("access_token"))}}).then((function(e){return t.$store.dispatch("facility/setFacilityPaymentCondition",e.data.facility.conditions)}));case 2:t.clicked=!1;case 3:case"end":return e.stop()}}),e)})))()},isNumber:function(t){t=t||window.event;var e=t.which?t.which:t.keyCode;if(!(e>31&&(e<48||e>57)))return!0;t.preventDefault()},setValues:function(){var t;this.$refs["cancel_time"].value=this.facility.conditions.cancel_time||"0",this.prepaid__amount=(null===(t=this.facility.conditions)||void 0===t?void 0:t.prepaid)||"0"}}},dn=ln,un=(i("1326"),Object(p["a"])(dn,rn,cn,!1,null,"32473892",null)),pn=un.exports,fn=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"facility__contacts",on:{click:function(e){t.clicked=!0}}},[i("div",{directives:[{name:"show",rawName:"v-show",value:t.clicked,expression:"clicked"}],staticClass:"backdrop",on:{click:function(e){return e.stopPropagation(),t.closePopup.apply(null,arguments)}}}),t._m(0),i("div",{staticClass:"value"},[t._v(t._s(t.facility.contacts.phones["tel1"]?t.facility.contacts.phones["tel1"]:""))]),i("edit-popup",{directives:[{name:"show",rawName:"v-show",value:t.clicked,expression:"clicked"}],on:{close:t.closePopup},scopedSlots:t._u([{key:"title",fn:function(){return[i("p",{staticClass:"facility__title"},[t._v("Контакты")])]},proxy:!0},{key:"content",fn:function(){return[i("div",{staticClass:"content"},[i("div",{staticClass:"content__inner"},[i("div",{staticClass:"phone__numbers"},[i("p",{staticClass:"phone__number"},[t._v("Номер телефона*")]),i("div",{staticClass:"tel1"},[i("input",{directives:[{name:"mask",rawName:"v-mask",value:"+7 ### ### ## ##",expression:"'+7 ### ### ## ##'"},{name:"model",rawName:"v-model",value:t.tel1,expression:"tel1"}],attrs:{type:"tel",name:"main",id:"main",placeholder:"Введите номер телефона"},domProps:{value:t.tel1},on:{keypress:function(e){return e.stopPropagation(),t.isNumber(e)},keyup:function(e){return e.stopPropagation(),t.isValid(t.tel1)},input:function(e){e.target.composing||(t.tel1=e.target.value)}}}),i("p",{directives:[{name:"show",rawName:"v-show",value:!t.isValid(t.tel1),expression:"!isValid(tel1)"}],staticClass:"error__format"},[t._v("Неверный формат номера")])]),i("div",{staticClass:"tel2"},[i("input",{directives:[{name:"mask",rawName:"v-mask",value:"+7 ### ### ## ##",expression:"'+7 ### ### ## ##'"},{name:"show",rawName:"v-show",value:t.additional>=1,expression:"additional>=1"},{name:"model",rawName:"v-model",value:t.tel2,expression:"tel2"}],attrs:{type:"tel",name:"additional_1",id:"additional_1",placeholder:"Введите номер телефона"},domProps:{value:t.tel2},on:{keypress:function(e){return e.stopPropagation(),t.isNumber(e)},keyup:function(e){return e.stopPropagation(),t.isValid(t.tel2)},input:function(e){e.target.composing||(t.tel2=e.target.value)}}}),i("p",{directives:[{name:"show",rawName:"v-show",value:!t.isValid(t.tel2),expression:"!isValid(tel2)"}],staticClass:"error__format"},[t._v("Неверный формат номера")])]),i("div",{staticClass:"tel3"},[i("input",{directives:[{name:"mask",rawName:"v-mask",value:"+7 ### ### ## ##",expression:"'+7 ### ### ## ##'"},{name:"show",rawName:"v-show",value:t.additional>=2,expression:"additional>=2"},{name:"model",rawName:"v-model",value:t.tel3,expression:"tel3"}],attrs:{type:"tel",name:"additional_2",id:"additional_2",placeholder:"Введите номер телефона"},domProps:{value:t.tel3},on:{keypress:function(e){return e.stopPropagation(),t.isNumber(e)},keyup:function(e){return e.stopPropagation(),t.isValid(t.tel3)},input:function(e){e.target.composing||(t.tel3=e.target.value)}}}),i("p",{directives:[{name:"show",rawName:"v-show",value:!t.isValid(t.tel3),expression:"!isValid(tel3)"}],staticClass:"error__format"},[t._v("Неверный формат номера")])]),i("div",{staticClass:"add__phone"},[i("i",{staticClass:"fas fa-plus",class:{not_available:t.additional>=2},on:{click:function(e){t.additional+=1}}}),i("div",{staticClass:"add__btn",class:{not_available:t.additional>=2},on:{click:function(e){t.additional+=1}}},[t._v("Добавить еще один номер телефона")])])]),i("div",{staticClass:"whatsapp"},[i("label",{attrs:{for:"whatsapp"}},[t._v("Whatsapp")]),i("input",{directives:[{name:"mask",rawName:"v-mask",value:"+7 ### ### ## ##",expression:"'+7 ### ### ## ##'"},{name:"model",rawName:"v-model",value:t.whatsapp,expression:"whatsapp"}],attrs:{type:"tel",name:"whatsapp",id:"whatsapp",placeholder:"Введите номер привязанный к Whatsapp"},domProps:{value:t.whatsapp},on:{keypress:function(e){return e.stopPropagation(),t.isNumber(e)},keyup:function(e){return e.stopPropagation(),t.isValid(t.whatsapp)},input:function(e){e.target.composing||(t.whatsapp=e.target.value)}}}),i("p",{directives:[{name:"show",rawName:"v-show",value:!t.isValid(t.whatsapp),expression:"!isValid(whatsapp)"}],staticClass:"error__format"},[t._v("Неверный формат номера")])]),i("div",{staticClass:"instagram"},[i("label",{attrs:{for:"instagram"}},[t._v("Instagram")]),i("input",{directives:[{name:"model",rawName:"v-model",value:t.instagram,expression:"instagram"}],attrs:{type:"text",name:"instagram",id:"instagram",placeholder:"instagram.com/"},domProps:{value:t.instagram},on:{input:function(e){e.target.composing||(t.instagram=e.target.value)}}})]),i("div",{staticClass:"website"},[i("label",{attrs:{for:"website"}},[t._v("Веб-сайт")]),i("input",{directives:[{name:"model",rawName:"v-model",value:t.website,expression:"website"}],attrs:{type:"text",name:"website",id:"website",placeholder:"Введите адрес веб-сайта"},domProps:{value:t.website},on:{input:function(e){e.target.composing||(t.website=e.target.value)}}})])])])]},proxy:!0},{key:"button",fn:function(){return[i("div",{staticClass:"save__btn"},[i("div",{staticClass:"btn",class:{active:(t.tel1.length||t.tel2.length||t.tel3.length)&&t.valid},on:{click:function(e){return e.stopPropagation(),t.setPhone()}}},[t._v("Сохранить")])])]},proxy:!0}])})],1)},hn=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"flex"},[i("div",{staticClass:"flex__key"},[t._v("Контакты")]),i("i",{staticClass:"fas fa-chevron-right"})])}],mn={data:function(){return{clicked:!1,additional:0,phone_numbers:[],tel1:"",tel2:"",tel3:"",whatsapp:"",instagram:"",website:""}},created:function(){this.setValues()},methods:{setValues:function(){var t,e,i,s,a,n,o,r,c,l,d,u,p,f,h,m,v,_;this.tel1=null!==(t=null===(e=this.facility.contacts)||void 0===e||null===(i=e.phones)||void 0===i?void 0:i["tel1"])&&void 0!==t?t:"",this.tel2=null!==(s=null===(a=this.facility.contacts)||void 0===a||null===(n=a.phones)||void 0===n?void 0:n["tel2"])&&void 0!==s?s:"",this.tel3=null!==(o=null===(r=this.facility.contacts)||void 0===r||null===(c=r.phones)||void 0===c?void 0:c["tel3"])&&void 0!==o?o:"",this.whatsapp=null!==(l=null===(d=this.facility.contacts)||void 0===d||null===(u=d.socials)||void 0===u?void 0:u["whatsapp"])&&void 0!==l?l:"",this.instagram=null!==(p=null===(f=this.facility.contacts)||void 0===f||null===(h=f.socials)||void 0===h?void 0:h["instagram"])&&void 0!==p?p:"",this.website=null!==(m=null===(v=this.facility.contacts)||void 0===v||null===(_=v.socials)||void 0===_?void 0:_["website"])&&void 0!==m?m:""},closePopup:function(){this.clicked=!1,this.setValues()},setPhone:function(){var t=this;return Object(y["a"])(regeneratorRuntime.mark((function e(){var i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.phone_numbers=[t.tel1,t.tel2,t.tel3].map((function(t){return t.split(" ").join("")})).filter((function(t){return!t.includes("_")})),i={socials:{instagram:t.instagram,website:t.website,whatsapp:t.whatsapp}},t.phone_numbers.map((function(t,e){i["phones"]=Object(m["a"])(Object(m["a"])({},i["phones"]),{},Object(ye["a"])({},"tel".concat(e+1),t))})),e.next=5,Y.a.post("https://almvtst.ml/crm/user/".concat(localStorage.getItem("id"),"/facility/").concat(t.facility.id,"/update-data"),{contacts:i},{headers:{Authorization:"Bearer ".concat(localStorage.getItem("access_token"))}}).then((function(e){t.$store.dispatch("facility/setFacilityContacts",e.data.facility.contacts)})).catch((function(t){return console.log(t)}));case 5:t.clicked=!1;case 6:case"end":return e.stop()}}),e)})))()},isNumber:function(t){t=t||window.event;var e=t.which?t.which:t.keyCode;if(!(e>31&&(e<48||e>57)))return!0;t.preventDefault()},isValid:function(t){return t.split(" ").length&&!t.includes("_")}},components:{EditPopup:Ba},computed:Object(m["a"])(Object(m["a"])({},Object(b["c"])("facility",["facility"])),{},{valid:function(){return 0===[this.tel1,this.tel2,this.tel3,this.whatsapp].filter((function(t){return t.includes("_")})).length}})},vn=mn,_n=(i("f796"),Object(p["a"])(vn,fn,hn,!1,null,"77c4a101",null)),gn=_n.exports,yn=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"modal"},[i("div",{staticClass:"modal__inner"},[i("div",{staticClass:"modal__options"},[i("div",{staticClass:"option choose__photo",on:{click:t.changePhoto}},[t._v("Выбрать фото")]),i("div",{directives:[{name:"show",rawName:"v-show",value:t.needed,expression:"needed"}],staticClass:"option open__photo"},[t._v("Посмотреть фото")]),i("div",{directives:[{name:"show",rawName:"v-show",value:t.needed,expression:"needed"}],staticClass:"option delete__photo",on:{click:t.deletePhoto}},[t._v("Удалить фото")]),i("div",{staticClass:"cancel"},[t._v("Отменить")])])])])},bn=[],kn={props:["needed"],methods:{changePhoto:function(){this.$emit("changePhoto")},deletePhoto:function(){this.$emit("deletePhoto")}}},Cn=kn,On=(i("0b34"),Object(p["a"])(Cn,yn,bn,!1,null,"5a6c7c6a",null)),wn=On.exports,xn={data:function(){return{photo:"",photoAction:!1}},components:{MenuHeader:la,PlayfieldCard:Pa,BottomMenu:qt,FacilityName:Va,FacilityAddress:Ua,FacilityDescription:Xa,FacilityInfrastructure:on,FacilityPayment:pn,FacilityContact:gn,PhotoModal:wn},methods:{goToPlayfield:function(t){this.$router.push({name:"playfield",params:{id:this.facility.id,p_id:t}})},changePhoto:function(){this.$refs["facility__photo"].click()},setPhoto:function(){var t=this;return Object(y["a"])(regeneratorRuntime.mark((function e(){var i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.photoAction=!1,t.photo=t.$refs["facility__photo"].files[0],i=new FormData,i.append("file",t.photo),e.next=6,Y.a.post("https://almvtst.ml/crm/user/".concat(localStorage.getItem("id"),"/facility/").concat(t.facility.id,"/load-avatar"),i,{headers:{"Content-Type":"multipart/form-data",Authorization:"Bearer ".concat(localStorage.getItem("access_token"))}}).then((function(){t.$store.dispatch("facility/resetFacility")})).catch((function(){console.log("FAILURE!!")}));case 6:case"end":return e.stop()}}),e)})))()},deletePhoto:function(){var t=this;return Object(y["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:Y.a.post("https://almvtst.ml/crm/user/".concat(localStorage.getItem("id"),"/facility/").concat(t.facility.id,"/remove-avatar")).then((function(){return t.$store.dispatch("facility/resetFacility")})).catch((function(t){return console.log(t)})),t.photoAction=!1;case 2:case"end":return e.stop()}}),e)})))()}},computed:Object(m["a"])(Object(m["a"])({},Object(b["c"])("facility",["facility"])),{},{hasNotPhoto:function(){return"default_avatar.png"===this.facility.avatar}})},jn=xn,Pn=(i("5622"),Object(p["a"])(jn,ba,ka,!1,null,"34d0b280",null)),Sn=Pn.exports,Dn=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"playfield"},[i("div",{staticClass:"playfield__inner"},[i("menu-header",{attrs:{backButton:!0},on:{back:t.goBack},scopedSlots:t._u([{key:"title",fn:function(){return[i("p",{staticClass:"playfield__title"},[t._v(t._s(t.playfield.pf_name))])]},proxy:!0}])}),i("div",{staticClass:"content"},[i("div",{staticClass:"content__inner"},[i("PlayfieldName"),i("PlayfieldSpecifications"),i("PlayfieldWorkingHours")],1)])],1)])},In=[],$n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"playfield__name",on:{click:function(e){t.clicked=!0}}},[i("div",{directives:[{name:"show",rawName:"v-show",value:t.clicked,expression:"clicked"}],staticClass:"backdrop",on:{click:function(e){return e.stopPropagation(),t.closePopup.apply(null,arguments)}}}),t._m(0),i("div",{staticClass:"value"},[t._v(t._s(t.playfield.pf_name))]),i("edit-popup",{directives:[{name:"show",rawName:"v-show",value:t.clicked,expression:"clicked"}],on:{close:t.closePopup},scopedSlots:t._u([{key:"title",fn:function(){return[i("p",{staticClass:"facility__title"},[t._v("Название")])]},proxy:!0},{key:"content",fn:function(){return[i("div",{staticClass:"content"},[i("div",{staticClass:"content__inner"},[i("p",{staticClass:"name__required"},[t._v("Название площадки*")]),i("input",{directives:[{name:"model",rawName:"v-model",value:t.changedName,expression:"changedName"}],attrs:{type:"text",name:"name",id:"playfield_name",placeholder:"Например: Плошадка №1",maxlength:"25"},domProps:{value:t.changedName},on:{input:function(e){e.target.composing||(t.changedName=e.target.value)}}})])])]},proxy:!0},{key:"button",fn:function(){return[i("div",{staticClass:"save__btn"},[i("div",{staticClass:"btn",class:{active:t.changedName.trim().length},on:{click:function(e){return e.stopPropagation(),t.saveName()}}},[t._v("Сохранить")])])]},proxy:!0}])})],1)},Nn=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"flex"},[i("div",{staticClass:"flex__key"},[t._v("Название")]),i("i",{staticClass:"fas fa-chevron-right"})])}],An={data:function(){return{clicked:!1,changedName:""}},created:function(){this.setValues()},computed:Object(m["a"])({},Object(b["c"])("playfield",["playfield"])),components:{EditPopup:Ba},methods:{closePopup:function(){this.clicked=!1},saveName:function(){var t=this;return Object(y["a"])(regeneratorRuntime.mark((function e(){var i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t.changedName!==(null===(i=t.playfield)||void 0===i?void 0:i.pf_name)){e.next=3;break}return t.clicked=!1,e.abrupt("return");case 3:return e.next=5,Y.a.post("https://almvtst.ml/crm/user/".concat(localStorage.getItem("id"),"/playfield/").concat(t.playfield.id,"/update-data"),{pf_name:t.changedName},{headers:{Authorization:"Bearer ".concat(localStorage.getItem("access_token"))}}).then((function(){return t.$store.dispatch("playfield/setPlayfieldName",t.changedName)}));case 5:t.clicked=!1;case 6:case"end":return e.stop()}}),e)})))()},setValues:function(){this.changedName=this.playfield.pf_name}}},Mn=An,Bn=(i("b5cb"),Object(p["a"])(Mn,$n,Nn,!1,null,"ac979354",null)),Fn=Bn.exports,En=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"playfield__specifications",on:{click:function(e){t.clicked=!0}}},[i("div",{directives:[{name:"show",rawName:"v-show",value:t.clicked,expression:"clicked"}],staticClass:"backdrop",on:{click:function(e){return e.stopPropagation(),t.closePopup.apply(null,arguments)}}}),t._m(0),i("div",{staticClass:"value"},[t._v(t._s(t.getIndoor)+t._s(t.getSurface)),i("br"),t._v(t._s(t.getFormat)+t._s(t.getLengthWidth))]),i("div",{staticClass:"specifications__inner"}),i("edit-popup",{directives:[{name:"show",rawName:"v-show",value:t.clicked,expression:"clicked"}],on:{close:t.closePopup},scopedSlots:t._u([{key:"title",fn:function(){return[i("p",{staticClass:"facility__title"},[t._v("Характеристики")])]},proxy:!0},{key:"content",fn:function(){return[i("div",{staticClass:"content"},[i("div",{staticClass:"content__inner"},[i("div",{staticClass:"indoor__type"},[i("div",{staticClass:"indoor__open",class:{activeIndoor:!t.chosenIndoor},on:{click:function(e){return t.setIndoor(0)}}},[i("i",{staticClass:"fas fa-cloud-sun"}),i("p",{staticClass:"open"},[t._v("Открытый")])]),i("div",{staticClass:"indoor__close",class:{activeIndoor:t.chosenIndoor},on:{click:function(e){return t.setIndoor(1)}}},[i("i",{staticClass:"fas fa-cloud-sun"}),i("p",{staticClass:"close"},[t._v("Закрытый")])])]),i("div",{staticClass:"surface__type"},[i("label",{attrs:{for:"surface"}},[t._v("Покрытие*")]),i("select",{directives:[{name:"model",rawName:"v-model",value:t.surf_type,expression:"surf_type"}],attrs:{name:"surface",id:"surface"},on:{change:function(e){var i=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.surf_type=e.target.multiple?i:i[0]}}},[i("option",{attrs:{value:""}},[t._v("Выберите")]),i("option",{attrs:{value:"0"}},[t._v("Трава")]),i("option",{attrs:{value:"1"}},[t._v("Искусственная трава")]),i("option",{attrs:{value:"2"}},[t._v("Паркет")]),i("option",{attrs:{value:"3"}},[t._v("Грунт")]),i("option",{attrs:{value:"4"}},[t._v("Песок")]),i("option",{attrs:{value:"5"}},[t._v("Бетон")]),i("option",{attrs:{value:"6"}},[t._v("Резина")])])]),i("div",{staticClass:"format__type"},[i("label",{attrs:{for:"format"}},[t._v("Оптимальный формат*")]),i("select",{directives:[{name:"model",rawName:"v-model",value:t.format,expression:"format"}],attrs:{name:"format",id:"format"},on:{change:function(e){var i=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.format=e.target.multiple?i:i[0]}}},[i("option",{attrs:{value:""}},[t._v("Выберите")]),i("option",{attrs:{value:"4"}},[t._v("4vs4")]),i("option",{attrs:{value:"5"}},[t._v("5vs5")]),i("option",{attrs:{value:"6"}},[t._v("6vs6")]),i("option",{attrs:{value:"7"}},[t._v("7vs7")]),i("option",{attrs:{value:"8"}},[t._v("8vs8")]),i("option",{attrs:{value:"9"}},[t._v("9vs9")]),i("option",{attrs:{value:"10"}},[t._v("10vs10")]),i("option",{attrs:{value:"11"}},[t._v("11vs11")])])]),i("div",{staticClass:"playfield__size"},[i("div",{staticClass:"playfield__width"},[i("label",{attrs:{for:"width"}},[t._v("Ширина площадки")]),i("input",{directives:[{name:"model",rawName:"v-model",value:t.width,expression:"width"}],attrs:{type:"text",name:"width",id:"width",placeholder:"Введите ширину",inputmode:"tel"},domProps:{value:t.width},on:{input:function(e){e.target.composing||(t.width=e.target.value)}}})]),i("div",{staticClass:"playfield__length"},[i("label",{attrs:{for:"length"}},[t._v("Длина плошадки")]),i("input",{directives:[{name:"model",rawName:"v-model",value:t.length,expression:"length"}],attrs:{type:"text",name:"length",id:"length",placeholder:"Введите длину",inputmode:"tel"},domProps:{value:t.length},on:{input:function(e){e.target.composing||(t.length=e.target.value)}}})])])])])]},proxy:!0},{key:"button",fn:function(){return[i("div",{staticClass:"save__btn"},[i("div",{staticClass:"btn",class:{active:t.isAllFilled},on:{click:function(e){return e.stopPropagation(),e.preventDefault(),t.saveSpecifications()}}},[t._v("Сохранить")])])]},proxy:!0}])})],1)},Tn=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"flex"},[i("div",{staticClass:"flex__key"},[t._v("Характеристики")]),i("i",{staticClass:"fas fa-chevron-right"})])}],Vn={data:function(){return{clicked:!1,chosenIndoor:0,width:"",length:"",format:"",surf_type:""}},mounted:function(){this.setValues()},computed:Object(m["a"])(Object(m["a"])({},Object(b["c"])("playfield",["playfield"])),Object(b["b"])("playfield",["getSurface","getIndoor","getLengthWidth","getFormat"])),components:{EditPopup:Ba},methods:{isAllFilled:function(){return this.format&&this.surf_type&&this.width&&this.length},closePopup:function(){this.clicked=!1,this.setValues()},saveSpecifications:function(){var t=this;return Object(y["a"])(regeneratorRuntime.mark((function e(){var i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return i={surf_type:parseInt(t.surf_type),indoor:!!t.chosenIndoor,length:t.length,width:t.width,format:parseInt(t.format)},e.next=3,Y.a.post("https://almvtst.ml/crm/user/".concat(localStorage.getItem("id"),"/playfield/").concat(t.playfield.id,"/update-data"),i,{headers:{Authorization:"Bearer ".concat(localStorage.getItem("access_token"))}}).then((function(){return t.$store.dispatch("playfield/setSpecifications",i)}));case 3:t.clicked=!1;case 4:case"end":return e.stop()}}),e)})))()},setValues:function(){this.changedName=this.playfield.pf_name,this.format=this.playfield.format,this.chosenIndoor=this.playfield.indoor,this.surf_type=this.playfield.surf_type,this.width=this.playfield.width,this.length=this.playfield.length},setIndoor:function(t){this.chosenIndoor=t}}},Rn=Vn,Hn=(i("976d"),Object(p["a"])(Rn,En,Tn,!1,null,"408887c8",null)),Yn=Hn.exports,Wn=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"playfield__workingHours",on:{click:function(e){return e.stopPropagation(),t.goToWorkingHours()}}},[t._m(0),i("div",{staticClass:"value"},t._l(t.keys,(function(e,s){return i("div",{key:s,staticClass:"flex"},[i("div",{staticClass:"days",staticStyle:{display:"flex"}},t._l(t.wh[e],(function(e,s){return i("p",{key:s},[t._v(t._s(t.getDay(e)))])})),0),i("p",[t._v(t._s(e||t.Выходной))])])})),0)])},Ln=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"flex"},[i("div",{staticClass:"flex__key"},[t._v("Режим работы")]),i("i",{staticClass:"fas fa-chevron-right"})])}],Jn=(i("ddb0"),{data:function(){return{wh:[],keys:[]}},mounted:function(){this.getWorkingHours()},methods:{goToWorkingHours:function(){this.$router.push({name:"playfieldSettings"})},getWorkingHours:function(){var t=this;Object.keys(JSON.parse(this.playfield.periods_data)).map((function(e){var i=JSON.parse(t.playfield.periods_data)[e].start_time,s=JSON.parse(t.playfield.periods_data)[e].end_time,a=i&&s?"".concat(i,"-").concat(s):"Выходной";t.keys.includes(a)?t.wh[a].push(e):(t.wh[a]=[e],t.keys.push(a))}))},getDay:function(t){return R()().day(parseInt(t)).locale("ru").format("dd")+","}},computed:Object(m["a"])({},Object(b["c"])("playfield",["playfield"]))}),zn=Jn,Un=(i("513e"),Object(p["a"])(zn,Wn,Ln,!1,null,"dcf9085a",null)),qn=Un.exports,Zn={components:{MenuHeader:la,PlayfieldName:Fn,PlayfieldSpecifications:Yn,PlayfieldWorkingHours:qn},computed:Object(m["a"])(Object(m["a"])(Object(m["a"])({},Object(b["c"])("playfield",["playfield"])),Object(b["c"])("facility",["facility"])),Object(b["b"])("playfield",["getSurface","getIndoor","getLengthWidth","getFormat"])),methods:{goBack:function(){this.$router.push({name:"myFacility",params:{id:this.facility.id}})}}},Gn=Zn,Kn=(i("f929"),Object(p["a"])(Gn,Dn,In,!1,null,"7bf36068",null)),Qn=Kn.exports,Xn="setDate",to="addBooking",eo="setPayType",io="setClient",so="setType",ao="setStatus",no="replaceBooking",oo="setOrder",ro="addDeposit",co="setBookingDiscount",lo="addBookingDiscount",uo="setBookingDate",po="setBookingTime",fo="setBookingField",ho="setBookingPaid",mo="setBookingPrice",vo="setDuration",_o="setBooking",go="setFacilityId",yo="setFacilityName",bo="setFacilityCountry",ko="setFacilityCoordinates",Co="setFacilityDescription",Oo="setFacilityAvatar",wo="setFacilityNumber",xo="setFacilityPlayfields",jo="addFacilityPlayfield",Po="setFacilityAdmin",So="setFacilityInfr",Do="setPaymentCondition",Io="setFacility",$o="setFacilityContacts",No="setPlayfieldName",Ao="setSpecifications",Mo="setPlayfield",Bo=function(){return{booking:{id:null,order_id:null,discount:0,date:"",end_time:"",playfield_id:"",paid:0,price:0,start_time:"",duration:0,status:"pending",debt:null}}},Fo={namespaced:!0,state:Object(m["a"])({},Bo()),mutations:(s={},Object(ye["a"])(s,lo,(function(t,e){t.booking.discount+=e})),Object(ye["a"])(s,co,(function(t,e){t.booking.discount=e})),Object(ye["a"])(s,uo,(function(t,e){t.booking.date=e})),Object(ye["a"])(s,po,(function(t,e){t.booking.start_time=e.start_time,t.booking.end_time=e.end_time})),Object(ye["a"])(s,fo,(function(t,e){t.booking.playfield_id=e})),Object(ye["a"])(s,ho,(function(t,e){t.booking.paid+=e})),Object(ye["a"])(s,mo,(function(t,e){t.booking.price=e})),Object(ye["a"])(s,vo,(function(t,e){t.booking.duration=e})),Object(ye["a"])(s,_o,(function(t,e){t.booking=Object(m["a"])({},e)})),Object(ye["a"])(s,ao,(function(t,e){t.booking.status=e})),Object(ye["a"])(s,"resetState",(function(t){Object.assign(t,Bo())})),s),getters:{getRemainMoney:function(t){return t.booking.price-t.booking.discount-t.booking.paid},getBooking:function(t){return Object(m["a"])({},t.booking)},getDuration:function(t){var e=Math.floor(t.booking.duration/60),i=t.booking.duration%60;return"".concat(e," ч ").concat(i," мин")},durationFormat:function(t){var e=Math.floor(t.booking.duration/60),i=t.booking.duration%60;return R()().hour(e).minute(i).second(0).format("HH:mm:ss")},getStatus:function(t){switch(t.status){case"completed":return"Завершена";case"canceled":return"Отменена";case"pending":return"В ожидании";case"activated":return"Потверждена"}},getPlayfieldName:function(t){var e,i;return null!==(e=null===(i=JSON.parse(localStorage.getItem("facility")).find((function(e){return e.id===t.booking.playfield_id})))||void 0===i?void 0:i.pf_name)&&void 0!==e?e:""}},actions:{setBookingTime:function(t,e){var i=t.commit;i(po,e)},setBookingField:function(t,e){var i=t.commit;i(fo,e)},setBookingDate:function(t,e){var i=t.commit;i(uo,e)},setBookingPrice:function(t,e){var i=t.commit;i(mo,e)},setBookingDiscount:function(t,e){var i=t.commit;i(co,e)},addBookingDiscount:function(t,e){var i=t.commit;i(lo,e)},setDuration:function(t,e){var i=t.commit;i(vo,e)},setBookingPaid:function(t,e){var i=t.commit;i(ho,e)},setBooking:function(t,e){var i=t.commit;i(_o,e)},setStatus:function(t,e){var i=t.commit;i(ao,e)},resetState:function(t){var e=t.commit;e("resetState")}}},Eo=Fo,To=function(){return{order:{bookings:[],client:{id:null,firstname:"",lastname:"",phone:"",is_temporary:null,avatar:""},company:"",payment_type:"cash",start_date:"",end_date:"",type:0,status:"pending",deposit:0,total_discount:0,total_price:0,paid:0,debt:0,residue:0}}},Vo={namespaced:!0,state:function(){return To()},getters:{getAllDiscount:function(t){return t.order.bookings.filter((function(t){return"canceled"!==t.status})).reduce((function(t,e){return t+e.discount}),0)},getAllCost:function(t){return t.order.bookings.filter((function(t){return"canceled"!==t.status})).reduce((function(t,e){return t+e.price}),0)},getAllPaid:function(t){return t.order.bookings.filter((function(t){return"canceled"!==t.status})).reduce((function(t,e){return t+e.paid}),0)},getRemainMoney:function(t,e){return e.getAllCost-e.getAllDiscount-e.getAllPaid},getStatus:function(t){switch(t.status){case"completed":return"Завершен";case"canceled":return"Отменен";case"pending":return"В ожидании";case"activated":return"Потвержден"}}},mutations:(a={},Object(ye["a"])(a,Xn,(function(t,e){t.order=Object(m["a"])(Object(m["a"])({},t.order),{},{start_date:V(e.start_date),end_date:V(e.end_date)})})),Object(ye["a"])(a,to,(function(t,e){t.order=Object(m["a"])(Object(m["a"])({},t.order),{},{bookings:[].concat(Object(cs["a"])(t.order.bookings),[e])})})),Object(ye["a"])(a,eo,(function(t,e){t.order=Object(m["a"])(Object(m["a"])({},t.order),{},{payment_type:e})})),Object(ye["a"])(a,io,(function(t,e){t.order=Object(m["a"])(Object(m["a"])({},t.order),{},{client:Object(m["a"])({},e)})})),Object(ye["a"])(a,ro,(function(t,e){t.order=Object(m["a"])(Object(m["a"])({},t.order),{},{deposit:e})})),Object(ye["a"])(a,so,(function(t,e){t.order=Object(m["a"])(Object(m["a"])({},t.order),{},{type:e})})),Object(ye["a"])(a,ao,(function(t,e){t.order=Object(m["a"])(Object(m["a"])({},t.order),{},{status:e})})),Object(ye["a"])(a,oo,(function(t,e){t.order=Object(m["a"])({},e)})),Object(ye["a"])(a,no,(function(t,e){t.order=Object(m["a"])(Object(m["a"])({},t.order),{},{bookings:e})})),Object(ye["a"])(a,co,(function(t,e){var i=t.order.bookings.map((function(t){return Object(m["a"])(Object(m["a"])({},t),{},{discount:e})}));t.order=Object(m["a"])(Object(m["a"])({},t.order),{},{bookings:i})})),Object(ye["a"])(a,"resetState",(function(t){Object.assign(t,To())})),a),actions:{resetState:function(t){var e=t.commit;e("resetState")},setType:function(t,e){var i=t.commit;i(so,e)},setDate:function(t,e){var i=t.commit;i(Xn,e)},addBooking:function(t,e){var i=t.commit;i(to,e)},setClient:function(t,e){var i=t.commit;i(io,e)},setPayType:function(t,e){var i=t.commit;i(eo,e)},setStatus:function(t,e){var i=t.commit;i(ao,e)},setBookingDiscount:function(t,e){var i=t.commit;i(co,e)},addDeposit:function(t,e){var i=t.commit;i(ro,e)},setOrder:function(t,e){var i=t.commit;i(oo,e)},replaceBooking:function(t,e){var i=t.commit;i(no,e)}}},Ro=Vo,Ho=function(){return{facility:{id:null,fc_name:"",country:null,city:null,address:"",latitude:null,longitude:null,description:"",avatar:"",pf_num:null,playfields:null,crm_user_id:null,infrstruct:null,payment_condition:{prepayment:null,cancel_time:null},contacts:null}}},Yo={namespaced:!0,state:function(){return Ho()},mutations:(n={},Object(ye["a"])(n,go,(function(t,e){t.facility.id=e})),Object(ye["a"])(n,yo,(function(t,e){t.facility.fc_name=e})),Object(ye["a"])(n,bo,(function(t,e){t.facility.country=e})),Object(ye["a"])(n,ko,(function(t,e){t.facility.address=e.address,t.facility.latitude=e.lat,t.facility.longitude=e.lng})),Object(ye["a"])(n,Co,(function(t,e){t.facility.description=e})),Object(ye["a"])(n,Oo,(function(t,e){t.facility.avatar=e})),Object(ye["a"])(n,wo,(function(t,e){t.facility.pf_num=e})),Object(ye["a"])(n,xo,(function(t,e){t.facility.playfields=e})),Object(ye["a"])(n,jo,(function(t,e){t.facility.playfields.push(e)})),Object(ye["a"])(n,Po,(function(t,e){t.facility.crm_user_id=e})),Object(ye["a"])(n,So,(function(t,e){t.facility.infrastruct=e})),Object(ye["a"])(n,Do,(function(t,e){t.facility.payment_condition=e})),Object(ye["a"])(n,Io,(function(t,e){t.facility=e})),Object(ye["a"])(n,$o,(function(t,e){t.contacts=e})),Object(ye["a"])(n,"resetState",(function(t){Object.assign(t,Ho())})),n),actions:{resetState:function(t){var e=t.commit;e("resetState")},setFacilityId:function(t,e){var i=t.commit;i(go,e)},setFacilityName:function(t,e){var i=t.commit;i(yo,e)},setFacilityCountry:function(t,e){var i=t.commit;i(bo,e)},setFacilityCoordinates:function(t,e){var i=t.commit;i(ko,e)},setFacilityDescription:function(t,e){var i=t.commit;i(Co,e)},setFacilityAvatar:function(t,e){var i=t.commit;i(Oo,e)},setFacilityNumber:function(t,e){var i=t.commit;i(wo,e)},setFacilityPlayfields:function(t,e){var i=t.commit;i(xo,e)},addFacilityPlayfield:function(t,e){var i=t.commit;i(jo,e)},setFacilityAdmin:function(t,e){var i=t.commit;i(Po,e)},setFacilityInfr:function(t,e){var i=t.commit;i(So,e)},setFacilityContacts:function(t,e){var i=t.commit;i($o,e)},setFacilityPaymentCondition:function(t,e){var i=t.commit;i(Do,e)},setFacility:function(t,e){var i=t.commit,s=t.dispatch;i(Io,e),s("setPlayfields")},setPlayfields:function(t){return Object(y["a"])(regeneratorRuntime.mark((function e(){var i,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return i=t.commit,s=t.state,e.next=3,Y.a.get("https://almvtst.ml/crm/user/".concat(localStorage.getItem("id"),"/facility/").concat(s.facility.id,"/playfields"),{headers:{Authorization:"Bearer ".concat(localStorage.getItem("access_token"))}}).then((function(t){i(xo,t.data.playfields),localStorage.setItem("facility",JSON.stringify(t.data.playfields))})).catch((function(t){return console.log(t)}));case 3:case"end":return e.stop()}}),e)})))()},resetFacility:function(t){return Object(y["a"])(regeneratorRuntime.mark((function e(){var i,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return i=t.commit,s=t.state,e.next=3,Y.a.get("https://almvtst.ml/crm/facility/".concat(s.facility.id),{headers:{Authorization:"Bearer ".concat(localStorage.getItem("access_token"))}}).then((function(t){return i(Io,t.data.facility)})).catch((function(t){return console.log(t)}));case 3:case"end":return e.stop()}}),e)})))()}}},Wo=Yo,Lo=function(){return{playfield:{}}},Jo={namespaced:!0,state:function(){return Lo()},getters:{getSurface:function(t){var e="";switch(t.playfield.surf_type){case 0:e="Трава.";break;case 1:e="Искусственная трава.";break;case 2:e="Паркет.";break;case 3:e="Грунт.";break;case 4:e="Песок.";break;case 5:e="Бетон.";break;case 6:e="Резина.";break;default:e="Не указан."}return e},getIndoor:function(t){return t.playfield.indoor?"Крытая.":"Открытая."},getFormat:function(t){return t.playfield.format?"".concat(t.playfield.format,"x").concat(t.playfield.format,"."):"Не указан."},getLengthWidth:function(t){return"".concat(t.playfield.length,"м x ").concat(t.playfield.width,"м.")}},mutations:(o={},Object(ye["a"])(o,No,(function(t,e){t.playfield.pf_name=e})),Object(ye["a"])(o,Ao,(function(t,e){t.playfield.indoor=e.indoor,t.playfield.surf_type=e.surf_type,t.playfield.format=e.format,t.playfield.length=e.length,t.playfield.width=e.width})),Object(ye["a"])(o,Mo,(function(t,e){t.playfield=Object(m["a"])(Object(m["a"])({},t.playfield),e)})),o),actions:{setPlayfield:function(t,e){var i=t.commit;i(Mo,e)},setPlayfieldName:function(t,e){var i=t.commit;i(No,e)},setSpecifications:function(t,e){var i=t.commit;i(Ao,e)}}},zo=Jo,Uo=i("8468"),qo={namespaced:!0,state:{user:{id:null,access_token:""}},actions:{loginUser:function(t,e){var i=this;return Object(y["a"])(regeneratorRuntime.mark((function s(){return regeneratorRuntime.wrap((function(s){while(1)switch(s.prev=s.next){case 0:return Object(Uo["a"])(t),s.next=3,Y.a.post("https://almvtst.ml/crm/user/login",{username:e.tel,password:e.password}).then((function(t){200===t.status&&(localStorage.setItem("access_token",t.data.token.access_token),localStorage.setItem("id",t.data.user.id),i.$router.push({name:"myFacilities"}))})).catch((function(){return!1}));case 3:return s.abrupt("return",s.sent);case 4:case"end":return s.stop()}}),s)})))()}},getters:{isAuthenticated:function(){return!!localStorage.getItem("access_token")}}},Zo=qo;r["a"].use(b["a"]);var Go=new b["a"].Store({modules:{order:Ro,booking:Eo,facility:Wo,playfield:zo,admin:Zo}}),Ko=Go,Qo=function(t,e,i){Ko.getters["admin/isAuthenticated"]?i("/myFacilities"):i()},Xo=function(t,e,i){Ko.getters["admin/isAuthenticated"]?i():i("/auth")},tr=new v["a"]({routes:[{name:"registerUser",path:"/register",component:z,props:function(t){return Object(m["a"])({},t.params)},beforeEnter:Xo},{path:"/order",name:"order",component:ve,props:function(t){return Object(m["a"])({},t.params)},beforeEnter:Xo},{path:"/day/:id",name:"day",component:De,beforeEnter:Xo},{path:"/confirmation",name:"confirmation",component:Xe,props:function(t){return Object(m["a"])({},t.params)},beforeEnter:Xo},{path:"/allTime",name:"main",component:Qt,beforeEnter:Xo},{path:"/orders",name:"orders",component:_i,beforeEnter:Xo},{path:"/order/:id",name:"singleOrder",component:Oi,props:function(t){return Object(m["a"])({},t.params)},beforeEnter:Xo},{path:"/order/:id/booking/:bookingid",name:"singleBooking",component:Bi,beforeEnter:Xo},{path:"/order/:id/booking/:bookingid/edit",name:"edit",component:Xi,beforeEnter:Xo},{path:"/",redirect:{name:"day",params:{id:V().format("DD-MM-YYYY")}}},{path:"/auth",name:"authorization",component:ea,beforeEnter:Qo},{path:"/myFacilities",name:"myFacilities",component:ya,beforeEnter:Xo},{path:"/myFacilities/:id",name:"myFacility",component:Sn,beforeEnter:Xo},{path:"/myFacilites/:id/playfields/:p_id",name:"playfield",component:Qn,beforeEnter:Xo},{path:"/longTermOrder",name:"longTermOrder",component:Es,beforeEnter:Xo},{path:"/availableBookings",name:"availableBookings",component:Zs,beforeEnter:Xo},{path:"/clients",name:"clients",component:ns,beforeEnter:Xo},{path:"/myFacilites/:id/playfields/:p_id/settings",name:"playfieldSettings",component:Is,beforeEnter:Xo}]}),er=tr,ir=i("1dce"),sr=i.n(ir),ar=i("2b27"),nr=i.n(ar),or=i("9612"),rr=i("7699"),cr=i.n(rr);r["a"].config.productionTip=!1,r["a"].use(v["a"]),r["a"].use(sr.a),r["a"].use(or["a"]),r["a"].use(nr.a),r["a"].use(cr.a.default),new r["a"]({render:function(t){return t(h)},router:er,store:Ko}).$mount("#app")},"56e3":function(t,e,i){},"5ec6":function(t,e,i){},"5fe2":function(t,e,i){"use strict";i("24ab")},6336:function(t,e,i){"use strict";i("8417")},"63ae":function(t,e,i){"use strict";i("d932")},"63af":function(t,e,i){},"68f0":function(t,e,i){},6934:function(t,e,i){"use strict";i("4a00")},"6c18":function(t,e,i){"use strict";i("41c9")},"6fb9":function(t,e,i){},"705e":function(t,e,i){"use strict";i("ba97")},7182:function(t,e,i){"use strict";i("54fe")},7781:function(t,e,i){"use strict";i("68f0")},"78df":function(t,e,i){"use strict";i("164f")},"80d6":function(t,e,i){"use strict";i("2841")},"80e6":function(t,e,i){},"83e5":function(t,e,i){"use strict";i("5ec6")},8417:function(t,e,i){},8589:function(t,e,i){"use strict";i("dd38")},"85ec":function(t,e,i){},"869a":function(t,e,i){"use strict";i("8fdd")},"8a56":function(t,e,i){},"8c6f":function(t,e,i){},"8d6c":function(t,e,i){},"8fdd":function(t,e,i){},"908a":function(t,e,i){},9179:function(t,e,i){"use strict";i("4268")},"927f":function(t,e,i){"use strict";i("53c1")},"949a":function(t,e,i){"use strict";i("3a33")},"976d":function(t,e,i){"use strict";i("b509")},"97fd":function(t,e,i){},"98c9":function(t,e,i){"use strict";i("1ecf")},"9b4d":function(t,e,i){"use strict";i("56e3")},"9b86":function(t,e,i){},"9d00":function(t,e,i){"use strict";i("63af")},"9fee":function(t,e,i){"use strict";i("c451")},a06a:function(t,e,i){"use strict";i("9b86")},a1e6:function(t,e,i){},a347:function(t,e,i){},a381:function(t,e,i){"use strict";i("0eb5")},a9fa:function(t,e,i){"use strict";i("afb5")},ad1b:function(t,e,i){"use strict";i("6fb9")},afb5:function(t,e,i){},b1f7:function(t,e,i){"use strict";i("a347")},b4b0:function(t,e,i){"use strict";i("ca60")},b509:function(t,e,i){},b5cb:function(t,e,i){"use strict";i("b65f")},b65f:function(t,e,i){},b87d:function(t,e,i){"use strict";i("bdf4")},b8b2:function(t,e,i){"use strict";i("ce4d")},b91a:function(t,e,i){},b988:function(t,e,i){"use strict";i("b91a")},ba11:function(t,e,i){},ba97:function(t,e,i){},bdf4:function(t,e,i){},c09b:function(t,e,i){"use strict";i("53a4")},c451:function(t,e,i){},ca60:function(t,e,i){},cca7:function(t,e,i){},ce4d:function(t,e,i){},ce84:function(t,e,i){"use strict";i("a1e6")},d380:function(t,e,i){},d932:function(t,e,i){},da6b:function(t,e,i){},dbc9:function(t,e,i){"use strict";i("32a2")},dc79:function(t,e,i){"use strict";i("8d6c")},dd38:function(t,e,i){},e2fe:function(t,e,i){"use strict";i("cca7")},e5dd:function(t,e,i){},e5e7:function(t,e,i){},e761:function(t,e,i){"use strict";i("558f")},e781:function(t,e,i){"use strict";i("80e6")},e8a0:function(t,e,i){"use strict";i("ba11")},f241:function(t,e,i){},f4a1:function(t,e,i){"use strict";i("e5e7")},f796:function(t,e,i){"use strict";i("da6b")},f929:function(t,e,i){"use strict";i("8a56")}});
//# sourceMappingURL=app.f93e2191.js.map