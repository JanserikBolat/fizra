(function(t){function e(e){for(var a,o,r=e[0],c=e[1],l=e[2],u=0,p=[];u<r.length;u++)o=r[u],Object.prototype.hasOwnProperty.call(s,o)&&s[o]&&p.push(s[o][0]),s[o]=0;for(a in c)Object.prototype.hasOwnProperty.call(c,a)&&(t[a]=c[a]);d&&d(e);while(p.length)p.shift()();return n.push.apply(n,l||[]),i()}function i(){for(var t,e=0;e<n.length;e++){for(var i=n[e],a=!0,r=1;r<i.length;r++){var c=i[r];0!==s[c]&&(a=!1)}a&&(n.splice(e--,1),t=o(o.s=i[0]))}return t}var a={},s={app:0},n=[];function o(e){if(a[e])return a[e].exports;var i=a[e]={i:e,l:!1,exports:{}};return t[e].call(i.exports,i,i.exports,o),i.l=!0,i.exports}o.m=t,o.c=a,o.d=function(t,e,i){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},o.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(o.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)o.d(i,a,function(e){return t[e]}.bind(null,a));return i},o.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="/fizra/";var r=window["webpackJsonp"]=window["webpackJsonp"]||[],c=r.push.bind(r);r.push=e,r=r.slice();for(var l=0;l<r.length;l++)e(r[l]);var d=c;n.push([0,"chunk-vendors"]),i()})({0:function(t,e,i){t.exports=i("56d7")},"0171":function(t,e,i){"use strict";i("65aa")},"034f":function(t,e,i){"use strict";i("85ec")},"0956":function(t,e,i){},"0b16":function(t,e,i){},"0bde":function(t,e,i){"use strict";i("5137")},"0d24":function(t,e,i){"use strict";i("d40b")},"0dd8":function(t,e,i){"use strict";i("af8b")},"0e20":function(t,e,i){"use strict";i("e63d")},"0e90":function(t,e,i){"use strict";i("492f")},"0f3c":function(t,e,i){},"0f98":function(t,e,i){},"13a9":function(t,e,i){"use strict";i("0f3c")},"14a7":function(t,e,i){"use strict";i("f318")},"160e":function(t,e,i){"use strict";i("af59")},"164f":function(t,e,i){},"16ee":function(t,e,i){"use strict";i("cbb6")},"18bd":function(t,e,i){"use strict";i("55d9")},"18f7":function(t,e,i){"use strict";i("732f")},"19ac":function(t,e,i){},"1c26":function(t,e,i){},"1c3e":function(t,e,i){"use strict";i("8583")},"1c78":function(t,e,i){"use strict";i("3295")},"1d71":function(t,e,i){},"1e21":function(t,e,i){"use strict";i("e106")},2047:function(t,e,i){"use strict";i("9057")},"20ce":function(t,e,i){"use strict";i("ec27")},2148:function(t,e,i){},"21a4":function(t,e,i){"use strict";i("3a21")},"286c":function(t,e,i){"use strict";i("ce2c")},"298d":function(t,e,i){"use strict";i("d116")},"2a0f":function(t,e,i){"use strict";i("421b")},"2a13":function(t,e,i){"use strict";i("97fd")},"316b":function(t,e,i){"use strict";i("bd58")},"31af":function(t,e,i){"use strict";i("4a70")},3295:function(t,e,i){},"347f":function(t,e,i){},"3a21":function(t,e,i){},"3cca":function(t,e,i){"use strict";i("870a")},"3cf7":function(t,e,i){"use strict";i("b982")},"3dde":function(t,e,i){"use strict";i("cf60")},"3fce":function(t,e,i){"use strict";i("d709")},"401b":function(t,e,i){},"413b":function(t,e,i){"use strict";i("d40c")},"421b":function(t,e,i){},"44f1":function(t,e,i){"use strict";i("bf05")},"475d":function(t,e,i){"use strict";i("a496")},"492f":function(t,e,i){},"4a70":function(t,e,i){},"4a81":function(t,e,i){"use strict";i("6a1b")},"50c1":function(t,e,i){},5137:function(t,e,i){},"549d":function(t,e,i){},"55d9":function(t,e,i){},"56d7":function(t,e,i){"use strict";i.r(e);i("e260"),i("e6cf"),i("cca6"),i("a79d"),i("ac1f"),i("5319");var a=i("2b0e"),s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{attrs:{id:"app"}},[i("spinner",{attrs:{start:!t.isInitialized}}),t.isInitialized?i("router-view"):t._e()],1)},n=[],o=i("1da1"),r=(i("96cf"),function(){var t=this,e=t.$createElement,i=t._self._c||e;return t.start?i("div",{staticClass:"spinner__wrapper"},[t._m(0)]):t._e()}),c=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"spinner"},[i("div",{staticClass:"lds-ring"},[i("div"),i("div"),i("div"),i("div")])])}],l={props:["start"]},d=l,u=(i("2a0f"),i("2877")),p=Object(u["a"])(d,r,c,!1,null,"218c38ec",null),f=p.exports,_={created:function(){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function e(){var i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(i=!!window.$cookies.get("access_token"),!i){e.next=11;break}if(!sessionStorage.getItem("active_facility")){e.next=7;break}return e.next=5,t.$store.dispatch("facility/resetFacility",sessionStorage.getItem("active_facility")).then((function(){return t.isInitialized=!0}));case 5:e.next=9;break;case 7:return e.next=9,t.$store.dispatch("facility/getAllFacilities").then((function(){return t.isInitialized=!0}));case 9:e.next=12;break;case 11:t.isInitialized=!0;case 12:case"end":return e.stop()}}),e)})))()},data:function(){return{isInitialized:!1}},components:{Spinner:f}},h=_,v=(i("034f"),Object(u["a"])(h,s,n,!1,null,null,null)),m=v.exports,g=i("5530"),y=i("8c4f"),b=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"register__wrapper"},[i("spinner",{attrs:{start:t.start}}),i("order-header",{scopedSlots:t._u([{key:"newUser",fn:function(){return[i("p",{staticClass:"new__order"},[t._v(t._s(t.is_crm?"Бронь на себя":"Новый клиент"))]),i("div",{staticClass:"close__order",on:{click:function(e){return t.goBack()}}},[i("i",{staticClass:"fa fa-times-circle",attrs:{"aria-hidden":"true"}})])]},proxy:!0}])}),i("user-register-form",{attrs:{is_crm:t.is_crm},on:{createOrder:t.createOrder}})],1)},k=[],C=(i("d81d"),i("d3b7"),i("99af"),i("2f62")),w=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"header"},[i("div",{staticClass:"header__inner"},[i("div",{staticClass:"header__top"},[t._t("orderHeader"),t._t("newUser")],2),t._t("headerBottom")],2)])},O=[],x={},j=x,P=(i("9fee"),Object(u["a"])(j,w,O,!1,null,"5f49963d",null)),D=P.exports,$=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"userRegister__form"},[i("div",{staticClass:"userRegister__inner"},[i("div",{staticClass:"telephone__input"},[i("div",{staticClass:"search__input"},[i("label",{staticClass:"phone__label",attrs:{for:"phone"}},[t._v("Номер телефона")]),i("br"),i("input",{directives:[{name:"model",rawName:"v-model",value:t.telephone,expression:"telephone"},{name:"mask",rawName:"v-mask",value:"+7 ### ### ## ##",expression:"'+7 ### ### ## ##'"}],attrs:{type:"tel",id:"phone",name:"phone",title:"Ваш телефонный номер",disabled:""},domProps:{value:t.telephone},on:{input:function(e){e.target.composing||(t.telephone=e.target.value)}}})])]),t.order.client.is_temporary?i("div",{staticClass:"nameSurname__input"},[i("div",{staticClass:"name__input"},[i("label",{staticClass:"name__label",attrs:{for:"name"}},[t._v("Имя")]),i("br"),i("input",{directives:[{name:"model",rawName:"v-model",value:t.name,expression:"name"}],attrs:{type:"text",id:"name",name:"name",title:"Ваше имя"},domProps:{value:t.name},on:{input:function(e){e.target.composing||(t.name=e.target.value)}}})]),i("div",{staticClass:"surname__input"},[i("label",{staticClass:"surname__label",attrs:{for:"surname"}},[t._v("Фамилия")]),i("br"),i("input",{directives:[{name:"model",rawName:"v-model",value:t.surname,expression:"surname"}],attrs:{type:"text",id:"surname",name:"surname",title:"Ваша фамилия"},domProps:{value:t.surname},on:{input:function(e){e.target.composing||(t.surname=e.target.value)}}})])]):t._e(),t.order.client.is_temporary?t._e():i("div",{staticClass:"userInfo"},[i("div",{staticClass:"userInfo__inner"},[i("div",{staticClass:"userInfo__info"},[i("div",{staticClass:"info__nameSurname"},[t._v(" "+t._s(t.order.client.firstname)+" "+t._s(t.order.client.lastname?t.order.client.lastname:"")+" ")]),t.is_crm?t._e():i("div",{staticClass:"call"},[i("a",{staticClass:"callClient",attrs:{href:"tel:"+t.telephone}},[t._v("Позвонить "),i("span",{staticClass:"underline"},[t._v(t._s(t.telephone))])])]),t.is_crm?t._e():i("div",{staticClass:"textWhatsapp"},[i("a",{attrs:{href:"https://api.whatsapp.com/send?phone="+t.telephone,target:"_blank"}},[t._v("Написать в "),i("span",{staticClass:"underline"},[t._v("Whatsapp")])])])]),i("div",{staticClass:"userInfo__photo"},[i("img",{attrs:{src:t.url+"/storage/profile_avatars/"+t.order.client.avatar,alt:""}})])])]),t.is_crm?t._e():i("div",{staticClass:"client__type"},[i("div",{staticClass:"radio-buttons"},[i("div",{staticClass:"type__individual"},[i("label",{staticClass:"custom-radio"},[i("input",{attrs:{type:"radio",name:"radio",checked:""},on:{click:function(e){t.companyChecked=!1}}}),t._m(0)])]),i("div",{staticClass:"type__company"},[i("label",{staticClass:"custom-radio"},[i("input",{attrs:{type:"radio",name:"radio"},on:{click:function(e){t.companyChecked=!0}}}),t._m(1)])])])]),t.companyChecked?i("div",{staticClass:"company__input"},[i("label",{staticClass:"company__label",attrs:{for:"company"}},[t._v("Компания")]),i("br"),i("input",{directives:[{name:"model",rawName:"v-model",value:t.company,expression:"company"}],attrs:{type:"text",id:"company",name:"company",title:"Компания"},domProps:{value:t.company},on:{input:function(e){e.target.composing||(t.company=e.target.value)}}})]):t._e(),t.is_crm?t._e():i("div",{staticClass:"payload"},[i("p",[t._v("Способ оплаты")]),i("div",{staticClass:"pay__cash"},[i("input",{staticStyle:{"margin-right":"10px"},attrs:{type:"radio",name:"payload",title:"Наличными",checked:""},on:{click:function(e){t.pay__type="cash"}}}),i("label",{staticClass:"cash"},[t._v("Наличными")])]),i("div",{staticClass:"pay__card"},[i("input",{staticStyle:{"margin-right":"10px"},attrs:{type:"radio",name:"payload",title:"По реквизитам"},on:{click:function(e){t.pay__type="card"}}}),i("label",{staticClass:"card"},[t._v("По реквизитам")])])]),t.is_crm?i("order-info-before",{attrs:{orderYourself:t.is_crm}}):t._e(),i("div",{staticClass:"create__order",class:{canCreate:t.name.length&&t.surname.length},on:{click:function(e){return e.stopPropagation(),t.createOrder()}}},[t._v(" Создать заказ ")])],1)])},S=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("span",{staticClass:"radio-btn"},[i("p",[t._v("Физ. лицо")])])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("span",{staticClass:"radio-btn"},[i("p",[t._v("Юр. лицо")])])}],A=(i("b0c0"),function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"orderInfo"},[t.discountAdd?i("div",{staticClass:"backdrop"}):t._e(),i("div",{staticClass:"orderInfo__inner"},[i("div",{staticClass:"orderInfo__info"},[i("div",{staticClass:"order__date flex"},[i("p",{staticClass:"order__type"},[t._v(t._s(t.order.type?"Разовая бронь":"Период бронирования"))]),i("p",{staticClass:"date__value"},[t._v(t._s(t.getDateFormat(t.order.start_date))+t._s(t.order.type?"":" - "+t.getDateFormat(t.order.end_date)))])]),i("div",{staticClass:"order__details flex"},[i("p",{staticClass:"details__key"},[t._v("Детали")]),i("div",{staticClass:"details__value"},[i("p",[t._v(t._s(t.booking.start_time.substring(0,5))+" - "+t._s(t.booking.end_time.substring(0,5))+", "+t._s(t.getDayFormat(t.order.start_date)))]),i("p",[t._v(t._s(t.getDuration)+"("+t._s(t.booking.price)+" ₸)")])])]),i("div",{staticClass:"order__field flex"},[i("p",{staticClass:"field__key"},[t._v("Площадка")]),i("p",{staticClass:"field__value"},[t._v(t._s(t.booking.pf_name))])]),i("div",{staticClass:"order__cost flex"},[i("p",{staticClass:"cost__key"},[t._v("Общая сумма")]),i("p",{staticClass:"cost__value"},[t._v(t._s(t.getAllCost)+" ₸")])]),t._t("extraInfo"),i("div",{staticClass:"order__discount"},[i("div",{staticClass:"flex"},[i("p",{staticClass:"discount__key"},[t._v("Скидка")]),i("p",{staticClass:"discount__value"},[t._v(t._s(t.getAllDiscount)+" ₸")])])]),i("div",{staticClass:"order__remainingPaylaod flex"},[i("p",{staticClass:"remainingPayload__key"},[t._v("Остаток")]),i("p",{staticClass:"remaininPayload__value"},[t._v(t._s(t.getRemainMoney)+" ₸")])]),i("div",{staticClass:"order_cancel flex"},[i("p",{staticClass:"cancel__key"},[t._v("Время отмены")]),i("p",{staticClass:"cancel__value"},[t._v(t._s(t.getCancelTime))])]),t.buttonNeeded&&!t.orderYourself?i("div",{staticClass:"discount__button",on:{click:function(e){t.discountAdd=!0}}},[t._v(" Добавить скидку ")]):t._e()],2),i("payment-popup",{directives:[{name:"show",rawName:"v-show",value:t.discountAdd&&!t.orderYourself,expression:"discountAdd&&!orderYourself"}],attrs:{remain:t.getRemainMoney,is_crm:t.orderYourself},on:{addPayment:t.addPayment,closePayment:t.closePayment},scopedSlots:t._u([{key:"title",fn:function(){return[i("p",[t._v("Добавьте сумму скидки за одну бронь")])]},proxy:!0}])})],1)])}),M=[],T=i("5a0c"),B=i.n(T),N=(i("276b"),function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"payment__popup",class:{bottom:t.hasMenu}},[i("div",{staticClass:"payment__inner"},[i("div",{staticClass:"payment__top"},[t._t("title"),i("div",{staticClass:"close",on:{click:function(e){return e.stopPropagation(),t.closePayment.apply(null,arguments)}}},[i("i",{staticClass:"fas fa-times"})])],2),i("div",{staticClass:"payment__input"},[i("input",{directives:[{name:"model",rawName:"v-model",value:t.money,expression:"money"}],ref:"payment",class:{notValid:!t.isValid&&!t.is_crm},attrs:{type:"text",inputmode:"tel"},domProps:{value:t.money},on:{keypress:function(e){return e.stopPropagation(),t.isNumber(e)},keyup:function(e){return e.stopPropagation(),t.isMore()},input:function(e){e.target.composing||(t.money=e.target.value)}}}),t.isValid||t.is_crm?t._e():i("p",{staticClass:"error"},[t._v("Сумма оплаты/скидки/залога не может превышать остаток")])]),i("div",{staticClass:"addPayment",class:{disableBtn:!t.isValid&&!t.is_crm},on:{click:function(e){return e.stopPropagation(),t.addPayment.apply(null,arguments)}}},[t._v(" Добавить ")])])])}),I=[],R={props:["remain","hasMenu","is_crm"],data:function(){return{money:"",isValid:!0}},mounted:function(){this.$refs["payment"].focus()},methods:{closePayment:function(){this.$emit("closePayment"),this.money=""},addPayment:function(){this.isValid&&this.$emit("addPayment",parseInt(this.money)),this.money=""},isNumber:function(t){t=t||window.event;var e=t.which?t.which:t.keyCode;if(!(e>31&&(e<48||e>57)))return!0;t.preventDefault()},isMore:function(){this.isValid=!(parseInt(this.money)>this.remain&&this.money.length)}}},E=R,F=(i("18f7"),Object(u["a"])(E,N,I,!1,null,"796f429a",null)),V=F.exports,Y={components:{PaymentPopup:V},props:["buttonNeeded","orderYourself"],data:function(){return{discountAdd:!1,depositAdd:!1}},watch:{orderYourself:function(t){t?(this.$store.dispatch("order/setBookingDiscount",this.booking.price),this.$store.dispatch("booking/setBookingDiscountLocal",this.booking.price)):(this.$store.dispatch("booking/setBookingDiscountLocal",0),this.$store.dispatch("order/setBookingDiscount",0))}},methods:{addPayment:function(t){this.discountAdd?(this.$store.dispatch("order/setBookingDiscount",t),this.$store.dispatch("booking/setBookingDiscountLocal",t)):this.depositAdd&&this.$store.dispatch("order/addDeposit",t),this.discountAdd=!1,this.depositAdd=!1},closePayment:function(){this.discountAdd=!1,this.depositAdd=!1},addDeposit:function(){this.depositAdd=!0},getDateFormat:function(t){return T(t).locale("ru").format("DD MMMM")},getDayFormat:function(t){return T(t).locale("ru").format("dddd")}},computed:Object(g["a"])(Object(g["a"])(Object(g["a"])(Object(g["a"])(Object(g["a"])(Object(g["a"])({},Object(C["c"])("booking",["booking"])),Object(C["c"])("order",["order"])),Object(C["c"])("facility",["facility"])),Object(C["b"])("order",["getRemainMoney","getAllDiscount","getAllCost"])),Object(C["b"])("booking",["getDuration","getPlayfieldName"])),{},{getCancelTime:function(){var t=this.order.type?this.facility.single_payment.cancel_time:this.facility.multiple_payment.cancel_time;return 0===t?"В любое время":" за ".concat(Math.floor(parseInt(t)/3600)," ч.")}})},H=Y,W=(i("f792"),Object(u["a"])(H,A,M,!1,null,"09b7541f",null)),z=W.exports,L={props:["is_crm"],data:function(){return{name:"",surname:"",telephone:"",companyChecked:!1,company:"",pay__type:"cash",userExists:!1,url:window.location.origin.replace("playfields.","")}},mounted:function(){this.name=this.order.client.firstname||"",this.surname=this.order.client.lastname||"",this.telephone=this.order.client.phone||""},components:{OrderInfoBefore:z},methods:{createOrder:function(){this.$store.dispatch("order/setPayType",this.pay__type),this.companyChecked&&this.$store.dispatch("order/setCompany",this.company),this.order.client.is_temporary&&this.$store.dispatch("order/setClient",Object(g["a"])(Object(g["a"])({},this.order.client),{},{firstname:this.name,lastname:this.surname})),this.$emit("createOrder")}},computed:Object(g["a"])({},Object(C["c"])("order",["order"]))},q=L,U=(i("f13f"),Object(u["a"])(q,$,S,!1,null,"166c1691",null)),J=U.exports,Z=i("bc3a"),G=i.n(Z),K={props:["is_crm"],components:{Spinner:f,OrderHeader:D,UserRegisterForm:J},data:function(){return{start:!1,url:window.location.origin.replace("playfields.","")}},mounted:function(){window.scrollTo(0,0)},methods:{goBack:function(){this.$store.dispatch("booking/resetState"),this.$store.dispatch("order/resetState"),this.$router.push({path:"/"})},createOrder:function(){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function e(){var i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.start=!0,i={phone:t.order.client.phone,order:{payment_type:t.order.payment_type,type:t.order.type,company:t.order.company},discount:t.booking.discount,facility_id:t.facility.id,bookings:t.order.booking.map((function(t){var e={playfield_id:t.playfield_id,start_time:t.start_time,end_time:t.end_time,price:t.price,date:t.date.format("YYYY-MM-DD")};return e}))},t.order.client.is_temporary&&(i["client"]={firstname:t.order.client.firstname,lastname:t.order.client.lastname}),e.next=5,G.a.post("".concat(t.url,"/crm/user/").concat(window.$cookies.get("id"),"/order/make"),Object(g["a"])({},i),{headers:{Authorization:"Bearer ".concat(window.$cookies.get("access_token"))}}).then((function(e){t.$store.dispatch("order/setOrder",e.data.order),t.$store.dispatch("order/replaceBooking",e.data.order.booking),t.$store.dispatch("booking/setBooking",e.data.order.booking[0]),t.$store.dispatch("order/setClient",e.data.order.client),t.$router.push({path:"/order/".concat(t.order.id)})})).finally((function(){return t.start=!1}));case 5:case"end":return e.stop()}}),e)})))()},durationFormat:function(t){var e=Math.floor(t/60),i=t%60;return T().hour(e).minute(i).second(0).format("HH:mm:ss")}},computed:Object(g["a"])(Object(g["a"])(Object(g["a"])(Object(g["a"])({},Object(C["b"])("order",["getOrder","getClient","getAllDiscount","getAllPaid","getAllCost"])),Object(C["c"])("booking",["booking"])),Object(C["c"])("order",["order"])),Object(C["c"])("facility",["facility"]))},Q=K,X=(i("c0aa"),Object(u["a"])(Q,b,k,!1,null,"210c3b7c",null)),tt=X.exports,et=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{ref:"main",staticClass:"timetable__wrapper"},[i("MainHeader",{attrs:{filterType:"allTime"},on:{changed:t.changed}}),t._l(t.bookings,(function(e,a){return i("div",{key:a,staticClass:"content"},[i("DateHeader",{attrs:{date:t.getDayObject(t.bookings[a].date),buttonNeeded:!1}}),i("Timetable",{attrs:{id:a,date:t.getDayObject(t.bookings[a].date),infoAboutDay:t.setInfo(t.bookings[a].date),bookings:t.bookings[a].bookings},on:{move:t.move}})],1)})),i("BottomMenu",{attrs:{active:"calendar"}})],2)},it=[],at=i("ade3"),st=i("2909"),nt=(i("159b"),i("4de4"),function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"timetable",attrs:{id:t.id}},[t.getLen||t.show?i("div",{staticClass:"backdrop",on:{click:t.closePopup}}):t._e(),i("div",{staticClass:"container",class:t.getLen?"active":""},[i("div",{staticClass:"timetable__content",class:t.getLen?"active":""},[t.isToday?i("div",{staticClass:"redLine",style:t.moveRedLine()}):t._e(),i("div",{staticClass:"timetable__fields"},[i("div",{staticClass:"timetable__field empty"}),t._l(t.facilityPlayfields,(function(e,a){return i("div",{key:e.id,staticClass:"timetable__field",style:"width:"+(t.isPhone?"37px":"100px")},[t._v(" "+t._s(t.isPhone?"№ "+(a+1):e.pf_name)+" ")])}))],2),i("div",{staticClass:"timetable__time__cells"},[i("div",{staticClass:"timetable__timeline"},t._l(t.timelines,(function(e,a){return i("div",{key:a,staticClass:"timetable__time"},[i("p",[t._v(t._s(e))])])})),0),t._l(t.facilityPlayfields,(function(e){return i("div",{key:e.id,staticClass:"timetable__cells"},t._l(t.timelines.slice(0,-1),(function(a,s){return i("Cell",{key:s,class:{selected:t.selectedCells.indexOf(e.id+"_"+s)>=0,notAvaiable:!t.isAvaiable},style:t.timelineStyles[e.id][s],attrs:{value:t.cellValues[e.id][s],nextBooking:t.cellValues[e.id][s+1]},on:{makeOrder:function(i){t.isAvaiable&&t.makeOrder(s,e.id)},showInfoAboutOrder:t.showOrderInfo}})})),1)}))],2)])]),t.selectedCells.length&&!t.show?i("OrderPopup",{on:{closePopup:function(e){return t.closePopup()}}}):t._e(),t.show?i("OrderInfoPopup",{attrs:{info:t.infoToShow}}):t._e()],1)}),ot=[],rt=(i("fb6a"),i("7db0"),i("c740"),i("b64b"),i("cb29"),i("1276"),function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"popup"},[i("div",{staticClass:"popup__inner"},[i("div",{staticClass:"popup__order"},[i("div",{staticClass:"new__order__wrapper"},[i("p",{staticClass:"new__order"},[t._v("Новый заказ")]),i("p",{staticClass:"order__duration"},[t._v(t._s(t.getDuration))])]),i("div",{staticClass:"close__popup",on:{click:t.closePopup}},[i("i",{staticClass:"fas fa-times-circle"})])]),i("div",{staticClass:"order__info"},[i("p",{staticClass:"pf_name"},[t._v(t._s(t.booking.pf_name))]),i("div",{staticClass:"popup__orderDescription"},[i("div",{staticClass:"order__desription"},[i("p",{staticClass:"order__date"},[t._v(t._s(t.getDateFormat))]),i("p",{staticClass:"order__time"},[t._v(t._s(t.booking.start_time)+" - "+t._s(t.booking.end_time))]),i("p",{staticClass:"order__cost"},[t._v(t._s(t.booking.price)+" тг")])]),i("select",{directives:[{name:"model",rawName:"v-model",value:t.orderType,expression:"orderType"}],staticClass:"order__type",on:{change:function(e){var i=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.orderType=e.target.multiple?i:i[0]}}},t._l(t.types,(function(e,a){return i("option",{key:a},[t._v(t._s(e))])})),0)])]),i("div",{staticClass:"continue__order"},[i("div",{staticClass:"continue__button",on:{click:function(e){return t.continueOrder()}}},[t._v("Продолжить")])])])])}),ct=[],lt={data:function(){return{types:["Разовая бронь","Долгосрочная бронь"],orderType:"Разовая бронь"}},methods:{closePopup:function(){this.$emit("closePopup")},continueOrder:function(){this.$store.dispatch("order/setType","Разовая бронь"===this.orderType?1:0),this.$store.dispatch("order/setDate",{start_date:this.booking.date,end_date:this.booking.date}),this.$store.dispatch("order/addBooking",this.getBooking),"Разовая бронь"===this.orderType?this.$router.push({name:"order"}):"Долгосрочная бронь"===this.orderType&&this.$router.push({name:"longTermOrder"})}},computed:Object(g["a"])(Object(g["a"])(Object(g["a"])(Object(g["a"])({},Object(C["c"])("booking",["booking"])),Object(C["c"])("facility",["facility"])),Object(C["b"])("booking",["getBooking","getDuration"])),{},{getDateFormat:function(){return T(this.booking.date).format("DD MMMM, dd")}})},dt=lt,ut=(i("4a81"),Object(u["a"])(dt,rt,ct,!1,null,"4626ad7e",null)),pt=ut.exports,ft=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"timetable__cell",class:{reserved:t.value.isReserved,intersect:"intersect"===t.value.is_pending,"no-intersect":"no-intersect"===t.value.is_pending},style:t.getWidth,on:{click:function(e){return e.stopPropagation(),t.handleClick()}}},[t._v(" "+t._s(t.value.value)+" ")])},_t=[],ht={props:["field","index","value","nextBooking"],methods:{handleClick:function(){this.value.isReserved?this.$emit("showInfoAboutOrder",this.value.booking_id):this.$emit("makeOrder")}},computed:{isSameBooking:function(){return!(!this.value.isReserved||!this.nextBooking.isReserved)&&this.nextBooking.booking_id===this.value.booking_id},isLast:function(){return!!this.value.isReserved&&this.value.booking_id!==this.nextBooking.booking_id},getWidth:function(){return this.isSameBooking?"display: none;":this.isLast?"width: ".concat(50*this.value.amount-1,"px; margin-left:1px; background-color: ").concat(this.value.color?"#53A2FF":"#182E57",";color: #fff;"):"width:49px; margin-left: 1px;"}}},vt=ht,mt=(i("298d"),Object(u["a"])(vt,ft,_t,!1,null,"1f9da89c",null)),gt=mt.exports,yt=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"orderInfo__popup"},[i("div",{staticClass:"orderInfo__inner"},[i("div",{staticClass:"orderInfo__top"},[i("div",{staticClass:"orderInfo__left"},[i("div",{staticClass:"order__number",on:{click:function(e){return e.stopPropagation(),t.goToOrder.apply(null,arguments)}}},[t._v(" Заказ №"+t._s(t.info.order_id)+" ")]),i("div",{staticClass:"order__remain"},[t._v(" Бронь, "+t._s(t.getDate)+" ")])]),i("div",{staticClass:"orderInfo__right"},[i("client-card-mini",{attrs:{client:t.info.client}})],1)]),i("div",{staticClass:"orderInfo__content"},[i("div",{staticClass:"orderInfo__remain margin-bottom"},[i("div",{staticClass:"orderInfo__key"},[t._v(" Осталось броней ")]),i("div",{staticClass:"orderInfo__value"},[t._v(" "+t._s(t.info.other_reservations)+" ")])]),i("div",{staticClass:"orderInfo__details margin-bottom"},[i("div",{staticClass:"orderInfo__key"},[t._v(" Детали ")]),i("div",{staticClass:"orderInfo__value"},[t._v(" "+t._s(t.info.start_time.substring(0,5))+"-"+t._s(t.info.end_time.substring(0,5))+", Площадка "+t._s(t.info.playfield_id)+" ")])]),i("div",{staticClass:"orderInfo__cost margin-bottom"},[i("div",{staticClass:"orderInfo__key"},[t._v(" Общая сумма ")]),i("div",{staticClass:"orderInfo__value"},[t._v(" "+t._s(t.info.price)+" ")])]),i("div",{staticClass:"orderInfo__payType margin-bottom"},[i("div",{staticClass:"orderInfo__key"},[t._v(" Способ оплаты ")]),i("div",{staticClass:"orderInfo__value"},[t._v(" "+t._s("cash"===t.info.pay__type?"Наличными":"По реквизитам")+" ")])]),i("div",{staticClass:"orderInfo__paid margin-bottom"},[i("div",{staticClass:"orderInfo__key"},[t._v(" Оплачено ")]),i("div",{staticClass:"orderInfo__value"},[t._v(" "+t._s(t.info.paid)+" ")])]),i("div",{staticClass:"orderInfo_discount margin-bottom"},[i("div",{staticClass:"orderInfo__key"},[t._v(" Скидка ")]),i("div",{staticClass:"orderInfo__value"},[t._v(" "+t._s(t.info.discount)+" ")])]),i("div",{staticClass:"orderInfo__payRemain margin-bottom"},[i("div",{staticClass:"orderInfo__key"},[t._v(" Остаток ")]),i("div",{staticClass:"orderInfo__value"},[t._v(" "+t._s(t.info.debt)+" ")])]),i("div",{staticClass:"orderInfo__button",on:{click:function(e){return t.goToBooking()}}},[t._v(" Перейти к брони ")])])])])},bt=[],kt=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"user__description",on:{click:function(e){e.stopPropagation(),t.show=!0}}},[t.show?i("div",{staticClass:"backdrop",on:{click:function(e){e.stopPropagation(),t.show=!1}}}):t._e(),i("div",{staticClass:"user__photo"},["default_avatar.png"!==t.client.avatar?i("img",{attrs:{src:t.url+"/storage/profile_original_avatars/"+t.client.avatar,alt:""}}):"default_avatar.png"===t.client.avatar?i("i",{staticClass:"fas fa-user-circle"}):t._e()]),i("div",{staticClass:"user__info"},[i("div",{staticClass:"user__name"},[t._v(" "+t._s(t.client.firstname)+" ")]),t.company?i("div",{staticClass:"user__company"},[t._v(" "+t._s(t.company)+" ")]):t._e()]),t.show?i("client-card",{attrs:{client:t.client,clicked:t.show,hasMenu:t.hasMenu,company:t.company}}):t._e()],1)},Ct=[],wt=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"clientCard",class:{bottom:t.hasMenu}},[i("spinner",{attrs:{start:t.start}}),i("div",{directives:[{name:"show",rawName:"v-show",value:t.help,expression:"help"}],staticClass:"backdrop",on:{click:function(e){e.stopPropagation(),t.help=!1}}}),t.start?t._e():i("div",{staticClass:"clientCard__inner"},[i("div",{staticClass:"client__info"},[i("div",{staticClass:"info__left"},[i("div",{staticClass:"name__surname"},[t._v(t._s(t.order_info.firstname)+" "+t._s(t.order_info.lastname))]),i("div",{staticClass:"company"},[t._v(t._s(t.company))]),i("div",{staticClass:"call"},[i("a",{attrs:{href:"tel:"+t.client.phone}},[t._v("Позвонить "),i("span",[t._v(t._s(t.order_info.phone))])])]),i("div",{staticClass:"text"},[i("a",{attrs:{href:"https://api.whatsapp.com/send?phone="+t.order_info.phone,target:"_blank"}},[t._v("Написать в "),i("span",[t._v("WhatsApp")])])])]),i("div",{staticClass:"info__right"},[i("div",{staticClass:"client__photo"},["default_avatar.png"!==t.client.avatar?i("img",{attrs:{src:t.url+"/storage/profile_original_avatars/"+t.order_info.avatar,alt:"Photo"}}):i("i",{staticClass:"fas fa-user-circle"})])])]),i("div",{staticClass:"order__info"},[i("div",{staticClass:"order__amount_info"},[i("p",{staticClass:"order__amount"},[t._v("Общее количество заказов: "+t._s(t.order_info.orders_count))]),i("div",{staticClass:"order_types"},[i("div",{staticClass:"order_type client_debt"}),i("div",{staticClass:"order_type fc_debt"}),i("div",{staticClass:"order_type deposit"}),i("div",{staticClass:"what_is_it",on:{click:function(e){e.stopPropagation(),t.help=!0}}},[i("img",{attrs:{src:"/img/help.svg",alt:"Помощь"}})])])]),i("div",{staticClass:"order__current",on:{click:function(e){return e.stopPropagation(),t.goToSingleClient("activated")}}},[i("p",[t._v("Активные: "+t._s(t.order_info.orders_activated))]),i("div",{staticClass:"debts_btn"},[i("div",{staticClass:"debts"},[t.order_info.debts_activated.client?i("div",{staticClass:"client_debt"},[t._v(t._s(t.order_info.debts_activated.client)+" ₸")]):t._e(),t.order_info.debts_activated.admin?i("div",{staticClass:"fc_debt"},[t._v(t._s(t.order_info.debts_activated.admin)+" ₸")]):t._e(),t.order_info.deposits_activated?i("div",{staticClass:"deposit"},[t._v(t._s(t.order_info.deposits_activated)+" ₸")]):t._e()]),t._m(0)])]),i("div",{staticClass:"order__finished",on:{click:function(e){return e.stopPropagation(),t.goToSingleClient("completed")}}},[i("p",[t._v("Завершенные: "+t._s(t.order_info.orders_completed))]),i("div",{staticClass:"debts_btn"},[i("div",{staticClass:"debts"},[t.order_info.debts_completed.client?i("div",{staticClass:"client_debt"},[t._v(t._s(t.order_info.debts_completed.client)+" ₸")]):t._e(),t.order_info.debts_completed.admin?i("div",{staticClass:"fc_debt"},[t._v(t._s(t.order_info.debts_completed.admin)+" ₸")]):t._e(),t.order_info.deposits_completed?i("div",{staticClass:"deposit"},[t._v(t._s(t.order_info.deposits_completed)+" ₸")]):t._e()]),t._m(1)])]),i("div",{staticClass:"order__canceled",on:{click:function(e){return e.stopPropagation(),t.goToSingleClient("canceled")}}},[i("p",[t._v("Отмененные: "+t._s(t.order_info.orders_canceled))]),i("div",{staticClass:"debts_btn"},[i("div",{staticClass:"debts"},[t.order_info.debts_canceled.client?i("div",{staticClass:"client_debt"},[t._v(t._s(t.order_info.debts_canceled.client)+" ₸")]):t._e(),t.order_info.debts_canceled.admin?i("div",{staticClass:"fc_debt"},[t._v(t._s(t.order_info.debts_canceled.admin)+" ₸")]):t._e(),t.order_info.deposits_canceled?i("div",{staticClass:"deposit"},[t._v(t._s(t.order_info.deposits_canceled)+" ₸")]):t._e()]),t._m(2)])])]),i("div",{staticClass:"payload__info"},[i("p",{staticStyle:{margin:"16px 0px","font-weight":"500"}},[t._v("Оплата")]),i("div",{staticClass:"all__paid"},[i("div",{staticClass:"key"},[t._v("Всего оплачено:")]),i("div",{staticClass:"value"},[t._v(t._s(t.order_info.paid)+" ₸")])]),i("div",{staticClass:"remaining__current"},[i("div",{staticClass:"key"},[t._v("Остаток по текущим заказам:")]),i("div",{staticClass:"value"},[t._v(t._s(t.order_info.residue)+" ₸")])])]),i("div",{directives:[{name:"show",rawName:"v-show",value:t.help,expression:"help"}],staticClass:"help_popup"},[i("p",{staticClass:"help_title"},[t._v("Что означают цифры в цветных блоках?")]),t._m(3)])])],1)},Ot=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"btn"},[i("img",{attrs:{src:"/img/arrow-left.svg",alt:"left"}})])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"btn"},[i("img",{attrs:{src:"/img/arrow-left.svg",alt:"left"}})])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"btn"},[i("img",{attrs:{src:"/img/arrow-left.svg",alt:"left"}})])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"order_types"},[i("div",{staticClass:"debts"},[i("div",{staticClass:"order_type client_debt"}),i("p",[t._v("Долги клиента")])]),i("div",{staticClass:"debts"},[i("div",{staticClass:"order_type fc_debt"}),i("p",[t._v("Возвраты (долги площадки)")])]),i("div",{staticClass:"debts"},[i("div",{staticClass:"order_type deposit"}),i("p",[t._v("Залог")])])])}],xt={props:["client","clicked","hasMenu","company"],components:{Spinner:f},data:function(){return{order_info:{},start:!0,click:this.clicked,url:window.location.origin.replace("playfields.",""),help:!1}},mounted:function(){var t=this;this.start=!0,G.a.post("".concat(this.url,"/crm/user/").concat(window.$cookies.get("id"),"/orders-cli"),{client_id:this.client.id,is_temporary:this.client.is_temporary,facility_id:this.facility.id},{headers:{Authorization:"Bearer ".concat(window.$cookies.get("access_token"))}}).then((function(e){t.order_info=e.data.orders,t.start=!1})).catch((function(t){return console.log(t)}))},computed:Object(g["a"])({},Object(C["c"])("facility",["facility"])),methods:{goToSingleClient:function(t){this.$router.push({name:"singleClient",params:{id:this.client.id,tab:t,is_temp:this.client.is_temporary}})}}},jt=xt,Pt=(i("1c3e"),Object(u["a"])(jt,wt,Ot,!1,null,"308f75f7",null)),Dt=Pt.exports,$t={props:["client","hasMenu","company"],components:{ClientCard:Dt},data:function(){return{show:!1,url:window.location.origin.replace("playfields.","")}}},St=$t,At=(i("731c"),Object(u["a"])(St,kt,Ct,!1,null,"18352f2c",null)),Mt=At.exports,Tt={components:{ClientCardMini:Mt},props:["info"],computed:{getDate:function(){return T(this.info.date).locale("ru").format("DD MMMM")},getRemainMoney:function(){return this.info.bookingInfo.price-(this.info.bookingInfo.paid+this.info.bookingInfo.booking_discount)},getRemainBookings:function(){var t=0,e=T();for(var i in this.info.bookings){var a=T(this.info.bookings[i].date);a.diff(e,"day",!1)>=0&&(t+=1)}return t}},methods:{goToBooking:function(){this.$store.dispatch("order/setOrder",this.info),this.$store.dispatch("booking/setBooking",this.info),this.$router.push({name:"singleBooking",params:{id:this.info.order_id,bookingid:this.info.id}})},goToOrder:function(){this.$store.dispatch("order/setOrder",this.info),this.$store.dispatch("booking/setBooking",this.info),this.$router.push({name:"singleOrder",params:{id:this.info.order_id}})}}},Bt=Tt,Nt=(i("160e"),Object(u["a"])(Bt,yt,bt,!1,null,"bfc8b7b4",null)),It=Nt.exports,Rt={components:{OrderPopup:pt,Cell:gt,OrderInfoPopup:It},props:["id","date","infoAboutDay","buttonNeeded","bookings"],data:function(){return{timelines:[],firstSelected:null,selectedCells:[],duration:30,durationRange:1,today:T(),timelineStyles:{},cellValues:{},leftScroll:0,show:!1,orders:[],infoToShow:{},start:!1}},watch:{bookings:function(){this.disableTime(),this.getPrice(),this.getOrders(),this.moveRedLine(),this.$emit("move",this.leftScroll)},"facility.id":function(){this.disableTime(),this.getPrice(),this.getOrders(),this.moveRedLine(),this.$emit("move",this.leftScroll)}},mounted:function(){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t.generateTime(),t.disableTime(),t.getPrice(),t.getOrders(),t.moveRedLine(),t.$emit("move",t.leftScroll);case 6:case"end":return e.stop()}}),e)})))()},methods:{generateTime:function(){for(var t=5;t<29;t++){var e=t%24,i=e<10?"0".concat(e):"".concat(e);this.timelines.push("".concat(i,":00")),this.timelines.push("".concat(i,":30"))}this.timelines.push(this.timelines[0])},makeOrder:function(t,e){if(this.moveTableToCenter(),this.firstSelected)if(e===this.firstSelected.fieldId)if(this.firstSelected.cellId===t)this.selectedCells=[],this.firstSelected=null;else{var i=Math.min(this.firstSelected.cellId,t),a=Math.max(this.firstSelected.cellId,t);if(this.cellValues[e].slice(i,a+1).some((function(t){return t.isReserved})))this.setOrderInfo(t,e),this.firstSelected={fieldId:e,cellId:t},this.selectedCells=[],this.selectedCells.push("".concat(e,"_").concat(t));else{for(this.setOrderInfo(i,e,a);i<=a;i++)this.selectedCells.push("".concat(e,"_").concat(i));this.firstSelected=null}}else this.setOrderInfo(t,e),this.firstSelected={fieldId:e,cellId:t},this.selectedCells=[],this.selectedCells.push("".concat(e,"_").concat(t));else this.selectedCells=[],this.selectedCells.push("".concat(e,"_").concat(t)),this.firstSelected={fieldId:e,cellId:t},this.setOrderInfo(t,e)},setOrderInfo:function(t,e){for(var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t,a=0,s=t;s<i+1;s++)a+=parseInt(this.cellValues[e][s].value);this.durationRange=i-t+1;var n=this.facilityPlayfields.find((function(t){return t.id===e})).pf_name;this.$store.dispatch("booking/setBookingTime",{start_time:this.timelines[t],end_time:this.timelines[i+1]}),this.$store.dispatch("booking/setBookingField",e),this.$store.dispatch("booking/setPlayfieldName",n),this.$store.dispatch("booking/setBookingDate",this.dateFormat(this.getDayIfMidnight(t),this.timelines[i+1])),this.$store.dispatch("booking/setBookingPrice",a),this.$store.dispatch("booking/setDuration",this.duration*this.durationRange*60)},closePopup:function(){this.selectedCells=[],this.orderInfo={description:"",date:this.date,duration:30,durationRange:1},this.firstSelected=null,this.show=!1,this.$store.dispatch("booking/resetState")},moveRedLine:function(){var t=49,e=1,i=this.isPhone?67:130,a="".concat(T().format("HH"),":").concat(T().minute()<30?"00":"30"),s=this.timelines.findIndex((function(t){return t===a})),n=i+Math.floor(t/2)+(t+e)*s;return this.leftScroll=n,"left:".concat(n,"px")},moveTableToCenter:function(){document.getElementById(this.id).scrollIntoView({behavior:"smooth",block:"center"})},disableTime:function(){var t=this;this.timelineStyles=[],this.facilityPlayfields.forEach((function(e){for(var i=[],a=t.timelines.indexOf(t.infoAboutDay[e.id].start_time.substring(0,5)),s=t.timelines.indexOf(t.infoAboutDay[e.id].end_time.substring(0,5)),n=0;n<t.timelines.length-1;n++){if(a>=s)for(var o=s;o<a;o++)i[o]="pointer-events: none; background: #2F5061";else{for(var r=0;r<a;r++)i[r]="pointer-events: none; background: #2F5061";for(var c=s;c<t.timelines.length;c++)i[c]="pointer-events: none; background: #2F5061"}t.timelineStyles[e.id]=i}}))},getPrice:function(){var t=this,e=function(e){var i=Object.keys(t.infoAboutDay[e].prices),a=new Array(t.timelines.length).fill({value:"",isReserved:!1});i.forEach((function(i){return a[t.timelines.indexOf(i)]={value:t.infoAboutDay[e].prices[i],isReserved:!1}})),t.cellValues[e]=a};for(var i in this.infoAboutDay)e(i)},getOrders:function(){var t=this;this.bookings.forEach((function(e){var i=t.timelines.indexOf(e.end_time.substring(0,5)),a=t.timelines.indexOf(e.start_time.substring(0,5)),s=e.playfield.id;t.orders.push(e.order_id);for(var n=a;n<i;n++)t.cellValues[s][n]={value:e.client.firstname,isReserved:!0,booking_id:e.id,amount:i-a,color:t.orders.indexOf(e.order_id)%2};t.cellValues=Object(g["a"])({},t.cellValues)}))},showOrderInfo:function(t){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function i(){return regeneratorRuntime.wrap((function(i){while(1)switch(i.prev=i.next){case 0:e.selectedCells=[],e.infoToShow=e.bookings.find((function(e){return e.id===t})),e.show=!0;case 3:case"end":return i.stop()}}),i)})))()},dateFormat:function(t,e){return T(t).hour(e.split(":")[0]).minute(e.split(":")[1]).second(0).millisecond(0)},getDayIfMidnight:function(t){var e="00:00";return t>=this.timelines.indexOf(e)?this.date.add(1,"day"):this.date}},computed:Object(g["a"])(Object(g["a"])({},Object(C["c"])("facility",["facility"])),{},{getLen:function(){return this.selectedCells.length},isAvaiable:function(){return this.date.diff(this.today,"day",!1)>=0},isEmpty:function(){return 0===Object.keys(this.cellValues).length},isToday:function(){return this.date.format("DD-MM-YYYY")===this.today.format("DD-MM-YYYY")},facilityPlayfields:function(){var t,e,i=this;return null!==(t=null===(e=this.facility.playfields)||void 0===e?void 0:e.filter((function(t){if(null!==t.periods_data)return!t.periods_data[i.date.day()].dayoff})))&&void 0!==t?t:[]},isPhone:function(){var t=window.innerWidth>0?window.innerWidth:screen.width;return t<768}})},Et=Rt,Ft=(i("2a13"),Object(u["a"])(Et,nt,ot,!1,null,null,null)),Vt=Ft.exports,Yt=i("f906"),Ht=i.n(Yt),Wt=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"mainHeader"},[i("div",{staticClass:"mainHeader__inner"},[i("div",{staticClass:"mainHeader__top"},[t.filterType?t._e():t._t("title"),t.filterType?i("div",{staticClass:"mainHeader__filters"},[i("div",{staticClass:"filter__day",class:"oneDay"===t.active?"active":"",on:{click:function(e){return t.setFilter("oneDay")}}},[i("p",[t._v("День")])]),i("div",{staticClass:"filter__allTime",class:"allTime"===t.active?"active":"",on:{click:function(e){return t.setFilter("allTime")}}},[i("p",[t._v("Все время")])])]):t._e(),i("div",{staticClass:"dropdown"},[t.options.length>1?i("DropDown",{attrs:{options:t.options,id:"facility",initialValue:t.initial},on:{selected:t.selected}}):t._e(),i("div",{staticClass:"notification",on:{click:function(e){return e.stopPropagation(),t.goToNotifications.apply(null,arguments)}}},[t.count?i("div",{staticClass:"amount"},[t._v(t._s(t.count))]):t._e(),i("img",{attrs:{src:"/img/notification.svg",alt:"Уведомления"}})])],1)],2),i("div",{staticClass:"mainHeader__bottom"},[i("div",{staticClass:"number"},[i("input",{directives:[{name:"model",rawName:"v-model",value:t.telephone,expression:"telephone"},{name:"mask",rawName:"v-mask",value:"+7 ### ### ## ##",expression:"'+7 ### ### ## ##'"}],attrs:{type:"tel",id:"phone",name:"phone",title:"+7",placeholder:"+7"},domProps:{value:t.telephone},on:{input:function(e){e.target.composing||(t.telephone=e.target.value)}}})]),i("a",{staticClass:"button",attrs:{href:"https://wa.me/"+t.telephone.split(" ").join("")+"?text="+t.url+"/fc/"+t.facility.id,target:"_blank"}},[t._v(" Отправить по WhatsApp ")])])])])},zt=[],Lt=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"dropdown"},[i("div",{directives:[{name:"show",rawName:"v-show",value:t.toggleDropdown,expression:"toggleDropdown"}],staticClass:"backdrop",on:{click:function(e){e.stopPropagation(),t.toggleDropdown=!1}}}),i("div",{staticClass:"chosen",class:{fixed:t.fixed},on:{click:function(e){e.stopPropagation(),t.toggleDropdown=!t.toggleDropdown}}},[i("div",{staticClass:"value"},[t._t("image"),i("span",[i("label",[t._v(t._s(t.selectedText))])])],2),i("i",{staticClass:"fa fa-caret-down icon"})]),i("div",{staticClass:"dropdown__options",class:{show:t.toggleDropdown}},t._l(t.options,(function(e,a){return i("div",{key:a,staticClass:"dropdown__option",attrs:{value:e.value},on:{click:function(i){return i.stopPropagation(),t.setSelect(e)}}},[t._v(t._s(e.text))])})),0)])},qt=[],Ut={props:["options","initialValue","id","fixed"],data:function(){return{selected:"",selectedText:"Выберите",toggleDropdown:!1}},created:function(){this.selected=this.initialValue.value,this.selectedText=this.initialValue.text},watch:{"initialValue.value":function(){this.selected=this.initialValue.value,this.selectedText=this.initialValue.text}},methods:{setSelect:function(t){this.selected=t.value,this.selectedText=t.text,this.toggleDropdown=!1,this.$emit("selected",{value:this.selected,text:this.selectedText},this.id)}}},Jt=Ut,Zt=(i("3dde"),Object(u["a"])(Jt,Lt,qt,!1,null,"eb1bc436",null)),Gt=Zt.exports,Kt={props:["filterType"],components:{DropDown:Gt},data:function(){return{active:this.filterType,options:[],initial:{},telephone:"",f_id:sessionStorage.getItem(""),url:window.location.origin.replace("playfields.",""),count:0}},created:function(){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t.options=JSON.parse(sessionStorage.getItem("facilities")),t.initial=t.options.find((function(t){return t.value==sessionStorage.getItem("active_facility")}))||t.options[0],G.a.get("".concat(t.url,"/crm/user/").concat(window.$cookies.get("id"),"/notifications-unread"),{headers:{Authorization:"Bearer ".concat(window.$cookies.get("access_token"))}}).then((function(e){return t.count=e.data.count}));case 3:case"end":return e.stop()}}),e)})))()},methods:{setFilter:function(t){this.active=t,"oneDay"===this.active?this.$router.push({path:"/"}):"allTime"===this.active&&this.$router.push({name:"main"})},selected:function(t,e){"facility"===e&&this.$emit("changed",t.value)},goToNotifications:function(){this.$router.push({name:"notifications"})}},computed:Object(g["a"])({},Object(C["c"])("facility",["facility"]))},Qt=Kt,Xt=(i("316b"),Object(u["a"])(Qt,Wt,zt,!1,null,"4ded6776",null)),te=Xt.exports,ee=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"timetable__dateline"},[i("div",{staticClass:"timetable__date"},[i("p",{class:t.isToday?"today":""},[t._v(t._s(t.date.locale("ru").format("DD MMMM, dd")))]),t.buttonNeeded?i("div",{staticClass:"changeDate__buttons"},[i("div",{staticClass:"prev__day",on:{click:function(e){return t.handleClick("prev")}}},[i("i",{staticClass:"fas fa-angle-left"})]),i("div",{staticClass:"next__day",on:{click:function(e){return t.handleClick("next")}}},[i("i",{staticClass:"fas fa-angle-right"})])]):t._e()])])},ie=[],ae={props:["date","buttonNeeded"],methods:{handleClick:function(t){this.$emit(t)}},computed:{isToday:function(){return this.date.locale("ru").format("DD-MMMM-YYYY")===B()().locale("ru").format("DD-MMMM-YYYY")}}},se=ae,ne=(i("9eaf"),Object(u["a"])(se,ee,ie,!1,null,"09644ac9",null)),oe=ne.exports,re=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"bottom__menu"},[i("div",{staticClass:"menu__option calendar",on:{click:function(e){return t.makeActive("calendar")}}},[i("i",{staticClass:"far fa-calendar",class:"calendar"===t.activeTab?"active":""}),i("p",{class:"calendar"===t.activeTab?"active":""},[t._v("Календарь")])]),i("div",{staticClass:"menu__option orders",on:{click:function(e){return t.makeActive("orders")}}},[i("i",{staticClass:"fas fa-plus-circle",class:"orders"===t.activeTab?"active":""},[t.waiting?i("div",{staticClass:"circle"},[t._v(t._s(t.waiting))]):t._e()]),i("p",{class:"orders"===t.activeTab?"active":""},[t._v("Заказы")])]),i("div",{staticClass:"menu__option clients",on:{click:function(e){return t.makeActive("clients")}}},[i("i",{staticClass:"fas fa-user",class:"clients"===t.activeTab?"active":""}),i("p",{class:"clients"===t.activeTab?"active":""},[t._v("Клиенты")])]),i("div",{staticClass:"menu__option menu",on:{click:function(e){return t.makeActive("menu")}}},[i("i",{staticClass:"fas fa-bars",class:"menu"===t.activeTab?"active":""}),i("p",{class:"menu"===t.activeTab?"active":""},[t._v("Меню")])])])},ce=[],le={props:["active"],data:function(){return{activeTab:this.active,waiting:"",url:window.location.origin.replace("playfields.","")}},mounted:function(){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.getWaitingAmount();case 2:case"end":return e.stop()}}),e)})))()},watch:{"facility.id":function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.getWaitingAmount();case 2:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},methods:{makeActive:function(t){switch(this.activeTab=t,this.activeTab){case"calendar":this.$router.push({path:"/"});break;case"orders":this.$router.push({path:"/orders"});break;case"clients":this.$router.push({path:"/clients"});break;case"menu":this.$router.push({path:"/auth"});break}},getWaitingAmount:function(){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,G.a.get("".concat(t.url,"/crm/user/").concat(window.$cookies.get("id"),"/facility/").concat(t.facility.id,"/pending"),{headers:{Authorization:"Bearer ".concat(window.$cookies.get("access_token"))}}).then((function(t){return t.data.orders}));case 2:t.waiting=e.sent;case 3:case"end":return e.stop()}}),e)})))()}},computed:Object(g["a"])({},Object(C["c"])("facility",["facility"]))},de=le,ue=(i("c38e"),Object(u["a"])(de,re,ce,!1,null,"e8cd8258",null)),pe=ue.exports,fe={components:{Timetable:Vt,MainHeader:te,DateHeader:oe,BottomMenu:pe},data:function(){return{today:T().locale("ru"),start:!1,dates:[],bookings:[],page:1,lastPage:1,sending:!1,url:window.location.origin.replace("playfields.","")}},watch:{"facility.id":function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return this.reset(),t.next=3,this.getRangeBookings();case 3:this.scrollToToday();case 4:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},created:function(){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t.setDate(),window.addEventListener("scroll",t.checkIfEnd);case 2:case"end":return e.stop()}}),e)})))()},destroyed:function(){window.removeEventListener("scroll",this.checkIfEnd)},mounted:function(){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return T["extend"](Ht.a),t.$store.dispatch("order/resetState"),t.$store.dispatch("booking/resetState"),e.next=5,t.getRangeBookings();case 5:case"end":return e.stop()}}),e)})))()},computed:Object(g["a"])(Object(g["a"])({},Object(C["c"])("admin",["user"])),Object(C["c"])("facility",["facility"])),methods:{checkIfEnd:function(){this.lastPage>=this.page&&window.scrollY+window.innerHeight>=document.documentElement.scrollHeight&&!this.sending&&this.getRangeBookings()},reset:function(){this.bookings=[],this.page=1,this.lastPage=1},setDate:function(){for(var t=T().locale("ru").hour(0).minute(0).second(0),e=0;e<7;e++)this.dates.push(t),t=t.add(1,"day")},getRangeBookings:function(){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.sending=!0,e.next=3,G.a.post("".concat(t.url,"/crm/user/").concat(window.$cookies.get("id"),"/facility/").concat(t.facility.id,"/date-range/?page=").concat(t.page),{start_date:t.today.format("YYYY-MM-DD"),end_date:t.today.add(1,"year").format("YYYY-MM-DD")},{headers:{Authorization:"Bearer ".concat(window.$cookies.get("access_token"))}}).then((function(e){var i;(i=t.bookings).push.apply(i,Object(st["a"])(e.data.paginator.data)),t.page++,t.lastPage=e.data.paginator.last_page,t.sending=!1}));case 3:case"end":return e.stop()}}),e)})))()},setInfo:function(t){var e=T(t,"YYYY-MM-DD").day(),i={};return this.getFacility(e).forEach((function(t){i=Object(g["a"])(Object(g["a"])({},i),{},Object(at["a"])({},t.id,t.periods_data[e]))})),i},getFacility:function(t){var e,i;return null!==(e=null===(i=this.facility.playfields)||void 0===i?void 0:i.filter((function(e){if(null!==e.periods_data)return!e.periods_data[t].dayoff})))&&void 0!==e?e:[]},changed:function(t){var e=this;this.start=!0,this.$store.dispatch("facility/resetFacility",parseInt(t)).then((function(){return e.start=!1})),sessionStorage.setItem("active_facility",parseInt(t))},scrollToToday:function(){window.scrollTo(0,0),window.onbeforeunload=function(){window.scrollTo(0,0)}},getDayObject:function(t){return T(t,"YYYY-MM-DD").locale("ru")},move:function(t){this.$refs["main"].scrollLeft=9*t/10}}},_e=fe,he=(i("13a9"),Object(u["a"])(_e,et,it,!1,null,"dce3eafa",null)),ve=he.exports,me=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"order__wrapper"},[i("spinner",{attrs:{start:t.start}}),i("order-header",{scopedSlots:t._u([{key:"orderHeader",fn:function(){return[i("p",{staticClass:"new__order"},[t._v("Новый заказ")]),i("div",{staticClass:"close__order",on:{click:function(e){return t.goBack()}}},[i("i",{staticClass:"fa fa-times-circle",attrs:{"aria-hidden":"true"}})])]},proxy:!0},{key:"headerBottom",fn:function(){return[i("div",{staticClass:"header__bottom"},[i("p",[t._v("Добавление клиента")])])]},proxy:!0}])}),i("order-info-before",{attrs:{buttonNeeded:!0,orderYourself:t.orderYourself}}),i("div",{staticClass:"search__input"},[i("label",{staticClass:"phone__label",attrs:{for:"phone"}},[t._v("Номер телефона")]),i("br"),i("div",{staticClass:"phone_wrapper"},[i("input",{directives:[{name:"mask",rawName:"v-mask",value:"+7 ### ### ## ##",expression:"'+7 ### ### ## ##'"},{name:"model",rawName:"v-model",value:t.search,expression:"search"}],ref:"telephone",attrs:{type:"tel",name:"phone",id:"phone",placeholder:"Введите номер телефона"},domProps:{value:t.search},on:{keypress:function(e){return e.stopPropagation(),t.isNumber(e)},paste:function(e){return t.onPaste(e)},input:function(e){e.target.composing||(t.search=e.target.value)}}}),t.isSupported?i("img",{attrs:{src:"/img/contacts.svg",alt:"contact"},on:{click:function(e){return e.stopPropagation(),t.getContacts.apply(null,arguments)}}}):t._e()]),i("p",{directives:[{name:"show",rawName:"v-show",value:t.noDuplicateContacts.length>1,expression:"noDuplicateContacts.length>1"}],staticClass:"another_phone"},[t._v("Выбрать другой номер")]),i("select",{directives:[{name:"model",rawName:"v-model",value:t.search,expression:"search"},{name:"show",rawName:"v-show",value:t.noDuplicateContacts.length>1,expression:"noDuplicateContacts.length>1"}],ref:"select_phone",staticClass:"client_select",on:{change:function(e){var i=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.search=e.target.multiple?i:i[0]}}},t._l(t.noDuplicateContacts,(function(e,a){return i("option",{key:a},[t._v(t._s(e))])})),0)]),i("div",{staticClass:"actions"},[i("div",{staticClass:"continue__btn",class:{valid:t.isValid},on:{click:function(e){return t.searchNumber()}}},[t._v("Продолжить")]),i("div",{staticClass:"order_yourself"},[i("input",{directives:[{name:"model",rawName:"v-model",value:t.orderYourself,expression:"orderYourself"}],attrs:{type:"checkbox",id:"yourself"},domProps:{checked:Array.isArray(t.orderYourself)?t._i(t.orderYourself,null)>-1:t.orderYourself},on:{change:function(e){var i=t.orderYourself,a=e.target,s=!!a.checked;if(Array.isArray(i)){var n=null,o=t._i(i,n);a.checked?o<0&&(t.orderYourself=i.concat([n])):o>-1&&(t.orderYourself=i.slice(0,o).concat(i.slice(o+1)))}else t.orderYourself=s}}}),i("label",{attrs:{for:"yourself"}},[t._v("Забронировать на себя")])])])],1)},ge=[],ye=(i("841c"),i("a15b"),i("25f0"),i("6062"),i("3ca3"),i("ddb0"),i("caad"),i("2532"),{components:{OrderInfoBefore:z,OrderHeader:D,Spinner:f},data:function(){return{search:"",discount:0,client:{},contacts:[],orderYourself:!1,start:!1,url:window.location.origin.replace("playfields.","")}},mounted:function(){window.scrollTo(0,0)},watch:{orderYourself:function(t){this.search=t?window.$cookies.get("phone"):""},search:function(t){t.split(" ").join("")===window.$cookies.get("phone")?this.orderYourself=!0:this.orderYourself=!1}},methods:{searchNumber:function(){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.start=!0,e.next=3,G.a.post("".concat(t.url,"/crm/user/").concat(window.$cookies.get("id"),"/client-interaction"),{phone:"".concat(t.search.split(" ").join(""))},{headers:{Authorization:"Bearer ".concat(window.$cookies.get("access_token"))}}).then((function(e){t.$store.dispatch("order/setClient",e.data.client),t.$router.push({name:"registerUser",params:{is_crm:t.orderYourself}})})).finally((function(){return t.start=!1}));case 3:case"end":return e.stop()}}),e)})))()},getContacts:function(){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function e(){var i,a,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return i=["name","tel"],a={multiple:!1},e.prev=2,e.next=5,navigator.contacts.select(i,a);case 5:s=e.sent,t.contacts=s.map((function(t){return t.tel.map((function(t){var e=t.replace(/\D/g,"");return"+7".concat(e.substring(e.length-10))}))}))[0],t.search=t.noDuplicateContacts[0],t.noDuplicateContacts.length>1&&t.$refs["select_phone"].click(),e.next=14;break;case 11:e.prev=11,e.t0=e["catch"](2),alert(e.t0.toString());case 14:case"end":return e.stop()}}),e,null,[[2,11]])})))()},goBack:function(){this.$store.dispatch("booking/resetState"),this.$store.dispatch("order/resetState"),this.$router.push({path:"/"})},isNumber:function(t){t=t||window.event;var e=t.which?t.which:t.keyCode;return!(e>31&&46!=e&&(e<48||e>57))},onPaste:function(t){this.search="";var e=(t.clipboardData||t.originalEvent.clipboardData||window.clipboardData).getData("text").replace(/\D/g,"");e.length>=10&&(this.search="+7".concat(e.substring(e.length-10)))}},computed:Object(g["a"])(Object(g["a"])({},Object(C["c"])("order",["order"])),{},{isSupported:function(){return"contacts"in navigator&&"ContactsManager"in window},noDuplicateContacts:function(){return Object(st["a"])(new Set(this.contacts))},isValid:function(){return this.search.length&&!this.search.includes("_")}})}),be=ye,ke=(i("0e20"),Object(u["a"])(be,me,ge,!1,null,"136c4ab8",null)),Ce=ke.exports,we=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{ref:"main",staticClass:"singleDay__main"},[i("spinner",{attrs:{start:t.start}}),i("MainHeader",{attrs:{filterType:"oneDay"},on:{changed:t.changed}}),i("div",{staticClass:"content"},[i("DateHeader",{attrs:{date:t.day,buttonNeeded:!0},on:{prev:t.prev,next:t.next}}),i("Timetable",{attrs:{id:t.day.format("DD-MM-YYYY"),date:t.day,infoAboutDay:t.setInfo(t.day.day()),bookings:t.bookings},on:{move:t.move}})],1),i("div",{staticClass:"bookings"},[i("div",{staticClass:"bookings__title"},[i("p",{staticClass:"bookings_count"},[t._v("Брони: "+t._s(t.bookings.length))]),i("div",{staticClass:"debts"},[t.debtForToday>0?i("p",{staticClass:"debtForToday"},[t._v("Получено: "+t._s(t.debtForToday)+" ₸("+t._s(t.debtInCard)+" ₸)")]):t._e(),t.remain>0?i("p",{staticClass:"remain"},[t._v("Остаток: "),i("span",[t._v(t._s(t.remain)+" ₸")])]):t._e()])]),t._l(t.bookings,(function(e,a){return i("div",{key:a,staticClass:"bookings__content"},[i("BookingMiniature",{attrs:{info:e},on:{addPayload:t.addPayload}})],1)}))],2),i("BottomMenu",{attrs:{active:"calendar"}})],1)},Oe=[],xe=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"main__content",class:{completedCard:"completed"===t.info.status},on:{click:function(e){return t.goToBooking()}}},[t.openPopup?i("div",{staticClass:"backdrop",on:{click:function(e){e.stopPropagation(),t.openPopup=!1}}}):t._e(),i("div",{staticClass:"content__inner"},[i("div",{staticClass:"content_top"},[i("div",{staticClass:"contentTop__inner"},[i("div",{staticClass:"content__left"},[i("div",{staticClass:"mini__description"},["completed"===t.info.status?i("p",{class:{completed:"completed"===t.info.status}},[t._v("Завершенная бронь")]):t._e(),i("b",[t._v(t._s(t.info.start_time.substring(0,5))+"-"+t._s(t.info.end_time.substring(0,5)))]),t._v(", "+t._s(t.info.playfield.name)+" ")]),i("div",{staticClass:"info__payload"},[i("div",{staticClass:"payload__type"},[t._v(" "+t._s("cash"===t.info.order.payment_type?"Наличными":"По реквизитам")+" ")]),i("div",{staticClass:"payload__remain",class:{fullPay:t.fullPay}},[t._v(" "+t._s(t.fullPay?"Оплачено":"Остаток: "+t.info.debt+" тг")+" ")])])]),i("div",{staticClass:"content__right"},[i("ClientCardMini",{attrs:{client:t.info.client,hasMenu:!0,company:t.info.order.company}})],1)])]),t.fullPay?t._e():i("div",{staticClass:"content__bottom"},[i("div",{staticClass:"payload__button",on:{click:function(e){e.stopPropagation(),t.openPopup=!0}}},[t._v(" Добавить оплату ")])]),i("div",{staticClass:"payment"},[t.openPopup?i("payment-popup",{attrs:{remain:t.info.debt,hasMenu:!0,is_crm:t.info.client.is_crm},on:{addPayment:t.addPayload,closePayment:function(e){t.openPopup=!1}},scopedSlots:t._u([{key:"title",fn:function(){return[i("p",[t._v("Добавьте оплату")])]},proxy:!0}],null,!1,244481939)}):t._e()],1)])])},je=[],Pe={data:function(){return{openPopup:!1}},props:["info"],components:{ClientCardMini:Mt,PaymentPopup:V},computed:{fullPay:function(){return this.info.debt<=0},getRemainMoney:function(){return this.info.price-(this.info.paid+this.info.booking_discount)}},methods:{addPayload:function(t){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function i(){return regeneratorRuntime.wrap((function(i){while(1)switch(i.prev=i.next){case 0:return i.next=2,e.$store.dispatch("booking/setBookingPaid",{money:t,id:e.info.id});case 2:e.openPopup=!1,window.location.reload();case 4:case"end":return i.stop()}}),i)})))()},goToBooking:function(){this.$store.dispatch("booking/setBooking",this.info),this.$router.push({name:"singleBooking",params:{id:this.info.order_id,bookingid:this.info.id}})}}},De=Pe,$e=(i("813a"),Object(u["a"])(De,xe,je,!1,null,"c45011dc",null)),Se=$e.exports,Ae={props:["id"],data:function(){return{day:B()().locale("ru"),bookings:[],openPopup:!1,oId:"",bId:"",remainForBooking:0,start:!1,options:[],url:window.location.origin.replace("playfields.",""),initialValue:{},timelines:["05:00","05:30","06:00","06:30","07:00","07:30","08:00","08:30","09:00","09:30","10:00","10:30","11:00","11:30","12:00","12:30","13:00","13:30","14:00","14:30","15:00","15:30","16:00","16:30","17:00","17:30","18:00","18:30","19:00","19:30","20:00","20:30","21:00","21:30","22:00","22:30","23:00","23:30","00:00","00:30","01:00","01:30","02:00","02:30","03:00","03:30","04:00","04:30"]}},watch:{day:function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:window.scrollTo(0,0),this.getDailyOrders();case 2:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),"facility.id":function(){window.scrollTo(0,0),this.getDailyOrders()}},mounted:function(){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return B.a.extend(Ht.a),window.scrollTo(0,0),t.day=B()(t.id,"DD-MM-YYYY").locale("ru"),window.onbeforeunload=function(){window.scrollTo(93,0)},t.$store.dispatch("order/resetState"),t.$store.dispatch("booking/resetState"),e.next=8,t.getDailyOrders();case 8:case"end":return e.stop()}}),e)})))()},methods:{move:function(t){this.$refs["main"].scrollLeft=9*t/10},handleBackdrop:function(t){this.backdrop=t},setInfo:function(t){var e={};return this.getFacility.forEach((function(i){e=Object(g["a"])(Object(g["a"])({},e),{},Object(at["a"])({},i.id,i.periods_data[t]))})),e},getDailyOrders:function(){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.start=!0,e.next=3,G.a.get("".concat(t.url,"/crm/user/").concat(window.$cookies.get("id"),"/facility/").concat(sessionStorage.getItem("active_facility"),"/").concat(t.day.format("DD-MM-YYYY")),{headers:{Authorization:"Bearer ".concat(window.$cookies.get("access_token"))}}).then((function(e){t.bookings=e.data.bookings}));case 3:t.start=!1;case 4:case"end":return e.stop()}}),e)})))()},prev:function(){this.day=this.day.subtract(1,"day"),this.$router.push({name:"day",params:{id:this.day.format("DD-MM-YYYY")}})},next:function(){this.day=this.day.add(1,"day"),this.$router.push({name:"day",params:{id:this.day.format("DD-MM-YYYY")}})},addPayload:function(t,e,i){this.bId=e,this.oId=t,this.openPopup=!0,this.remainForBooking=i},closePayment:function(){this.openPopup=!1},changed:function(t){var e=this;this.start=!0,this.$store.dispatch("facility/resetFacility",parseInt(t)).then((function(){return e.start=!1})),sessionStorage.setItem("active_facility",parseInt(t))}},components:{Spinner:f,Timetable:Vt,MainHeader:te,DateHeader:oe,BookingMiniature:Se,BottomMenu:pe},computed:Object(g["a"])(Object(g["a"])({getSingleDay:function(){return this.$route.params.id.toString()},getFacility:function(){var t,e,i=this;return null!==(t=null===(e=this.facility.playfields)||void 0===e?void 0:e.filter((function(t){if(null!==t.periods_data)return!t.periods_data[i.day.day()].dayoff})))&&void 0!==t?t:[]},debtForToday:function(){return this.bookings.reduce((function(t,e){return t+e.paid}),0)},debtInCard:function(){return this.bookings.filter((function(t){return"card"===t.order.payment_type})).reduce((function(t,e){return t+e.paid}),0)},remain:function(){return this.bookings.reduce((function(t,e){return t+e.debt}),0)}},Object(C["c"])("admin",["user"])),Object(C["c"])("facility",["facility"]))},Me=Ae,Te=(i("c10b"),Object(u["a"])(Me,we,Oe,!1,null,"647a8877",null)),Be=Te.exports,Ne=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"confirmation__wrapper"},[t.show?i("div",{staticClass:"backdrop",on:{click:function(e){e.stopPropagation(),t.show=!1}}}):t._e(),i("confirm-header",{on:{back:t.back},scopedSlots:t._u([{key:"main",fn:function(){return[i("p",{staticClass:"order__id"},[t._v("Заказ №"+t._s(t.getOrderId))])]},proxy:!0},{key:"status",fn:function(){return[i("p",{staticClass:"order__status"},[t._v(t._s(t.order.status))])]},proxy:!0}])}),i("confirmation-card",{directives:[{name:"show",rawName:"v-show",value:"В ожидании"===t.order.status,expression:"order.status==='В ожидании'"}],attrs:{fromNelsette:!1},on:{updateLocalStorage:t.updateLocalStorage}}),i("order-info",{attrs:{buttonNeeded:!1},scopedSlots:t._u([{key:"extraInfo",fn:function(){return[i("div",{staticClass:"order__paytype flex"},[i("p",{staticClass:"paytype__key"},[t._v("Способ оплаты")]),i("p",{staticClass:"paytype__value"},[t._v(t._s("cash"===t.order.payment_type?"Наличными":"По реквизитам"))])]),i("div",{staticClass:"order__paid flex"},[i("p",{staticClass:"paid__key"},[t._v("Оплачено")]),i("p",{staticClass:"paid__value"},[t._v(t._s(t.getAllPaid)+" ₸")])])]},proxy:!0}])}),i("div",{directives:[{name:"show",rawName:"v-show",value:t.show,expression:"show"}],staticClass:"confirm__popup"},[i("div",{staticClass:"popup__inner"},[i("i",{staticClass:"fas fa-times",on:{click:function(e){t.show=!1}}}),i("p",{staticClass:"confirm__text"},[t._v("Вы уверены, что хотите отменить все?")]),i("div",{staticClass:"confirm__buttons"},[i("div",{staticClass:"button__yes",on:{click:function(e){return t.cancelOrder(!0)}}},[t._v("Да")]),i("div",{staticClass:"button__no",on:{click:function(e){return t.cancelOrder(!1)}}},[t._v("Нет")])])])]),i("div",{staticClass:"booking__status"},[i("div",{staticClass:"bookingStatus__inner"},[i("p",[t._v("Брони")]),i("div",{staticClass:"statuses"},[i("div",{staticClass:"upcoming",class:{active:"upcoming"===t.active},on:{click:function(e){return t.getBookings("upcoming")}}},[t._v(" Предстоящие: "+t._s(t.activeCount)+" "),i("div",{staticClass:"line"})]),i("div",{staticClass:"finished",class:{active:"finished"===t.active},on:{click:function(e){return t.getBookings("finished")}}},[t._v(" Завершенные: "+t._s(t.finishedCount)+" "),i("div",{staticClass:"line"})]),i("div",{staticClass:"canceled",class:{active:"canceled"===t.active},on:{click:function(e){return t.getBookings("canceled")}}},[t._v(" Отмененные: "+t._s(t.canceledCount)+" "),i("div",{staticClass:"line"})])])])]),i("div",{directives:[{name:"show",rawName:"v-show",value:!t.IsArchive&&"upcoming"===t.active&&0===t.order.deposit&&t.containsUnpaid,expression:"!IsArchive&&active==='upcoming'&&order.deposit===0&&containsUnpaid"}],staticClass:"cancel__order"},[i("p",{staticClass:"cancelOrder__btn",on:{click:function(e){t.show=!0}}},[t._v("Отменить все")])]),i("div",{directives:[{name:"show",rawName:"v-show",value:t.filteredBookings.length>0,expression:"filteredBookings.length>0"}],staticClass:"miniCards"},t._l(t.getOrder.bookings,(function(e,a){return i("MiniOrderCard",{key:a,attrs:{booking:e},on:{addPayment:t.addMoney}})})),1),i("div",{directives:[{name:"show",rawName:"v-show",value:0===t.filteredBookings.length,expression:"filteredBookings.length===0"}],staticClass:"noBookings"},[i("p",{directives:[{name:"show",rawName:"v-show",value:"upcoming"===t.active,expression:"active==='upcoming'"}]},[t._v("Нет предстоящих заказов")]),i("p",{directives:[{name:"show",rawName:"v-show",value:"finished"===t.active,expression:"active==='finished'"}]},[t._v("Нет завершенных заказов")]),i("p",{directives:[{name:"show",rawName:"v-show",value:"canceled"===t.active,expression:"active==='canceled'"}]},[t._v("Нет отмененных заказов")])])],1)},Ie=[],Re=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"confirmation__card"},[i("div",{staticClass:"confirmation__inner"},[t.fromNelsette?t.fromNelsette?i("div",{staticClass:"nelsette__user"},[i("p",{staticStyle:{"margin-bottom":"16px"}},[t._v("Ожидание подтверждения заказа")]),i("p",[t._v(t._s(t.order.client.firstname)+" "+t._s(t.order.client.lastname)+" должен подтвердить заказ зайдя в приложение")])]):t._e():i("div",{staticClass:"ordinary__user"},[i("p",{staticStyle:{"font-weight":"500","margin-bottom":"16px"}},[t._v("Подтверждение заказа")]),i("p",{staticClass:"confirmation__text",staticStyle:{"margin-bottom":"16px"}},[t._v(" На номер телефон клиента был отправлен код, для подтверждения заказа попросите назвать его вам. ")]),i("div",{staticClass:"client_interaction"},[i("div",{staticClass:"call"},[i("a",{attrs:{href:"tel:"+t.order.client.phone}},[t._v("Позвонить")])]),i("div",{staticClass:"text"},[i("a",{attrs:{href:"https://api.whatsapp.com/send?phone="+t.order.client.phone,target:"_blank"}},[t._v("Написать в WhatsApp")])])]),i("div",{staticClass:"confirmation__code"},[i("input",{ref:"one",attrs:{maxlength:"1",type:"text",inputmode:"tel"},on:{keyup:function(e){return t.handleClick("","one","two")}}}),i("input",{ref:"two",attrs:{maxlength:"1",type:"text",inputmode:"tel"},on:{keyup:function(e){return t.handleClick("one","two","three")}}}),i("input",{ref:"three",attrs:{maxlength:"1",type:"text",inputmode:"tel"},on:{keyup:function(e){return t.handleClick("two","three","four")}}}),i("input",{ref:"four",attrs:{maxlength:"1",type:"text",inputmode:"tel"},on:{keyup:function(e){return t.handleClick("three","four","five")}}}),i("input",{ref:"five",attrs:{maxlength:"1",type:"text",inputmode:"tel"},on:{keyup:function(e){return t.handleClick("four","five","")}}})]),i("div",{staticClass:"sendConfirmation",class:{enabled:5===t.code.length},on:{click:function(e){return t.sendOrder()}}},[t._v(" Отправить ")]),t.clicked?i("div",{staticClass:"sendConfirmation__again",staticStyle:{"margin-top":"8px"}},[t.timeOut?t._e():i("p",[t._v("Отправить код повторно ("+t._s(t.getTime)+")")]),t.timeOut?i("p",{on:{click:function(e){return e.stopPropagation(),t.resendCode()}}},[t._v("Отправить повторно")]):t._e()]):t._e()])])])},Ee=[],Fe=(i("4d90"),{props:["fromNelsette"],data:function(){return{code:"",clicked:!1,timeOut:!1,seconds:60,url:window.location.origin.replace("playfields.","")}},methods:{handleClick:function(t,e,i){this.$refs[e].value.length?""!=i?this.$refs[i].focus():this.$refs[e].blur():""!=t&&this.$refs[t].focus(),this.code=this.$refs["one"].value+this.$refs["two"].value+this.$refs["three"].value+this.$refs["four"].value+this.$refs["five"].value},countDown:function(){var t=this,e=setInterval((function(){t.seconds>=1?t.seconds-=1:(t.timeOut=!0,t.seconds=60,clearInterval(e))}),1e3)},resendCode:function(){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.timeOut=!1,e.next=3,G.a.post("".concat(t.url,"/crm/user/").concat(window.$cookies.get("id"),"/order/").concat(t.order.id,"/resend-code"),{client_id:t.order.client.id,code:t.code},{headers:{Authorization:"Bearer ".concat(window.$cookies.get("access_token"))}}).then((function(){t.countDown()}));case 3:case"end":return e.stop()}}),e)})))()},sendOrder:function(){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.clicked=!0,t.countDown(),e.next=4,G.a.post("".concat(t.url,"/crm/user/").concat(window.$cookies.get("id"),"/order/").concat(t.order.id,"/accept"),{client_id:t.order.client.id,code:t.code},{headers:{Authorization:"Bearer ".concat(window.$cookies.get("access_token"))}}).then((function(t){200===t.status&&window.location.reload()})).catch((function(t){t.response.data.error}));case 4:case"end":return e.stop()}}),e)})))()}},computed:Object(g["a"])(Object(g["a"])(Object(g["a"])(Object(g["a"])({},Object(C["b"])("order",["getOrder"])),Object(C["b"])("booking",["getBooking"])),Object(C["c"])("order",["order"])),{},{getTime:function(){return"".concat(Math.floor(this.seconds/60)).padStart(2,"0")+":"+"".concat(this.seconds%60).padStart(2,"0")}})}),Ve=Fe,Ye=(i("0dd8"),Object(u["a"])(Ve,Re,Ee,!1,null,"eae39c18",null)),He=Ye.exports,We=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"confirm__header"},[i("div",{staticClass:"confirmHeader__inner"},[i("div",{staticClass:"confirmHeader__left"},[i("div",{staticClass:"backToOrders"},[i("div",{staticClass:"back__button",on:{click:function(e){return e.stopPropagation(),t.resetStore()}}},[i("i",{staticClass:"fas fa-chevron-left"})])]),i("div",{staticClass:"orderDescription"},[t._t("main"),t._t("status"),t._t("date"),t._t("title")],2)]),i("div",{staticClass:"userInformation"},[i("client-card-mini",{attrs:{client:t.order.client,company:t.order.company}})],1)])])},ze=[],Le={components:{ClientCardMini:Mt},computed:Object(g["a"])({},Object(C["c"])("order",["order"])),methods:{resetStore:function(){this.$store.dispatch("order/resetState"),this.$store.dispatch("booking/resetState"),this.$emit("back")}}},qe=Le,Ue=(i("748e"),Object(u["a"])(qe,We,ze,!1,null,"6851dfa6",null)),Je=Ue.exports,Ze=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"orderInfo"},[t.discountAdd||t.depositAdd||t.depositManage||t.depositRefund||t.hasError?i("div",{staticClass:"backdrop",on:{click:function(e){return e.stopPropagation(),t.closePayment.apply(null,arguments)}}}):t._e(),i("div",{staticClass:"orderInfo__inner"},[i("div",{staticClass:"orderInfo__info"},[i("div",{staticClass:"order__date flex"},[i("p",{staticClass:"order__type"},[t._v(t._s(t.order.type?"Разовая бронь":"Период бронирования"))]),i("p",{staticClass:"date__value"},[t._v(t._s(t.getDateFormat(t.order.start_date))+t._s(t.order.type?"":" - "+t.getDateFormat(t.order.end_date)))])]),i("div",{staticClass:"order__details flex"},[i("p",{staticClass:"details__key"},[t._v("Детали")]),i("div",{staticClass:"details__value"},[i("p",[t._v(t._s(t.booking.start_time.substring(0,5))+" - "+t._s(t.booking.end_time.substring(0,5))+", "+t._s(t.getDayFormat(t.order.start_date)))]),i("p",[t._v(t._s(t.getDuration)+"("+t._s(t.booking.price)+" ₸)")])])]),i("div",{staticClass:"order__field flex"},[i("p",{staticClass:"field__key"},[t._v("Площадка")]),i("p",{staticClass:"field__value"},[t._v(t._s(t.booking.playfield.pf_name))])]),i("div",{staticClass:"order__cost flex"},[i("p",{staticClass:"cost__key"},[t._v("Общая сумма")]),i("p",{staticClass:"cost__value"},[t._v(t._s(t.order.total_price)+" ₸")])]),i("div",{staticClass:"order__paytype flex"},[i("p",{staticClass:"paytype__key"},[t._v("Способ оплаты")]),i("p",{staticClass:"paytype__value"},[t._v(t._s("cash"===t.order.payment_type?"Наличными":"По реквизитам"))])]),i("div",{staticClass:"order__paid flex"},[i("p",{staticClass:"paid__key"},[t._v("Оплачено")]),i("p",{staticClass:"paid__value"},[t._v(t._s(t.order.paid)+" ₸")])]),i("div",{staticClass:"order__discount"},[i("div",{staticClass:"flex"},[i("p",{staticClass:"discount__key"},[t._v("Скидка")]),i("p",{staticClass:"discount__value"},[t._v(t._s(t.order.total_discount)+" ₸")])])]),i("div",{directives:[{name:"show",rawName:"v-show",value:"completed"!==t.order.status,expression:"order.status!=='completed'"}],staticClass:"order__remainingPaylaod flex"},[i("p",{staticClass:"remainingPayload__key"},[t._v("Остаток")]),i("p",{staticClass:"remaininPayload__value"},[t._v(t._s(t.order.residue)+" ₸")])])]),t.order.type?t._e():i("div",{staticClass:"order__deposit"},[i("div",{staticClass:"flex"},[i("p",{staticClass:"deposit__key"},[t._v("Залог")]),i("p",{staticClass:"deposit__value"},[t._v(t._s(""+t.order.deposit)+" ₸")])])]),i("div",{directives:[{name:"show",rawName:"v-show",value:t.order.debt>0,expression:"order.debt>0"}],staticClass:"order__remainingPaylaod flex"},[i("p",{staticClass:"remainingPayload__key bold"},[t._v("Долг")]),i("p",{staticClass:"remaininPayload__value red"},[t._v(t._s(t.order.debt)+" ₸")])]),t.order.type?t._e():i("div",{staticClass:"deposit__button",on:{click:function(e){t.depositManage=!0}}},[t._v("Управление залогом")]),t.depositManage?i("div",{staticClass:"deposit_management"},[i("div",{staticClass:"title"},[i("p",[t._v("Управление залогом")]),i("img",{attrs:{src:"/img/close.svg",alt:"close"},on:{click:function(e){e.stopPropagation(),t.depositManage=!1}}})]),i("div",{staticClass:"manage"},[i("div",{staticClass:"add_deposit"},[i("p",{staticClass:"deposit_amount"},[t._v("Сумма залога: "+t._s(t.order.deposit)+" ₸")]),i("div",{staticClass:"btn",on:{click:function(e){e.stopPropagation(),t.depositManage=!1,t.depositAdd=!0}}},[t._v("Добавить залог")])]),t.order.debt?i("div",{staticClass:"subtract_deposit"},[i("p",{staticClass:"debt_amount"},[t._v("Долг: "),i("span",[t._v(t._s(t.order.debt)+" ₸")])]),i("div",{staticClass:"btn",class:{unabled:t.order.deposit<=0},on:{click:function(e){return e.stopPropagation(),t.substractDeposit()}}},[t._v("Списать залог")])]):t._e()]),i("div",{staticClass:"return_deposit",on:{click:function(e){e.stopPropagation(),t.depositManage=!1,t.depositRefund=!0}}},[t._v("Вернуть залог")])]):t._e(),i("payment-popup",{directives:[{name:"show",rawName:"v-show",value:t.depositAdd,expression:"depositAdd"}],attrs:{remain:t.getRemainMoney,is_crm:t.order.client.is_crm},on:{addPayment:t.addPayment,closePayment:t.closePayment},scopedSlots:t._u([{key:"title",fn:function(){return[i("p",[t._v("Добавьте залог")])]},proxy:!0}])}),t.depositRefund?i("div",{staticClass:"approve_deposit"},[i("div",{staticClass:"title"},[i("p",[t._v("Возврат залога")]),i("img",{attrs:{src:"/img/close.svg",alt:"close"},on:{click:function(e){e.stopPropagation(),t.depositRefund=!1}}})]),i("div",{staticClass:"client_info"},[i("div",{staticClass:"name"},[t._v("Клиент: "+t._s(t.order.client.firstname)+" "+t._s(t.order.client.lastname))]),i("div",{staticClass:"phone"},[t._v("Номер телефона: "+t._s(t.order.client.phone))]),i("div",{staticClass:"amount"},[t._v("Сумма: "+t._s(t.order.deposit)+" ₸")])]),t.order.inquiry?t._e():i("div",{staticClass:"approve",on:{click:function(e){return e.stopPropagation(),t.approveRefund()}}},[t._v(" Подтвердить возврат ")]),t.order.inquiry?i("div",{staticClass:"approved"},[t._v(" Ожидание подтверждения клиента ")]):t._e()]):t._e()],1),t.hasError?i("error-card",{attrs:{message:t.errorMessage},on:{close:t.closePayment}}):t._e()],1)},Ge=[],Ke=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"error_card"},[i("div",{staticClass:"error_title"},[t._v(" ОШИБКА ")]),i("div",{staticClass:"error_message"},[t._v(" "+t._s(t.message)+" ")]),i("div",{staticClass:"button_wrapper"},[i("span",{staticClass:"error_button",on:{click:function(e){return e.stopPropagation(),t.close.apply(null,arguments)}}},[t._v("ХОРОШО")])])])},Qe=[],Xe={props:["message"],methods:{close:function(){this.$emit("close")}}},ti=Xe,ei=(i("8678"),Object(u["a"])(ti,Ke,Qe,!1,null,"1dc2e042",null)),ii=ei.exports,ai={components:{ErrorCard:ii,PaymentPopup:V},props:["buttonNeeded"],data:function(){return{discountAdd:!1,depositAdd:!1,depositManage:!1,depositRefund:!1,hasError:!1,errorMessage:"",url:window.location.origin.replace("playfields.","")}},methods:{addPayment:function(t){this.discountAdd?(this.$store.dispatch("order/setBookingDiscount",t),this.$store.dispatch("booking/setBookingDiscount",t,this.booking.id)):this.depositAdd&&G.a.post("".concat(this.url,"/crm/user/").concat(window.$cookies.get("id"),"/order/").concat(this.order.id,"/payment"),{deposit:t},{headers:{Authorization:"Bearer ".concat(window.$cookies.get("access_token"))}}).then((function(){return window.location.reload()})),this.discountAdd=!1,this.depositAdd=!1},closePayment:function(){this.discountAdd=!1,this.depositAdd=!1,this.depositManage=!1,this.depositRefund=!1,this.hasError=!1},addDeposit:function(){this.depositAdd=!0},getDateFormat:function(t){return T(t).locale("ru").format("DD MMMM")},getDayFormat:function(t){return T(t).locale("ru").format("dddd")},substractDeposit:function(){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,G.a.post("".concat(t.url,"/crm/user/").concat(window.$cookies.get("id"),"/order/").concat(t.order.id,"/deposit-nullify"),{},{headers:{Authorization:"Bearer ".concat(window.$cookies.get("access_token"))}}).then((function(){return window.location.reload()})).catch((function(e){t.depositManage=!1,t.hasError=!0,t.errorMessage=e.response.data.error}));case 2:case"end":return e.stop()}}),e)})))()},approveRefund:function(){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,G.a.post("".concat(t.url,"/crm/user/").concat(window.$cookies.get("id"),"/order/").concat(t.order.id,"/refund-inquiry"),{},{headers:{Authorization:"Bearer ".concat(window.$cookies.get("access_token"))}}).then((function(){return window.location.reload()})).catch((function(e){t.depositRefund=!1,t.hasError=!0,t.errorMessage=e.response.data.error}));case 2:case"end":return e.stop()}}),e)})))()}},computed:Object(g["a"])(Object(g["a"])(Object(g["a"])(Object(g["a"])({},Object(C["c"])("booking",["booking"])),Object(C["c"])("order",["order"])),Object(C["b"])("order",["getRemainMoney","getAllDiscount","getAllCost"])),Object(C["b"])("booking",["getDuration","getPlayfieldName"]))},si=ai,ni=(i("0bde"),Object(u["a"])(si,Ze,Ge,!1,null,"a44dcb16",null)),oi=ni.exports,ri=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"mini__card",class:{fullpay:0===t.getRemainMoney&&t.orderValid},on:{click:function(e){return e.stopPropagation(),t.goToBookingCard()}}},[t.showRefund||t.openPopup?i("div",{staticClass:"backdrop",on:{click:function(e){e.stopPropagation(),t.showRefund=!1,t.openPopup=!1}}}):t._e(),i("div",{staticClass:"miniCard__inner"},[i("div",{staticClass:"miniCard__top"},[i("span",{staticClass:"order__date"},[t._v(t._s(t.capitalizeAndFormat(t.booking.date)))]),i("span",{directives:[{name:"show",rawName:"v-show",value:t.orderValid&&"completed"!==t.booking.status,expression:"orderValid&&booking.status!=='completed'"}],staticClass:"order__edit",on:{click:function(e){return e.stopPropagation(),t.goToEdit()}}},[i("i",{staticClass:"fas fa-pen"})])]),i("div",{staticClass:"miniCard__bottom"},[i("div",{staticClass:"bottom__description"},[i("p",[t._v(t._s(t.booking.start_time.substring(0,5))+" - "+t._s(t.booking.end_time.substring(0,5)))]),i("p",[t._v(t._s(t.booking.playfield.pf_name))]),i("p",{directives:[{name:"show",rawName:"v-show",value:t.orderValid,expression:"orderValid"}]},[t._v("Остаток: "+t._s(t.booking.debt)+"₸")]),i("p",{directives:[{name:"show",rawName:"v-show",value:"completed"===t.booking.status&&t.booking.debt,expression:"booking.status==='completed'&&booking.debt"}],staticClass:"completed"},[t._v("Долг: "),i("span",[t._v(t._s(t.booking.debt)+" ₸")])]),i("p",{directives:[{name:"show",rawName:"v-show",value:"canceled"===t.booking.status&&t.booking.paid>0,expression:"booking.status==='canceled'&&booking.paid>0"}],staticClass:"canceled"},[t._v("Возврат клиенту: "),i("span",[t._v(t._s(t.booking.paid)+" ₸")])])]),t.getRemainMoney>0&&t.orderValid?i("div",{staticClass:"bottom__payment",on:{click:function(e){return e.stopPropagation(),t.setBooking()}}},[t._v(" Добавить оплату ")]):t._e()]),"canceled"===t.booking.status&&t.booking.paid>0&&!t.booking.inquiry?i("div",{staticClass:"refund",on:{click:function(e){e.stopPropagation(),t.showRefund=!0}}},[t._v(" Оформить возврат ")]):t._e(),"canceled"===t.booking.status&&t.booking.inquiry?i("div",{staticClass:"approved"},[t._v(" Ожидание подтверждения клиента ")]):t._e()]),t.showRefund?i("div",{staticClass:"refund_popup"},[i("div",{staticClass:"title"},[i("p",[t._v("Возврат средств клиенту")]),i("img",{attrs:{src:"/img/close.svg",alt:"close"},on:{click:function(e){return e.stopPropagation(),t.closeRefund()}}})]),i("div",{staticClass:"client_info"},[i("div",{staticClass:"name"},[t._v("Клиент: "+t._s(t.order.client.firstname)+" "+t._s(t.order.client.lastname))]),i("div",{staticClass:"phone"},[t._v("Номер телефона: "+t._s(t.order.client.phone))]),i("div",{staticClass:"amount"},[t._v("Сумма: "+t._s(t.booking.paid)+" ₸")])]),t.booking.inquiry?t._e():i("div",{staticClass:"approve",on:{click:function(e){return e.stopPropagation(),t.approveRefund()}}},[t._v(" Подтвердить возврат ")]),t.booking.inquiry?i("div",{staticClass:"approved"},[t._v(" Ожидание подтверждения клиента ")]):t._e()]):t._e(),t.openPopup?i("payment-popup",{attrs:{remain:t.getRemainMoney,is_crm:t.order.client.is_crm},on:{addPayment:t.addPayment,closePayment:t.closePayment},scopedSlots:t._u([{key:"title",fn:function(){return[i("p",[t._v("Добавьте оплату")])]},proxy:!0}],null,!1,244481939)}):t._e()],1)},ci=[],li={props:["booking","backdrop"],components:{PaymentPopup:V},data:function(){return{openPopup:!1,showRefund:!1,url:window.location.origin.replace("playfields.","")}},methods:{capitalizeAndFormat:function(t){return t=T(t).locale("ru").format("dd, DD MMMM"),t.replace(t[0],t[0].toUpperCase())},setBooking:function(){this.openPopup=!0,this.$store.dispatch("booking/setBooking",this.booking),this.$emit("backdropHandle",!0)},addPayment:function(t){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function i(){return regeneratorRuntime.wrap((function(i){while(1)switch(i.prev=i.next){case 0:return e.openPopup=!1,i.next=3,e.$store.dispatch("booking/setBookingPaid",{money:t,id:e.booking.id});case 3:window.location.reload();case 4:case"end":return i.stop()}}),i)})))()},closePayment:function(){this.openPopup=!1},goToBookingCard:function(){this.setBooking(),this.$router.push({name:"singleBooking",params:{id:this.order.id,bookingid:this.booking.id}})},goToEdit:function(){this.$store.dispatch("booking/setBooking",this.booking),this.$router.push({path:"/order/:".concat(this.order.id,"/booking/:").concat(this.booking.id,"/edit")})},approveRefund:function(){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,G.a.post("".concat(t.url,"/crm/user/").concat(window.$cookies.get("id"),"/reservation/").concat(t.booking.id,"/refund-inquiry"),{},{headers:{Authorization:"Bearer ".concat(window.$cookies.get("access_token"))}}).then((function(){return window.location.reload()})).catch((function(e){t.showRefund=!1,t.hasError=!0,t.errorMessage=e.response.data.error}));case 2:case"end":return e.stop()}}),e)})))()},closeRefund:function(){this.showRefund=!1}},computed:Object(g["a"])(Object(g["a"])({},Object(C["c"])("order",["order"])),{},{orderValid:function(){return"activated"===this.booking.status},getRemainMoney:function(){return this.booking.debt}})},di=li,ui=(i("21a4"),Object(u["a"])(di,ri,ci,!1,null,"5bbb1d57",null)),pi=ui.exports,fi={data:function(){return{orders:JSON.parse(localStorage.getItem("orderInfo")),show:!1,answer:!1,active:"upcoming",filteredBookings:[],activeCount:0,canceledCount:0,finishedCount:0}},created:function(){this.getBookings(this.active)},mounted:function(){window.scrollTo(0,0),this.setBookingStatusCount()},components:{ConfirmHeader:Je,ConfirmationCard:He,OrderInfo:oi,MiniOrderCard:pi},methods:{back:function(){this.$router.push({name:"orders"})},addMoney:function(t,e){for(var i=0;i<this.getOrder.bookings.length;i++)if(this.getOrder.bookings[i].bookingId===e){var a=this.getOrder.bookings;a[i]=Object(g["a"])(Object(g["a"])({},this.getOrder.bookings[i]),{},{paid:this.getOrder.bookings[i].paid+t}),this.$store.dispatch("booking/setBookingPaid",t),this.$store.dispatch("order/replaceBooking",a);break}this.updateLocalStorage(this.getOrder)},cancelOrder:function(t){var e=this;t?(this.getOrder.bookings.forEach((function(t){0===t.paid&&e.isMoreThanSevenDays(t.date)&&(t.status="Отменено")})),this.allBookingsCanceled&&this.$store.dispatch("order/setStatus","Отменено"),this.updateLocalStorage(this.getOrder),this.$store.dispatch("order/resetState"),this.$store.dispatch("booking/resetState")):this.show=!1},updateLocalStorage:function(t){for(var e=t.orderId,i=0;i<this.orders.length;i++)this.orders[i].orderId==e&&(this.orders[i]=t);localStorage.setItem("orderInfo",JSON.stringify(this.orders)),this.getBookings(this.active),this.setBookingStatusCount()},getBookings:function(t){switch(this.active=t,this.active){case"upcoming":this.filteredBookings=this.getOrder.bookings.filter((function(t){return T(t.date).diff(T(),"day",!0)>0&&"Отменено"!==t.status}));break;case"finished":this.filteredBookings=this.getOrder.bookings.filter((function(t){return"Завершено"===t.status}));break;case"canceled":this.filteredBookings=this.getOrder.bookings.filter((function(t){return"Отменено"===t.status}));break}},isMoreThanSevenDays:function(t){return T(t).diff(T())>7},setBookingStatusCount:function(){this.activeCount=this.getOrder.bookings.filter((function(t){return"Потверждено"===t.status||"В ожидании"===t.status})).length,console.log(this.activeCount),this.canceledCount=this.getOrder.bookings.filter((function(t){return"Отменено"===t.status})).length,this.finishedCount=this.getOrder.bookings.filter((function(t){return"Завершено"===t.status})).length}},computed:Object(g["a"])(Object(g["a"])(Object(g["a"])(Object(g["a"])({},Object(C["c"])("order",["order"])),Object(C["b"])("order",["getAllPaid","getOrder"])),Object(C["b"])("booking",["getRemainMoney"])),{},{getBooking:function(){var t=this;return this.getOrder.bookings.filter((function(e){return e.bookingId===t.bId}))[0]},getOrderId:function(){return this.order.orderId.length>5?this.order.orderId.substring(0,5)+"...":this.order.orderId},isPaid:function(){return this.getAllPaid>0},IsArchive:function(){return"Отменено"===this.order.status||"Завершено"===this.order.status},allBookingsCanceled:function(){var t=this.getOrder.bookings.length;return this.getOrder.bookings.filter((function(t){return"Отменено"===t.status})).length===t},containsUnpaid:function(){return 0!==this.filteredBookings.filter((function(t){return 0===t.paid})).length}})},_i=fi,hi=(i("a93b"),Object(u["a"])(_i,Ne,Ie,!1,null,"4bcc39f2",null)),vi=hi.exports,mi=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"order__view"},[i("Spinner",{attrs:{start:t.start}}),i("MainHeader",{on:{changed:t.changed},scopedSlots:t._u([{key:"title",fn:function(){return[i("p",{staticClass:"title"},[t._v("Заказы")])]},proxy:!0}])}),i("div",{staticClass:"orderView__header"},[i("div",{staticClass:"header__inner"},[i("div",{staticClass:"order__status"},[t.getWaiting.length?i("div",{staticClass:"order__waiting",class:"pending"===t.active?"active":"",on:{click:function(e){return t.makeActive("pending")}}},[i("p",[t._v("В ожидании")]),i("p",{staticClass:"amount"},[t._v(t._s(t.getWaiting.length))])]):t._e(),i("div",{staticClass:"order__confirmed",class:"activated"===t.active?"active":"",on:{click:function(e){return t.makeActive("activated")}}},[i("p",[t._v("Активные")]),i("p",{staticClass:"amount"},[t._v(t._s(t.getConfirmed.length))])]),i("div",{staticClass:"order__archive",class:"archive"===t.active?"active":"",on:{click:function(e){return t.makeActive("archive")}}},[i("p",[t._v("Архив")])])])])]),i("OrderCardWrapper",{attrs:{status:t.active,filteredOrders:t.filteredOrders}}),i("BottomMenu",{attrs:{active:"orders"}})],1)},gi=[],yi=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"orderCard__wrapper"},t._l(t.filteredOrders,(function(t,e){return i("OrderCard",{key:e,attrs:{order:t}})})),1)},bi=[],ki=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"order__card",on:{click:function(e){return t.singleOrder()}}},[i("div",{staticClass:"orderCard__inner"},[i("div",{staticClass:"card__top"},[i("div",{staticClass:"little__status"},[i("p",{directives:[{name:"show",rawName:"v-show",value:"pending"===t.order.status,expression:"order.status==='pending'"}],staticClass:"status pending"},[t._v("В ожидании")]),i("p",{directives:[{name:"show",rawName:"v-show",value:"completed"===t.order.status,expression:"order.status==='completed'"}],staticClass:"status completed"},[t._v("Завершен")]),i("p",{directives:[{name:"show",rawName:"v-show",value:"canceled"===t.order.status,expression:"order.status==='canceled'"}],staticClass:"status canceled"},[t._v("Отменен")]),i("p",{directives:[{name:"show",rawName:"v-show",value:"activated"===t.order.status,expression:"order.status==='activated'"}],staticClass:"status activated"},[t._v("Активный")]),i("p",{directives:[{name:"show",rawName:"v-show",value:"rejected"===t.order.status,expression:"order.status==='rejected'"}],staticClass:"status rejected"},[t._v("Отклонен")])]),i("div",{staticClass:"created_date"},[i("p",[t._v(t._s(t.formatDateFull))])])]),i("div",{staticClass:"card__little"},[i("div",{staticClass:"little__left"},[i("p",{staticClass:"order__id"},[t._v("Заказ №"+t._s(t.order.id))]),t.order.bookings_count>1?i("p",{staticClass:"booking__amount"},[t._v("Брони: "+t._s(t.order.bookings_count))]):t._e()]),t._m(0)]),i("div",{staticClass:"card__content"},[i("div",{staticClass:"content__left"},[i("p",{staticClass:"date"},[t._v(t._s(t.formatDate(t.order.start_date))+t._s(t.order.type?"":" - "+t.formatDate(t.order.end_date)))]),i("p",{staticClass:"time"},[t._v(t._s(t.getTime))]),i("p",{staticClass:"field"},[t._v(t._s(t.order.booking.playfield.pf_name))])]),i("div",{staticClass:"content__right"},[t.order.client?i("ClientCardMini",{attrs:{client:t.order.client,company:t.order.company}}):t._e(),t.debts_needed?i("div",{staticClass:"debts_btn"},[i("div",{staticClass:"debts"},[t.order.debt>0?i("div",{staticClass:"client_debt"},[t._v(t._s(t.order.debt)+" ₸")]):t._e(),t.order.debt<0?i("div",{staticClass:"fc_debt"},[t._v(t._s(t.order.debt)+" ₸")]):t._e(),t.order.deposit?i("div",{staticClass:"deposit"},[t._v(t._s(t.order.deposit)+" ₸")]):t._e()])]):t._e()],1)])])])},Ci=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"little__right"},[i("i",{staticClass:"fas fa-chevron-right"})])}],wi={props:["order","debts_needed"],components:{ClientCardMini:Mt},data:function(){return{show:!1}},methods:{formatDate:function(t){return T(t).locale("ru").format("DD MMMM")},singleOrder:function(){this.$router.push({name:"singleOrder",params:{id:this.order.id}})},closePopup:function(){this.show=!1}},computed:{formatDateFull:function(){return T(this.order.created_at).format("DD.MM.YYYY, HH:mm")},getTime:function(){return"".concat(this.order.booking.start_time.substring(0,5)," - ").concat(this.order.booking.end_time.substring(0,5))}}},Oi=wi,xi=(i("882e"),Object(u["a"])(Oi,ki,Ci,!1,null,"f7403b10",null)),ji=xi.exports,Pi={props:["status","filteredOrders"],components:{OrderCard:ji}},Di=Pi,$i=(i("e2fe"),Object(u["a"])(Di,yi,bi,!1,null,"47bdae30",null)),Si=$i.exports,Ai={components:{BottomMenu:pe,OrderCardWrapper:Si,MainHeader:te,Spinner:f},data:function(){return{active:"pending",orders:[],filteredOrders:[],today:T().locale("ru"),start:!0,url:window.location.origin.replace("playfields.","")}},watch:{"facility.id":function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(){var e=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return window.scrollTo(0,0),t.next=3,this.getOrders();case 3:this.getWaiting.length>0?(this.filteredOrders=this.getWaiting,this.active="pending"):(this.filteredOrders=this.getConfirmed,this.active="activated"),this.$nextTick((function(){return e.start=!1}));case 5:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},created:function(){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return window.scrollTo(0,0),e.next=3,t.getOrders();case 3:t.getWaiting.length>0?(t.filteredOrders=t.getWaiting,t.active="pending"):(t.filteredOrders=t.getConfirmed,t.active="activated"),t.$nextTick((function(){return t.start=!1}));case 5:case"end":return e.stop()}}),e)})))()},methods:{getOrders:function(){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,G.a.get("".concat(t.url,"/crm/user/").concat(window.$cookies.get("id"),"/facility/").concat(sessionStorage.getItem("active_facility"),"/orders-all"),{headers:{Authorization:"Bearer ".concat(window.$cookies.get("access_token"))}}).then((function(e){t.orders=e.data.orders}));case 2:case"end":return e.stop()}}),e)})))()},makeActive:function(t){switch(this.active=t,this.active){case"activated":this.filteredOrders=this.getConfirmed;break;case"pending":this.filteredOrders=this.getWaiting;break;case"archive":this.filteredOrders=this.getArchive;break}},changed:function(t){var e=this;this.start=!0,this.$store.dispatch("facility/resetFacility",parseInt(t)).then((function(){return e.start=!1})),sessionStorage.setItem("active_facility",parseInt(t))}},computed:Object(g["a"])(Object(g["a"])({},Object(C["c"])("facility",["facility"])),{},{getConfirmed:function(){return this.orders.filter((function(t){return"activated"===t.status}))},getWaiting:function(){return this.orders.filter((function(t){return"pending"===t.status}))},getArchive:function(){return this.orders.filter((function(t){return"canceled"===t.status||"completed"===t.status||"rejected"===t.status}))}})},Mi=Ai,Ti=(i("dcb2"),Object(u["a"])(Mi,mi,gi,!1,null,"f24cfb66",null)),Bi=Ti.exports,Ni=function(){var t=this,e=t.$createElement,i=t._self._c||e;return t.sending?t._e():i("div",{staticClass:"single__order"},[t.show||t.showConditions?i("div",{staticClass:"backdrop",on:{click:function(e){e.stopPropagation(),t.show=!1,t.showConditions=!1}}}):t._e(),i("ConfirmHeader",{on:{back:t.back},scopedSlots:t._u([{key:"main",fn:function(){return[i("p",{staticClass:"order__id"},[t._v("Заказ №"+t._s(t.order.id))])]},proxy:!0},{key:"status",fn:function(){return[i("p",{staticClass:"order__status"},[t._v(t._s(t.getOrderStatus))])]},proxy:!0}],null,!1,3984992745)}),"pending"!==t.order.status||t.order.is_owner?t._e():i("confirmation-card",{attrs:{fromNelsette:!t.order.client.is_temporary}}),"pending"===t.order.status&&t.order.is_owner?i("div",{staticClass:"client_interaction"},[i("div",{staticClass:"call"},[i("a",{attrs:{href:"tel:"+t.order.client.phone}},[t._v("Позвонить")])]),i("div",{staticClass:"text"},[i("a",{attrs:{href:"https://api.whatsapp.com/send?phone="+t.order.client.phone,target:"_blank"}},[t._v("Написать в WhatsApp")])])]):t._e(),i("div",{staticClass:"toggle__mode"},[i("div",{staticClass:"information",class:"info"===t.activeTab?"activeTab":"",on:{click:function(e){t.activeTab="info"}}},[t._v(" Информация "),i("div",{staticClass:"bottomLine"})]),i("div",{staticClass:"history",class:"history"===t.activeTab?"activeTab":"",on:{click:function(e){t.activeTab="history"}}},[t._v(" История "),i("div",{staticClass:"bottomLine"})])]),"info"===t.activeTab?i("div",{staticClass:"info"},[i("OrderInfo",{attrs:{buttonNeeded:!1}}),i("div",{directives:[{name:"show",rawName:"v-show",value:t.show,expression:"show"}],staticClass:"confirm__popup"},[i("div",{staticClass:"popup__inner"},[i("i",{staticClass:"fas fa-times",on:{click:function(e){t.show=!1}}}),i("p",{staticClass:"confirm__text"},[t._v("Вы уверены, что хотите отменить все?")]),i("div",{staticClass:"confirm__buttons"},[i("div",{staticClass:"button__yes",on:{click:function(e){return t.cancelOrder(!0)}}},[t._v("Да")]),i("div",{staticClass:"button__no",on:{click:function(e){return t.cancelOrder(!1)}}},[t._v("Нет")])])])]),t.order.is_owner&&t.order.is_owner&&!t.order.type&&"pending"===t.order.status?t._e():i("div",{staticClass:"booking__status"},[i("div",{staticClass:"bookingStatus__inner"},[i("p",[t._v("Брони")]),i("div",{staticClass:"statuses"},[i("div",{staticClass:"upcoming",class:{active:"upcoming"===t.active},on:{click:function(e){t.active="upcoming"}}},[t._v(" Предстоящие: "+t._s(t.activeCount)+" "),i("div",{staticClass:"line"})]),i("div",{staticClass:"finished",class:{active:"finished"===t.active},on:{click:function(e){t.active="finished"}}},[t._v(" Завершенные: "+t._s(t.finishedCount)+" "),i("div",{staticClass:"line"})]),i("div",{staticClass:"canceled",class:{active:"canceled"===t.active},on:{click:function(e){t.active="canceled"}}},[t._v(" Отмененные: "+t._s(t.canceledCount)+" "),i("div",{staticClass:"line"})])])])]),"activated"===t.order.status&&"upcoming"===t.active&&this.filteredBookings.length?i("div",{staticClass:"cancel__order"},[i("p",{staticClass:"cancel__order_btn",class:{canCancel:0===t.order.deposit&&"activated"===t.order.status},on:{click:function(e){t.show=!0}}},[t._v("Отменить брони")]),i("p",{staticClass:"cancel__order_conditions",on:{click:function(e){t.showConditions=!0}}},[t._v("Условия отмены")])]):t._e(),t.showConditions?i("div",{staticClass:"condition__popup"},[i("div",{staticClass:"condition__popup_inner"},[i("p",{staticClass:"condition__title"},[t._v("Отмена броней")]),i("p",{staticClass:"condition one"},[t._v('Нажатием кнопки "Отменить брони", вы отменяете все брони за которые не была внесена предоплата.')]),i("div",{staticClass:"condition two"},[t._v("Отмена броней невозможна если был внесён залог.")]),i("div",{staticClass:"close__popup",on:{click:function(e){t.showConditions=!1}}},[t._v("Закрыть")])])]):t._e(),"pending"===t.order.status&&t.order.is_owner?i("div",{ref:"booking_availibilty",staticClass:"booking_availability"},[i("div",{staticClass:"content"},[t._l(t.bookings,(function(e){return[i("date-header",{key:e.date,attrs:{date:t.getDate(e.date)}}),i("simple-timetable",{key:e.id,attrs:{date:t.getDate(e.date),reservation:e,client:t.order.client},on:{move:t.move}})]}))],2)]):t._e(),t.order.is_owner&&t.order.is_owner&&!t.order.type&&"pending"===t.order.status?t._e():i("div",{staticClass:"miniCards"},t._l(t.filteredBookings,(function(t,e){return i("MiniOrderCard",{key:e,attrs:{booking:t}})})),1),0===t.filteredBookings.length?i("div",{staticClass:"noBookings"},[i("p",{directives:[{name:"show",rawName:"v-show",value:"upcoming"===t.active,expression:"active==='upcoming'"}]},[t._v("Нет предстоящих заказов")]),i("p",{directives:[{name:"show",rawName:"v-show",value:"finished"===t.active,expression:"active==='finished'"}]},[t._v("Нет завершенных заказов")]),i("p",{directives:[{name:"show",rawName:"v-show",value:"canceled"===t.active,expression:"active==='canceled'"}]},[t._v("Нет отмененных заказов")])]):t._e(),"pending"===t.order.status&&t.order.is_owner?i("div",{staticClass:"order_actions"},[i("div",{staticClass:"order_accept",on:{click:function(e){return e.stopPropagation(),t.acceptOrder()}}},[t._v("Подтвердить")]),i("div",{staticClass:"order_decline",on:{click:function(e){return e.stopPropagation(),t.declineOrder()}}},[t._v("Отклонить")])]):t._e()],1):t._e(),"history"===t.activeTab?i("div",{staticClass:"history_info"},[i("order-history",{attrs:{logs:t.logs}})],1):t._e()],1)},Ii=[],Ri=function(){var t=this,e=t.$createElement,i=t._self._c||e;return t.start?t._e():i("div",{staticClass:"timetable"},[i("div",{staticClass:"container"},[i("div",{staticClass:"timetable__content"},[i("div",{staticClass:"timetable__fields"},[i("div",{staticClass:"timetable__field empty"}),t._l(t.facilityPlayfields,(function(e,a){return i("div",{key:e.id,staticClass:"timetable__field",style:"width:"+(t.isPhone?"37px":"100px")},[t._v(" "+t._s(t.isPhone?"№ "+(a+1):e.pf_name)+" ")])}))],2),i("div",{staticClass:"timetable__time__cells"},[i("div",{staticClass:"timetable__timeline"},t._l(t.timelines,(function(e,a){return i("div",{key:a,staticClass:"timetable__time"},[i("p",[t._v(t._s(e))])])})),0),t._l(t.facilityPlayfields,(function(e){return i("div",{key:e.id,staticClass:"timetable__cells"},t._l(t.timelines.slice(0,-1),(function(a,s){return i("SimpleCell",{key:s,class:{notAvailable:!t.isAvailable},style:t.timelineStyles[e.id][s],attrs:{value:t.cellValues[e.id][s]}})})),1)}))],2)])])])},Ei=[],Fi=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"timetable__cell",class:{reserved:t.value.isReserved,intersect:"intersect"===t.value.is_pending,"no-intersect":"no-intersect"===t.value.is_pending},on:{click:function(e){return e.stopPropagation(),t.handleClick()}}},[t._v(" "+t._s(t.value.value)+" ")])},Vi=[],Yi={props:["field","index","value","nextBooking"],methods:{handleClick:function(){this.value.isReserved?this.$emit("showInfoAboutOrder",this.value.booking_id):this.$emit("makeOrder")}}},Hi=Yi,Wi=(i("d736"),Object(u["a"])(Hi,Fi,Vi,!1,null,"0bbe5f04",null)),zi=Wi.exports,Li={components:{SimpleCell:zi},props:["id","date","reservation","client"],data:function(){return{timelines:[],today:T(),timelineStyles:{},cellValues:{},leftScroll:0,orders:[],start:!1,bookings:[],url:window.location.origin.replace("playfields.","")}},mounted:function(){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.generateTime(),t.disableTime(),e.next=4,t.getDailyOrders();case 4:t.getPrice(),t.getOrders(),t.moveRedLine(),t.$emit("move",t.leftScroll);case 8:case"end":return e.stop()}}),e)})))()},methods:{generateTime:function(){for(var t=5;t<29;t++){var e=t%24,i=e<10?"0".concat(e):"".concat(e);this.timelines.push("".concat(i,":00")),this.timelines.push("".concat(i,":30"))}this.timelines.push(this.timelines[0])},moveRedLine:function(){var t=49,e=1,i=this.isPhone?67:130,a=this.timelines.indexOf(this.reservation.start_time.substring(0,5)),s=i+Math.floor(t/2)+(t+e)*a;this.leftScroll=s},disableTime:function(){var t=this;this.timelineStyles=[],this.facilityPlayfields.forEach((function(e){for(var i=[],a=t.timelines.indexOf(t.infoAboutDay[e.id].start_time.substring(0,5)),s=t.timelines.indexOf(t.infoAboutDay[e.id].end_time.substring(0,5)),n=0;n<t.timelines.length-1;n++){if(a>=s)for(var o=s;o<a;o++)i[o]="pointer-events: none; background: #2F5061";else{for(var r=0;r<a;r++)i[r]="pointer-events: none; background: #2F5061";for(var c=s;c<t.timelines.length;c++)i[c]="pointer-events: none; background: #2F5061"}t.timelineStyles[e.id]=i}}))},getPrice:function(){var t=this,e=function(e){var i=Object.keys(t.infoAboutDay[e].prices),a=new Array(t.timelines.length).fill({value:"",isReserved:!1});i.forEach((function(i){return a[t.timelines.indexOf(i)]={value:t.infoAboutDay[e].prices[i],isReserved:!1}})),t.cellValues[e]=a};for(var i in this.infoAboutDay)e(i)},getDailyOrders:function(){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.start=!0,e.next=3,G.a.get("".concat(t.url,"/crm/user/").concat(window.$cookies.get("id"),"/facility/").concat(sessionStorage.getItem("active_facility"),"/").concat(t.date.format("DD-MM-YYYY")),{headers:{Authorization:"Bearer ".concat(window.$cookies.get("access_token"))}}).then((function(e){return t.bookings=e.data.bookings})).finally((function(){return t.start=!1}));case 3:case"end":return e.stop()}}),e)})))()},getOrders:function(){var t=this;this.bookings.forEach((function(e){for(var i=t.timelines.indexOf(e.end_time.substring(0,5)),a=t.timelines.indexOf(e.start_time.substring(0,5)),s=e.playfield.id,n=a;n<i;n++)t.cellValues[s]&&(t.cellValues[s][n]={value:e.client.firstname,isReserved:!0,booking_id:e.id})}));for(var e=this.timelines.indexOf(this.reservation.end_time.substring(0,5)),i=this.timelines.indexOf(this.reservation.start_time.substring(0,5)),a=this.reservation.playfield.id,s=i;s<e;s++)this.cellValues[a][s].isReserved?this.cellValues[a][s]=Object(g["a"])(Object(g["a"])({},this.cellValues[a][s]),{},{isReserved:!0,booking_id:this.id,is_pending:"intersect"}):this.cellValues[a][s]=Object(g["a"])(Object(g["a"])({},this.cellValues[a][s]),{},{isReserved:!0,booking_id:this.id,is_pending:"no-intersect"});this.cellValues=Object(g["a"])({},this.cellValues)}},computed:Object(g["a"])(Object(g["a"])(Object(g["a"])(Object(g["a"])({},Object(C["c"])("facility",["facility"])),Object(C["c"])("order",["order"])),Object(C["c"])("booking",["booking"])),{},{isAvailable:function(){return this.date.diff(this.today,"day",!1)>=0},isEmpty:function(){return 0===Object.keys(this.cellValues).length},isToday:function(){return this.date.format("DD-MM-YYYY")===this.today.format("DD-MM-YYYY")},facilityPlayfields:function(){var t,e,i=this;return this.order.type?null!==(t=null===(e=this.facility.playfields)||void 0===e?void 0:e.filter((function(t){if(null!==t.periods_data)return!t.periods_data[i.date.day()].dayoff})))&&void 0!==t?t:[]:this.facility.playfields.filter((function(t){return t.id===i.booking.playfield.id}))},isPhone:function(){var t=window.innerWidth>0?window.innerWidth:screen.width;return t<768},infoAboutDay:function(){var t=this.date.day(),e={};return this.facilityPlayfields.forEach((function(i){e=Object(g["a"])(Object(g["a"])({},e),{},Object(at["a"])({},i.id,i.periods_data[t]))})),e}})},qi=Li,Ui=(i("7cc2"),Object(u["a"])(qi,Ri,Ei,!1,null,null,null)),Ji=Ui.exports,Zi=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"order_logs"},[t._l(t.logs,(function(t){return[i("order-history-card",{key:t.id,attrs:{log:t}})]}))],2)},Gi=[],Ki=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"order_history"},[t.log.initiator?i("div",{staticClass:"initiator"},[i("div",{staticClass:"initiator_img"},[i("img",{attrs:{src:t.url+"/"+t.photo,alt:"photo"}})])]):t._e(),i("div",{staticClass:"log"},[i("div",{staticClass:"date"},[t._v(t._s(t.dateFormat))]),i("div",{staticClass:"information"},[4===t.log.type?i("div",{staticClass:"order__confirmed"},[i("p",{staticClass:"action_title"},[t._v(t._s(t.initiator)+" подтвердил(-а) заказ:")]),i("div",{staticClass:"order_information"},[i("div",{staticClass:"order_date"},[t._v(t._s(t.log.data.order_type?"Разовая бронь":"Долгосрочная бронь")+": "+t._s(t.order_dates))]),i("div",{staticClass:"order_details"},[t._v("Детали: "+t._s(t.details))]),i("div",{staticClass:"order_playfield"},[t._v("Площадка: "+t._s(t.log.data.playfield))]),i("div",{staticClass:"order_price"},[t._v("Общая сумма: "+t._s(t.log.data.total_price)+" ₸")]),i("div",{staticClass:"order_paytype"},[t._v("Способ оплаты: "+t._s("cash"===t.log.data.payment_type?"Наличными":"По реквизитам"))]),i("div",{staticClass:"order_discount"},[t._v("Скидка: "+t._s(t.log.data.total_discount)+" ₸")])])]):t._e(),11===t.log.type?i("div",{staticClass:"order_completed"},[t.log.data.debt>0?i("p",{staticClass:"client_debt"},[t._v("Заказ завершен. Долг клиента "),i("span",[t._v(t._s(t.log.data.debt)+" ₸")])]):t._e(),t.log.data.debt<0?i("p",{staticClass:"playfield_debt"},[t._v("Заказ завершена. Долг площадки "),i("span",[t._v(t._s(t.log.data.debt)+" ₸")])]):t._e(),0===t.log.data.debt?i("p",{staticClass:"no_debt"},[i("img",{attrs:{src:"/img/check.svg",alt:"no-debt"}}),t._v(" Заказ завершена. Долгов нет ")]):t._e()]):t._e(),1===t.log.type?i("div",{staticClass:"order_request"},[i("p",{staticClass:"action_title"},[t._v(t._s(t.initiator)+" отправил(-а) запрос на создание заказа")])]):t._e(),10===t.log.type?i("div",{staticClass:"booking_completed"},[t.log.data.debt>0?i("p",{staticClass:"client_debt"},[i("u",[t._v("Бронь "+t._s(t.bookingDate))]),t._v(" завершена. Долг клиента "),i("span",[t._v(t._s(t.log.data.debt)+" ₸")])]):t._e(),t.log.data.debt<0?i("p",{staticClass:"playfield_debt"},[t._v("Бронь завершена. Долг площадки "),i("span",[t._v(t._s(t.log.data.debt)+" ₸")])]):t._e(),0===t.log.data.debt?i("p",{staticClass:"no_debt"},[t._v("Бронь завершена. Долгов нет")]):t._e()]):t._e(),5===t.log.type||2===t.log.type?i("div",{staticClass:"order_declined"},[i("p",{staticClass:"action_title"},[i("img",{attrs:{src:"/img/canceled_order.svg",alt:"declined"}}),t._v(" "+t._s(t.initiator)+" отклонил(-а) заказ ")])]):t._e(),9==t.log.type?i("div",{staticClass:"booking_canceled"},[i("p",{staticClass:"action_title"},[i("img",{attrs:{src:"/img/cancel_booking_history.svg",alt:"canceled"}}),t._v(" "+t._s(t.initiator)+" отменил(-а) "),i("u",[t._v("бронь "+t._s(t.bookingDate))])])]):t._e(),3===t.log.type?i("div",{staticClass:"request_expired"},[t._m(0)]):t._e(),7===t.log.type?i("div",{staticClass:"order_deposit"},[i("p",{staticClass:"action_title"},[t._v(" "+t._s(t.initiator)+" добавил(-а) залог "+t._s(t.log.data.nova_deposit)+" ₸"),i("br"),t._v(" Сумма залога: "+t._s(t.log.data.deposit)+" ₸ ")])]):t._e(),6===t.log.type?i("div",{staticClass:"order_all_discount"},[i("p",{staticClass:"action_title"},[t._v(" "+t._s(t.initiator)+" добавил скидку в размере "+t._s(t.log.data.discount)+" ₸ на все брони ")])]):t._e(),8===t.log.type?i("div",{staticClass:"booking_edited"},[i("p",{staticClass:"action_title"},[t._v(" "+t._s(t.initiator)+" внес изменения в "),i("u",[t._v("бронь "+t._s(t.bookingDate))])])]):t._e()])])])},Qi=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("p",{staticClass:"action_title"},[i("img",{attrs:{src:"/img/canceled_order.svg",alt:"declined"}}),t._v(" Истекло время запроса ")])}],Xi={props:["log"],data:function(){return{url:window.location.origin.replace("playfields.","")}},computed:Object(g["a"])(Object(g["a"])({dateFormat:function(){return T(this.log.created_at).format("DD.MM.YYYY, HH:mm")},photo:function(){return 1===this.log.initiator.type?this.facility.avatar:2===this.log.initiator.type?"storage/profile_original_avatars/".concat(this.order.client.avatar):""},initiator:function(){return 1===this.log.initiator.type?this.facility.fc_name:2===this.log.initiator.type?this.order.client.firstname:""},bookingDate:function(){return T(this.log.data.date).locale("ru").format("DD MMMM")},order_dates:function(){return this.log.data.order_type?T(this.log.data.start_date).locale("ru").format("DD MMMM"):"".concat(T(this.log.data.start_date).locale("ru").format("DD MMMM")," - ").concat(T(this.log.data.end_date).locale("ru").format("DD MMMM"))},details:function(){return"".concat(this.log.data.start_time.substring(0,5)," - ").concat(this.log.data.end_time.substring(0,5))}},Object(C["c"])("order",["order"])),Object(C["c"])("facility",["facility"]))},ta=Xi,ea=(i("7d67"),Object(u["a"])(ta,Ki,Qi,!1,null,"7c1c8fe5",null)),ia=ea.exports,aa={components:{OrderHistoryCard:ia},props:["logs"]},sa=aa,na=Object(u["a"])(sa,Zi,Gi,!1,null,"48861fc2",null),oa=na.exports,ra={props:["id"],data:function(){return{show:!1,active:"upcoming",activeTab:"info",remainForBooking:0,showConditions:!1,bookings:[],url:window.location.origin.replace("playfields.",""),reservations:[],sending:!0,logs:[]}},mounted:function(){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return window.scrollTo(0,0),e.next=3,t.getSingleOrder();case 3:t.getBookings(t.active);case 4:case"end":return e.stop()}}),e)})))()},components:{OrderHistory:oa,ConfirmHeader:Je,OrderInfo:oi,MiniOrderCard:pi,ConfirmationCard:He,SimpleTimetable:Ji,DateHeader:oe},computed:Object(g["a"])(Object(g["a"])(Object(g["a"])({},Object(C["c"])("order",["order"])),Object(C["b"])("order",["getAllPaid","getRemainMoney"])),{},{IsArchive:function(){return"canceled"===this.order.status||"completed"===this.order.status},containsUnpaid:function(){return 0!==this.filteredBookings.filter((function(t){return 0===t.paid})).length},getOrderStatus:function(){switch(this.order.status){case"pending":return"В ожидании";case"activated":return"Подтвержден";case"canceled":return"Отменен";case"completed":return"Завершен";case"rejected":return"Отклонен";default:return""}},activeCount:function(){return this.bookings.filter((function(t){return"activated"===t.status||"pending"===t.status})).length},canceledCount:function(){return this.bookings.filter((function(t){return"canceled"===t.status})).length},finishedCount:function(){return this.bookings.filter((function(t){return"completed"===t.status})).length},filteredBookings:function(){switch(this.active){case"upcoming":return this.bookings.filter((function(t){return"pending"===t.status||"activated"===t.status}));case"finished":return this.bookings.filter((function(t){return"completed"===t.status}));case"canceled":return this.bookings.filter((function(t){return"canceled"===t.status}));default:return[]}}}),methods:{move:function(t){var e=this;this.$nextTick((function(){e.$refs["booking_availibilty"].scrollLeft=9*t/10}))},back:function(){this.$router.push({name:"orders"})},getDate:function(t){return T(t)},getBookings:function(t){this.active=t},isMoreThanSevenDays:function(t){return T(t).diff(T())>7},cancelOrder:function(t){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function i(){return regeneratorRuntime.wrap((function(i){while(1)switch(i.prev=i.next){case 0:if(!t){i.next=3;break}return i.next=3,G.a.post("".concat(e.url,"/crm/user/").concat(window.$cookies.get("id"),"/order/").concat(e.order.id,"/cancel-reservations"),{},{headers:{Authorization:"Bearer ".concat(window.$cookies.get("access_token"))}}).then(Object(o["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.active="canceled",t.next=3,e.getSingleOrder();case 3:case"end":return t.stop()}}),t)}))));case 3:e.show=!1;case 4:case"end":return i.stop()}}),i)})))()},getSingleOrder:function(){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,G.a.get("".concat(t.url,"/crm/user/").concat(window.$cookies.get("id"),"/order/").concat(t.id),{headers:{Authorization:"Bearer ".concat(window.$cookies.get("access_token"))}}).then((function(e){t.$store.dispatch("order/setOrder",e.data.order),t.$store.dispatch("booking/setBooking",e.data.order.booking[0]),t.bookings=Object(st["a"])(t.order.booking),t.sending=!1}));case 2:return e.next=4,G.a.get("".concat(t.url,"/crm/user/").concat(window.$cookies.get("id"),"/order/").concat(t.id,"/history"),{headers:{Authorization:"Bearer ".concat(window.$cookies.get("access_token"))}}).then((function(e){return t.logs=e.data.history}));case 4:case"end":return e.stop()}}),e)})))()},acceptOrder:function(){G.a.post("".concat(this.url,"/crm/user/").concat(window.$cookies.get("id"),"/order/").concat(this.id,"/accept-btn"),{},{headers:{Authorization:"Bearer ".concat(window.$cookies.get("access_token"))}}).then((function(t){200===t.status&&window.location.reload()}))},declineOrder:function(){G.a.post("".concat(this.url,"/crm/user/").concat(window.$cookies.get("id"),"/order/").concat(this.id,"/decline-btn"),{},{headers:{Authorization:"Bearer ".concat(window.$cookies.get("access_token"))}}).then((function(t){200===t.status&&window.location.reload()}))}}},ca=ra,la=(i("44f1"),Object(u["a"])(ca,Ni,Ii,!1,null,"4da7993c",null)),da=la.exports,ua=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"single__booking"},[i("spinner",{attrs:{start:t.sending}}),t.sending?t._e():i("div",{staticClass:"single__booking_inner"},[i("confirm-header",{on:{back:t.back},scopedSlots:t._u([{key:"main",fn:function(){return[i("p",{staticClass:"order__id",on:{click:function(e){return e.stopPropagation(),t.goToOrder.apply(null,arguments)}}},[t._v("Заказ №"+t._s(t.booking.order_id))])]},proxy:!0},{key:"date",fn:function(){return[i("p",{staticClass:"order__date"},[t._v("Бронь, "+t._s(t.getDateFormat))])]},proxy:!0}],null,!1,1465518106)}),i("div",{staticClass:"toggle__mode"},[i("div",{staticClass:"information",class:"info"===t.active?"active":"",on:{click:function(e){t.active="info"}}},[t._v(" Информация "),i("div",{staticClass:"bottomLine"})]),i("div",{staticClass:"history",class:"history"===t.active?"active":"",on:{click:function(e){t.active="history"}}},[t._v(" История "),i("div",{staticClass:"bottomLine"})])]),"info"===t.active?i("booking-card"):t._e(),"history"===t.active?i("booking-history",{attrs:{logs:t.logs}}):t._e(),"info"===t.active&&t.orderValid?i("div",{staticClass:"cancel_booking",on:{click:function(e){return e.stopPropagation(),t.goToOrder.apply(null,arguments)}}},[t._v("Отменить бронь")]):t._e(),t.orderValid&&"info"===t.active?i("div",{staticClass:"edit"},[i("div",{staticClass:"edit__button",on:{click:function(e){return t.goToEdit()}}},[t._v("Редактировать")])]):t._e()],1)],1)},pa=[],fa=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"booking__card"},[i("div",{staticClass:"bookingCard__inner"},[i("div",{staticClass:"booking__time"},[i("p",{staticClass:"time key"},[t._v("Время брони:")]),i("p",{staticClass:"time value"},[t._v(t._s(t.booking.start_time.substring(0,5))+"-"+t._s(t.booking.end_time.substring(0,5)))])]),i("div",{staticClass:"booking__field"},[i("p",{staticClass:"field key"},[t._v("Площадка:")]),i("p",{staticClass:"field value"},[t._v(t._s(t.booking.playfield.name))])]),i("div",{staticClass:"booking__price"},[i("p",{staticClass:"price key"},[t._v("Стоимость:")]),i("p",{staticClass:"price value"},[t._v(t._s(t.booking.price)+" тг")])]),i("div",{staticClass:"booking__paytype"},[i("p",{staticClass:"paytype key"},[t._v("Способ оплаты")]),i("p",{staticClass:"paytype value"},[t._v(t._s("cash"===t.order.payment_type?"Наличными":"По реквизитам"))])]),i("div",{staticClass:"booking__discount"},[i("p",{staticClass:"discount key"},[t._v("Сумма скидки:")]),i("p",{staticClass:"discount value"},[t._v(t._s(t.booking.discount)+" тг")])]),i("div",{directives:[{name:"show",rawName:"v-show",value:t.booking.debt>0&&t.orderValid,expression:"booking.debt>0&&orderValid"}],staticClass:"discount__button",on:{click:function(e){return t.addDiscount()}}},[t._v(" Добавить скидку ")]),i("div",{staticClass:"booking__paid"},[i("p",{staticClass:"paid key"},[t._v("Оплачено:")]),i("p",{staticClass:"paid value"},[t._v(t._s(t.booking.paid)+" тг")])]),i("div",{directives:[{name:"show",rawName:"v-show",value:t.booking.debt>0&&t.orderValid,expression:"booking.debt>0&&orderValid"}],staticClass:"pay__button",on:{click:function(e){return t.addPay()}}},[t._v(" Добавить оплату ")]),i("div",{staticClass:"booking__remaining"},[i("p",{staticClass:"remaining key"},[t._v(t._s("completed"===t.booking.status?"Долг":"Остаток"))]),i("p",{staticClass:"remaining value"},[t._v(t._s(t.booking.debt)+" тг")])])]),i("payment-popup",{directives:[{name:"show",rawName:"v-show",value:t.show,expression:"show"}],attrs:{remain:t.booking.debt,is_crm:t.order.client.is_crm},on:{addPayment:t.addPayment,closePayment:t.closePayment},scopedSlots:t._u([{key:"title",fn:function(){return["payment"===t.active?i("p",[t._v("Добавьте оплату")]):t._e(),"discount"===t.active?i("p",[t._v("Добавьте скидку")]):t._e()]},proxy:!0}])})],1)},_a=[],ha={data:function(){return{show:!1,active:"payment"}},components:{PaymentPopup:V},methods:{addPayment:function(t){switch(this.active){case"payment":this.$store.dispatch("booking/setBookingPaid",{money:t,id:this.booking.id});break;case"discount":this.$store.dispatch("booking/setBookingDiscount",{discount:t,id:this.booking.id});break}this.show=!1},closePayment:function(){this.show=!1},addPay:function(){this.show=!0,this.active="payment"},addDiscount:function(){this.show=!0,this.active="discount"}},computed:Object(g["a"])(Object(g["a"])(Object(g["a"])({},Object(C["c"])("booking",["booking"])),Object(C["c"])("order",["order"])),{},{orderValid:function(){return"completed"===this.booking.status||"activated"===this.booking.status}})},va=ha,ma=(i("c7a7"),Object(u["a"])(va,fa,_a,!1,null,"0c14bb30",null)),ga=ma.exports,ya=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"history-cards"},[t._l(t.logs,(function(t,e){return[i("history-card",{key:e,attrs:{log:t}})]}))],2)},ba=[],ka=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"history_card"},[t.log.initiator?i("div",{staticClass:"initiator"},[i("div",{staticClass:"initiator_img"},[i("img",{attrs:{src:t.url+"/"+t.photo,alt:"photo"}})])]):t._e(),i("div",{staticClass:"log"},[i("div",{staticClass:"date"},[t._v(t._s(t.dateFormat))]),i("div",{staticClass:"information"},[1===t.log.type?i("div",{staticClass:"booking_activated"},[i("p",{staticClass:"action_title"},[t._v("Активирована бронь:")]),i("div",{staticClass:"booking_information"},[i("div",{staticClass:"order_id bold"},[t._v("Заказ №"+t._s(t.log.data.order_id))]),i("div",{staticClass:"booking_date"},[t._v("Дата: "+t._s(t.day))]),i("div",{staticClass:"booking_details"},[t._v("Детали: "+t._s(t.details))]),i("div",{staticClass:"booking_playfield"},[t._v("Площадка: "+t._s(t.log.data.playfield))]),i("div",{staticClass:"booking_price"},[t._v("Стоимость: "+t._s(t.log.data.price)+" ₸")]),i("div",{staticClass:"booking_paytype"},[t._v("Способ оплаты: "+t._s("cash"===t.log.data.payment_type?"Наличными":"По реквизитам"))]),i("div",{staticClass:"booking_discount"},[t._v("Скидка: "+t._s(t.log.data.discount)+" ₸")])])]):t._e(),5===t.log.type?i("div",{staticClass:"booking_completed"},[t.log.data.debt>0?i("p",{staticClass:"client_debt"},[t._v("Бронь завершена. Долг клиента "),i("span",[t._v(t._s(t.log.data.debt)+" ₸")])]):t._e(),t.log.data.debt<0?i("p",{staticClass:"playfield_debt"},[t._v("Бронь завершена. Долг площадки "),i("span",[t._v(t._s(t.log.data.debt)+" ₸")])]):t._e(),0===t.log.data.debt?i("p",{staticClass:"no_debt"},[t._v("Бронь завершена. Долгов нет")]):t._e()]):t._e(),4===t.log.type?i("div",{staticClass:"booking_edited"},[i("p",{staticClass:"action_title"},[t._v(t._s(t.facility.fc_name)+" внес(-ла) изменения в бронь")]),i("div",{staticClass:"edit_table"},[i("div",{staticClass:"edit_date"},[i("div",{staticClass:"key"},[t._v("Дата:")]),i("div",{staticClass:"old_value"},[t._v(t._s(t.old_date))]),i("div",{staticClass:"new_value",class:{notChanged:t.old_date===t.new_date}},[t._v(t._s(t.new_date))])]),i("div",{staticClass:"edit_time"},[i("div",{staticClass:"key"},[t._v("Время:")]),i("div",{staticClass:"old_value"},[t._v(t._s(t.old_time))]),i("div",{staticClass:"new_value",class:{notChanged:t.old_time===t.new_time}},[t._v(t._s(t.new_time))])]),i("div",{staticClass:"edit_playfield"},[i("div",{staticClass:"key"},[t._v("Площадка:")]),i("div",{staticClass:"old_value"},[t._v(t._s(t.log.data.old_playfield))]),i("div",{staticClass:"new_value",class:{notChanged:t.log.data.old_playfield===t.log.data.new_playfield}},[t._v(t._s(t.log.data.new_playfield))])]),i("div",{staticClass:"edit_price"},[i("div",{staticClass:"key"},[t._v("Цена:")]),i("div",{staticClass:"old_value"},[t._v(t._s(t.log.data.old_price))]),i("div",{staticClass:"new_value",class:{notChanged:t.log.data.old_price===t.log.data.new_price}},[t._v(t._s(t.log.data.new_price))])])])]):t._e(),3===t.log.type?i("div",{staticClass:"booking_paid"},[i("p",{staticClass:"action_title"},[t._v(t._s(t.facility.fc_name)+" добавил(-а) оплату в размере "+t._s(t.log.data.paid)+" ₸"),i("br"),t._v("Остаток: "+t._s(t.log.data.balance)+" ₸")])]):t._e(),6===t.log.type?i("div",{staticClass:"booking_canceled"},[i("p",{staticClass:"action_title"},[t._v(t._s(t.initiator)+" отменил(-а) бронь")])]):t._e(),2===t.log.type?i("div",{staticClass:"booking_discount"},[i("p",{staticClass:"action_title"},[t._v(t._s(t.facility.fc_name)+" добавил(-а) скидку в размере "+t._s(t.log.data.discount)+" ₸"),i("br"),t._v("Сумма скидок: "+t._s(t.log.data.total_discount)+" ₸")])]):t._e()])])])},Ca=[],wa={props:["log"],data:function(){return{url:window.location.origin.replace("playfields.","")}},computed:Object(g["a"])(Object(g["a"])({dateFormat:function(){return T(this.log.created_at).format("DD.MM.YYYY, HH:mm")},day:function(){return T(this.log.data.date).locale("ru").format("DD MMMM")},details:function(){var t="".concat(this.log.data.start_time.substring(0,5)," - ").concat(this.log.data.end_time.substring(0,5));return t},photo:function(){return 1===this.log.initiator.type?this.facility.avatar:2===this.log.initiator.type?"storage/profile_original_avatars/".concat(this.order.client.avatar):""},initiator:function(){return 1===this.log.initiator.type?this.facility.fc_name:2===this.log.initiator.type?this.order.client.firstname:""},old_date:function(){return T(this.log.data.old_date).locale("ru").format("DD MMMM")},new_date:function(){return T(this.log.data.new_date).locale("ru").format("DD MMMM")},old_time:function(){return"".concat(this.log.data.old_start_time.substring(0,5)," - ").concat(this.log.data.old_end_time.substring(0,5))},new_time:function(){return"".concat(this.log.data.new_start_time.substring(0,5)," - ").concat(this.log.data.new_end_time.substring(0,5))}},Object(C["c"])("facility",["facility"])),Object(C["c"])("order",["order"]))},Oa=wa,xa=(i("3cca"),Object(u["a"])(Oa,ka,Ca,!1,null,"0942edf5",null)),ja=xa.exports,Pa={components:{HistoryCard:ja},props:["logs"]},Da=Pa,$a=Object(u["a"])(Da,ya,ba,!1,null,"66da0b16",null),Sa=$a.exports,Aa={props:["id","bookingid"],data:function(){return{active:"info",url:window.location.origin.replace("playfields.",""),logs:[],sending:!0}},mounted:function(){window.scrollTo(0,0),this.getSingleBooking()},components:{Spinner:f,ConfirmHeader:Je,BookingCard:ga,BookingHistory:Sa},computed:Object(g["a"])(Object(g["a"])(Object(g["a"])({},Object(C["c"])("booking",["booking"])),Object(C["c"])("order",["order"])),{},{getDateFormat:function(){return T(this.booking.date).locale("ru").format("DD MMMM")},orderValid:function(){return"activated"===this.booking.status}}),methods:{goToEdit:function(){this.$router.push({name:"edit",params:{id:this.id,bookingid:this.bookingid}})},goToOrder:function(){this.$router.push({name:"singleOrder",params:{id:this.id}})},back:function(){this.$router.go(-1)},getSingleBooking:function(){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.sending=!0,e.next=3,G.a.get("".concat(t.url,"/crm/user/").concat(window.$cookies.get("id"),"/reservation/").concat(t.bookingid),{headers:{Authorization:"Bearer ".concat(window.$cookies.get("access_token"))}}).then((function(e){t.$store.dispatch("booking/setBooking",e.data.booking),t.$store.dispatch("order/setOrder",e.data.booking.order),t.$store.dispatch("order/setClient",e.data.booking.client),t.getHistory()}));case 3:case"end":return e.stop()}}),e)})))()},getHistory:function(){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.sending=!0,e.next=3,G.a.get("".concat(t.url,"/crm/user/").concat(window.$cookies.get("id"),"/reservation/").concat(t.bookingid,"/history"),{headers:{Authorization:"Bearer ".concat(window.$cookies.get("access_token"))}}).then((function(e){t.logs=e.data.logs})).finally((function(){return t.sending=!1}));case 3:case"end":return e.stop()}}),e)})))()}}},Ma=Aa,Ta=(i("dede"),Object(u["a"])(Ma,ua,pa,!1,null,"52554ba6",null)),Ba=Ta.exports,Na=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"edit__booking"},[i("confirm-header",{on:{back:t.back},scopedSlots:t._u([{key:"main",fn:function(){return[i("p",{staticClass:"order__id"},[t._v("Редактирование")])]},proxy:!0},{key:"date",fn:function(){return[i("p",{staticClass:"order__date"},[t._v("Бронь, "+t._s(t.getDateFormat))])]},proxy:!0}])}),i("edit-card")],1)},Ia=[],Ra=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"edit__card"},[t.hasError?i("div",{staticClass:"backdrop"}):t._e(),t.hasError?i("error-card",{attrs:{message:t.message},on:{close:function(e){t.hasError=!1}}}):t._e(),i("spinner",{attrs:{start:t.sending}}),i("div",{staticClass:"card__inner"},[i("div",{staticClass:"edit__date"},[i("p",{staticClass:"bold"},[t._v("Дата бронирования")]),i("date-picker",{staticStyle:{width:"100%",height:"40px"},attrs:{format:"DD MMMM, YYYY",placehodler:t.changedDate},on:{change:t.checkBooking},model:{value:t.changedDate,callback:function(e){t.changedDate=e},expression:"changedDate"}})],1),i("div",{staticClass:"edit__timeAndField"},[i("p",{staticClass:"bold"},[t._v("Время бронирования")]),i("div",{staticClass:"time"},[i("div",{staticClass:"time__start"},[i("label",{staticStyle:{"margin-bottom":"4px"}},[t._v("Время начала")]),i("drop-down",{attrs:{options:t.getStartOptions,id:"start",initialValue:{value:t.changedStartTime,text:t.changedStartTime}},on:{selected:t.selected}})],1),i("div",{staticClass:"time__end"},[i("label",{staticStyle:{"margin-bottom":"4px"}},[t._v("Время окончания")]),i("drop-down",{attrs:{options:t.getEndOptions,id:"end",initialValue:{value:t.changedEndTime,text:t.changedEndTime}},on:{selected:t.selected}})],1)]),i("div",{staticClass:"field"},[i("drop-down",{attrs:{options:t.fields,id:"field",initialValue:{value:t.changedField,text:t.getPfName}},on:{selected:t.selected}})],1)]),i("div",{staticClass:"changes"},[i("p",{staticClass:"bold"},[t._v("Изменения")]),i("div",{staticClass:"changes__info"},[i("table",{staticStyle:{width:"100%"}},[i("tr",[i("td",{staticClass:"key"},[t._v("Дата:")]),i("td",{staticClass:"old"},[t._v(t._s(t.getDateFormat(this.booking.date)))]),i("td",{staticClass:"new",class:{notEdited:!t.isDateEdited}},[t._v(t._s(t.getDateFormat(this.changedDate)))])]),i("tr",[i("td",{staticClass:"key"},[t._v("Время:")]),i("td",{staticClass:"old"},[t._v(t._s(t.booking.start_time.substring(0,5)+"-"+t.booking.end_time.substring(0,5)))]),i("td",{staticClass:"new",class:{notEdited:!t.isTimeEdited}},[t._v(t._s(t.changedStartTime+"-"+t.changedEndTime))])]),i("tr",[i("td",{staticClass:"key"},[t._v("Площадка:")]),i("td",{staticClass:"old"},[t._v(t._s(t.booking.playfield.name))]),i("td",{staticClass:"new",class:{notEdited:!t.isFieldEdited}},[t._v(t._s(t.changedField.text))])]),i("tr",[i("td",{staticClass:"key"},[t._v("Цена:")]),i("td",{staticClass:"old"},[t._v(t._s(t.booking.price)+" тг")]),i("td",{staticClass:"new",class:{notEdited:!t.isEdited}},[t._v(t._s(t.changedPrice)+" тг")])])])])])]),i("div",{staticClass:"save"},[i("div",{staticClass:"save__button",class:{available:t.isEdited&&t.isValidToSave},on:{click:function(e){return e.stopPropagation(),t.saveChanges()}}},[t._v("Сохранить")])])],1)},Ea=[],Fa=i("ec45"),Va=(i("411c"),i("107a"),{data:function(){return{changedDate:"",changedStartTime:"",changedEndTime:"",changedField:"",changedPrice:"",timelines:["05:00","05:30","06:00","06:30","07:00","07:30","08:00","08:30","09:00","09:30","10:00","10:30","11:00","11:30","12:00","12:30","13:00","13:30","14:00","14:30","15:00","15:30","16:00","16:30","17:00","17:30","18:00","18:30","19:00","19:30","20:00","20:30","21:00","21:30","22:00","22:30","23:00","23:30","00:00","00:30","01:00","01:30","02:00","02:30","03:00","03:30","04:00","04:30","05:00"],fields:[],message:"",hasError:!1,isValidToSave:!1,sending:!1,url:window.location.origin.replace("playfields.","")}},components:{ErrorCard:ii,Spinner:f,DatePicker:Fa["default"],DropDown:Gt},mounted:function(){var t=this;this.changedDate=this.booking.date,this.changedStartTime=this.booking.start_time.substring(0,5),this.changedEndTime=this.booking.end_time.substring(0,5),this.changedField={value:this.booking.playfield.id,text:this.booking.playfield.name},this.changedPrice=this.booking.price,this.fields=Object.keys(this.facility.playfields).map((function(e){return{value:t.facility.playfields[e].id,text:t.facility.playfields[e].pf_name}}))},computed:Object(g["a"])(Object(g["a"])(Object(g["a"])(Object(g["a"])({},Object(C["c"])("booking",["booking"])),Object(C["c"])("facility",["facility"])),Object(C["c"])("order",["order"])),{},{isEdited:function(){return this.isDateEdited||this.isTimeEdited||this.isFieldEdited},isDateEdited:function(){return this.getDateFormat(this.booking.date)!==this.getDateFormat(this.changedDate)},isTimeEdited:function(){return this.booking.start_time.substring(0,5)!==this.changedStartTime||this.booking.end_time.substring(0,5)!==this.changedEndTime},isFieldEdited:function(){return this.booking.playfield.id!==this.changedField.value},getStartOptions:function(){var t=0,e=this.getTimelines.indexOf(this.changedEndTime);return this.getTimelines.slice(t,e+1).map((function(t){return{text:t,value:t}}))},getWorkingHours:function(){var t=T(this.changedDate).day();return{start:this.getPf.periods_data[t].start_time,end:this.getPf.periods_data[t].end_time}},getEndOptions:function(){var t=this.getTimelines.indexOf(this.changedStartTime),e=this.getTimelines.length;return this.getTimelines.slice(t+1,e+1).map((function(t){return{text:t,value:t}}))},getDuration:function(){var t=30*(this.getTimelines.indexOf(this.changedEndTime)-this.getTimelines.indexOf(this.changedStartTime)+1),e=Math.floor(t/60),i=t%60;return"".concat(e," ч ").concat(i," мин")},getTimelines:function(){var t=this.timelines.indexOf(this.getWorkingHours.start),e=this.timelines.lastIndexOf(this.getWorkingHours.end);return this.timelines.slice(t,e+1)},getPfName:function(){return this.getPf.pf_name},getPf:function(){var t=this;return this.facility.playfields.find((function(e){return e.id===t.changedField.value}))}}),methods:{getDateFormat:function(t){return T(t).locale("ru").format("DD MMMM, YYYY")},selected:function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(e,i){var a,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return"start"===i?(this.getTimelines.indexOf(e.value)<this.getTimelines.indexOf("00:00")&&this.getTimelines.indexOf(this.changedStartTime)>=this.timelines.indexOf("00:00")&&(a=T(this.changedDate.value).subtract(1,"day"),this.changedDate={value:a,text:this.getDateFormat(a)}),this.getTimelines.indexOf(e.value)>=this.getTimelines.indexOf("00:00")&&this.getTimelines.indexOf(this.changedStartTime)<this.timelines.indexOf("00:00")&&(s=T(this.changedDate.value).add(1,"day"),this.changedDate={value:s,text:this.getDateFormat(s)}),this.changedStartTime=e.value,this.changedEndTime=this.getTimelines[this.timelines.indexOf(this.changedStartTime)+1]):"end"===i?this.changedEndTime=e.value:"field"===i&&(this.changedField=e),t.next=3,this.checkBooking();case 3:case"end":return t.stop()}}),t,this)})));function e(e,i){return t.apply(this,arguments)}return e}(),checkBooking:function(){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.sending=!0,e.next=3,G.a.post("".concat(t.url,"/crm/user/").concat(window.$cookies.get("id"),"/playfield/").concat(t.booking.playfield.id,"/check-reservation"),{start_time:t.changedStartTime,end_time:t.changedEndTime,date:T(t.changedDate).format("YYYY-MM-DD"),booking_id:t.booking.id,playfield_id:t.changedField.value},{headers:{Authorization:"Bearer ".concat(window.$cookies.get("access_token"))}}).then((function(e){t.changedPrice=e.data.new_price,t.isValidToSave=!0})).catch((function(e){t.isValidToSave=!1,t.hasError=!0,t.message=e.response.data.error})).finally((function(){return t.sending=!1}));case 3:case"end":return e.stop()}}),e)})))()},saveChanges:function(){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!t.isValidToSave){e.next=3;break}return e.next=3,G.a.post("".concat(t.url,"/crm/user/").concat(window.$cookies.get("id"),"/playfield/").concat(t.booking.playfield.id,"/change-reservation"),{start_time:t.changedStartTime,end_time:t.changedEndTime,date:T(t.changedDate).format("YYYY-MM-DD"),booking_id:t.booking.id,playfield_id:t.changedField.value},{headers:{Authorization:"Bearer ".concat(window.$cookies.get("access_token"))}}).then((function(){t.$router.push({name:"orders"})})).catch((function(e){t.hasError=!0,t.message=e.response.data.error}));case 3:case"end":return e.stop()}}),e)})))()},getDayOfWeek:function(t){return T(t).day()}}}),Ya=Va,Ha=(i("1e21"),Object(u["a"])(Ya,Ra,Ea,!1,null,"9cfa092a",null)),Wa=Ha.exports,za={components:{ConfirmHeader:Je,EditCard:Wa},methods:{back:function(){this.$router.push({path:"/"})}},mounted:function(){window.scrollTo(0,0)},computed:Object(g["a"])(Object(g["a"])({},Object(C["c"])("booking",["booking"])),{},{getDateFormat:function(){return T(this.booking.date).locale("ru").format("DD MMMM")}})},La=za,qa=(i("ca51"),Object(u["a"])(La,Na,Ia,!1,null,"93cc3598",null)),Ua=qa.exports,Ja=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"clients__wrapper"},[i("spinner",{attrs:{start:t.sending}}),i("MainHeader",{on:{changed:t.changed},scopedSlots:t._u([{key:"title",fn:function(){return[i("p",{staticClass:"title"},[t._v("Клиенты")])]},proxy:!0}])}),i("div",{staticClass:"client_filters"},[i("div",{staticClass:"filter_input"},[i("input",{directives:[{name:"model",rawName:"v-model",value:t.filter,expression:"filter"}],attrs:{type:"text",placeholder:"Введите имя или номер телефона"},domProps:{value:t.filter},on:{input:function(e){e.target.composing||(t.filter=e.target.value)}}}),i("img",{attrs:{src:"/img/search.svg",alt:"найти"}})]),i("div",{staticClass:"filter_dropdown"},[i("select",{directives:[{name:"model",rawName:"v-model",value:t.filterType,expression:"filterType"}],staticClass:"order__type",on:{change:function(e){var i=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.filterType=e.target.multiple?i:i[0]}}},t._l(t.filterTypes,(function(e,a){return i("option",{key:a},[t._v(t._s(e))])})),0)])]),i("p",{staticClass:"client__amount"},[t._v(" Клиентов: "+t._s(t.searchedClients.length)+" ")]),i("div",{staticClass:"clientCards"},t._l(t.searchedClients,(function(e){return i("Client",{key:e.id,attrs:{client:e,filter:t.filterTypeFormat}})})),1),i("bottom-menu",{attrs:{active:"clients"}})],1)},Za=[],Ga=(i("498a"),function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"client",on:{click:function(e){return e.stopPropagation(),t.showClientCard.apply(null,arguments)}}},[i("div",{directives:[{name:"show",rawName:"v-show",value:t.show,expression:"show"}],staticClass:"backdrop",on:{click:function(e){e.stopPropagation(),t.show=!1}}}),i("div",{staticClass:"client__inner"},[i("div",{staticClass:"client__left"},[i("div",{staticClass:"avatar"},["default_avatar.png"!==t.client.avatar?i("img",{attrs:{src:t.url+"/storage/profile_avatars/"+t.client.avatar,alt:"Photo"}}):i("i",{staticClass:"fas fa-user-circle"})]),i("div",{staticClass:"info"},[i("p",{staticClass:"name"},[t._v(t._s(t.client.firstname)+" "+t._s(t.client.lastname))]),i("p",{staticClass:"phone"},[t._v(t._s(t.client.phone))]),0===t.filter&&t.client.bookings_count>0?i("p",{staticClass:"bookings_count"},[t._v("Брони: "+t._s(t.client.bookings_count))]):t._e(),1===t.filter&&t.client.debts.client>0?i("p",{staticClass:"client_debt"},[t._v(t._s(t.client.debts.client)+" ₸")]):t._e(),2===t.filter&&t.client.debts.admin<0?i("p",{staticClass:"admin_debt"},[t._v(t._s(t.client.debts.admin)+" ₸")]):t._e(),3===t.filter&&parseInt(t.client.deposits)>0?i("p",{staticClass:"deposits"},[t._v(t._s(t.client.deposits)+" ₸")]):t._e()])]),i("div",{staticClass:"client__right"},[i("div",{staticClass:"whatsapp",on:{click:function(e){e.stopPropagation(),t.show=!1}}},[i("a",{attrs:{href:"https://api.whatsapp.com/send?phone="+t.client.phone,target:"_blank"}},[i("i",{staticClass:"fab fa-whatsapp"})])])])]),t.show?i("client-card",{attrs:{client:t.client,clicked:t.show}}):t._e()],1)}),Ka=[],Qa={props:["client","filter"],data:function(){return{show:!1,url:window.location.origin.replace("playfields.","")}},components:{ClientCard:Dt},methods:{showClientCard:function(){this.show=!0}}},Xa=Qa,ts=(i("20ce"),Object(u["a"])(Xa,Ga,Ka,!1,null,"63f1d9ee",null)),es=ts.exports,is={components:{Spinner:f,Client:es,BottomMenu:pe,MainHeader:te},data:function(){return{clients:[],filter:"",sending:!0,filterType:"Количество активных броней",filterTypes:["Количество активных броней","Долги клиентов","Долги площадки","Залоги клиентов"],url:window.location.origin.replace("playfields.","")}},watch:{"facility.id":function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return window.scrollTo(0,0),t.next=3,this.getClients();case 3:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),filterType:function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.getClients();case 2:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},mounted:function(){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return window.scrollTo(0,0),e.next=3,t.getClients();case 3:case"end":return e.stop()}}),e)})))()},methods:{changed:function(t){var e=this;this.start=!0,this.$store.dispatch("facility/resetFacility",parseInt(t)).then((function(){return e.start=!1})),sessionStorage.setItem("active_facility",parseInt(t))},getClients:function(){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t.sending=!0,G.a.post("".concat(t.url,"/crm/user/").concat(window.$cookies.get("id"),"/facility/").concat(sessionStorage.getItem("active_facility"),"/users"),{sort:t.filterTypeFormat,facility_id:t.facility.id},{headers:{Authorization:"Bearer ".concat(window.$cookies.get("access_token"))}}).then((function(e){t.clients=e.data.clients})).finally((function(){return t.sending=!1}));case 2:case"end":return e.stop()}}),e)})))()}},computed:Object(g["a"])(Object(g["a"])({},Object(C["c"])("facility",["facility"])),{},{filterTypeFormat:function(){switch(this.filterType){case"Количество активных броней":return 0;case"Долги клиентов":return 1;case"Долги площадки":return 2;case"Залоги клиентов":return 3;default:return 0}},searchedClients:function(){var t=this,e=this.filter.trim().toLowerCase();return this.clients.filter((function(i){return i.firstname.toLowerCase().includes(e)||i.lastname.toLowerCase().includes(e)||i.phone.includes(t.filter)}))}})},as=is,ss=(i("0d24"),Object(u["a"])(as,Ja,Za,!1,null,"33237c82",null)),ns=ss.exports,os=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"field__setting"},[i("MenuHeader",{attrs:{backButton:!0},on:{back:t.back},scopedSlots:t._u([{key:"title",fn:function(){return[i("p",{staticClass:"field__time"},[t._v("Время на площадке")])]},proxy:!0}])}),i("div",{staticClass:"field__text"},[t._v(t._s(t.isDaySelected?"Проставьте цены":"Укажите режим работы"))]),i("working-hours",{directives:[{name:"show",rawName:"v-show",value:t.show,expression:"show"}],attrs:{saved:t.saved},on:{daySelected:t.daySelected}}),i("PriceSettings",{directives:[{name:"show",rawName:"v-show",value:!t.show&&!t.isDayOff,expression:"!show&&!isDayOff"}],attrs:{selectedDays:t.selectedDaysF,workingHours:t.workingHours},on:{readyToChange:t.readyToChange}}),i("div",{staticClass:"wrapper"},t._l(t.changedInfo,(function(e,a){return i("ChangedCard",{directives:[{name:"show",rawName:"v-show",value:t.show,expression:"show"}],key:a,staticStyle:{"margin-bottom":"16px"},attrs:{info:e,start_time:e.start,end_time:e.end},on:{clear:t.clear}})})),1),i("div",{staticClass:"save__btn",class:{available:7===t.saved.length,notDisplayed:!t.show},on:{click:function(e){return t.commitChanges()}}},[t._v(" Сохранить ")])],1)},rs=[],cs=(i("07ac"),function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"menu__header"},[i("div",{directives:[{name:"show",rawName:"v-show",value:t.backButton,expression:"backButton"}],staticClass:"back__btn",on:{click:function(e){return t.handleClick()}}},[i("i",{staticClass:"fas fa-arrow-left"})]),t._t("title"),t._t("logout")],2)}),ls=[],ds={props:["backButton","logout"],methods:{handleClick:function(){this.$emit("back")}}},us=ds,ps=(i("f682"),Object(u["a"])(us,cs,ls,!1,null,"5769dee3",null)),fs=ps.exports,_s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"workingHours"},[i("div",{staticClass:"workingHours__inner"},[i("p",{staticClass:"title"},[t._v("Выберите дни")]),i("div",{staticClass:"week__days"},[i("div",{staticClass:"day monday",class:{daySelected:t.selectedDays.includes("1"),saved:t.saved.includes("1")},on:{click:function(e){return t.daySelected("1")}}},[t._v("Пн")]),i("div",{staticClass:"day tuesday",class:{daySelected:t.selectedDays.includes("2"),saved:t.saved.includes("2")},on:{click:function(e){return t.daySelected("2")}}},[t._v("Вт")]),i("div",{staticClass:"day wednesday",class:{daySelected:t.selectedDays.includes("3"),saved:t.saved.includes("3")},on:{click:function(e){return t.daySelected("3")}}},[t._v("Ср")]),i("div",{staticClass:"day thursday",class:{daySelected:t.selectedDays.includes("4"),saved:t.saved.includes("4")},on:{click:function(e){return t.daySelected("4")}}},[t._v("Чт")]),i("div",{staticClass:"day friday",class:{daySelected:t.selectedDays.includes("5"),saved:t.saved.includes("5")},on:{click:function(e){return t.daySelected("5")}}},[t._v("Пт")]),i("div",{staticClass:"day saturday",class:{daySelected:t.selectedDays.includes("6"),saved:t.saved.includes("6")},on:{click:function(e){return t.daySelected("6")}}},[t._v("Сб")]),i("div",{staticClass:"day sunday",class:{daySelected:t.selectedDays.includes("0"),saved:t.saved.includes("0")},on:{click:function(e){return t.daySelected("0")}}},[t._v("Вс")])]),i("p",{staticClass:"workingHours__text"},[t._v("Режим работы")]),i("div",{directives:[{name:"show",rawName:"v-show",value:!t.checked&&!t.clock_checked,expression:"!checked&&!clock_checked"}],staticClass:"startTime__endTime"},[i("div",{staticClass:"start__time"},[i("drop-down",{attrs:{options:t.getStartOptions,id:"start",initialValue:t.startValue},on:{selected:t.selected}})],1),i("div",{staticClass:"end__time"},[i("drop-down",{attrs:{options:t.getEndOptions,id:"end",initialValue:t.endValue},on:{selected:t.selected}})],1)]),i("div",{directives:[{name:"show",rawName:"v-show",value:t.selectedDays.length>0,expression:"selectedDays.length>0"}],staticClass:"roundTheClock"},[i("p",[t._v("Круглосуточно")]),i("label",{staticClass:"switch"},[i("input",{directives:[{name:"model",rawName:"v-model",value:t.clock_checked,expression:"clock_checked"}],attrs:{type:"checkbox",disabled:t.checked},domProps:{checked:Array.isArray(t.clock_checked)?t._i(t.clock_checked,null)>-1:t.clock_checked},on:{click:function(e){t.clock_checked=!t.clock_checked},change:function(e){var i=t.clock_checked,a=e.target,s=!!a.checked;if(Array.isArray(i)){var n=null,o=t._i(i,n);a.checked?o<0&&(t.clock_checked=i.concat([n])):o>-1&&(t.clock_checked=i.slice(0,o).concat(i.slice(o+1)))}else t.clock_checked=s}}}),i("span",{staticClass:"slider round"})])]),i("div",{directives:[{name:"show",rawName:"v-show",value:t.selectedDays.length>0,expression:"selectedDays.length>0"}],staticClass:"dayOff"},[i("p",[t._v("Выходной")]),i("label",{staticClass:"switch"},[i("input",{directives:[{name:"model",rawName:"v-model",value:t.checked,expression:"checked"}],attrs:{type:"checkbox",disabled:t.clock_checked},domProps:{checked:Array.isArray(t.checked)?t._i(t.checked,null)>-1:t.checked},on:{click:function(e){t.checked=!t.checked},change:function(e){var i=t.checked,a=e.target,s=!!a.checked;if(Array.isArray(i)){var n=null,o=t._i(i,n);a.checked?o<0&&(t.checked=i.concat([n])):o>-1&&(t.checked=i.slice(0,o).concat(i.slice(o+1)))}else t.checked=s}}}),i("span",{staticClass:"slider round"})])]),i("div",{staticClass:"add__button",class:{available:t.isAvailable},on:{click:function(e){return t.addWorkingHours()}}},[t._v(" Добавить ")])])])},hs=[],vs={props:["saved"],data:function(){return{selectedDays:[],workingHours:[],checked:!1,clock_checked:!1,startValue:{value:"",text:""},endValue:{value:"",text:""},timelines:["05:00","05:30","06:00","06:30","07:00","07:30","08:00","08:30","09:00","09:30","10:00","10:30","11:00","11:30","12:00","12:30","13:00","13:30","14:00","14:30","15:00","15:30","16:00","16:30","17:00","17:30","18:00","18:30","19:00","19:30","20:00","20:30","21:00","21:30","22:00","22:30","23:00","23:30","00:00","00:30","01:00","01:30","02:00","02:30","03:00","03:30","04:00","04:30","05:00"]}},components:{DropDown:Gt},computed:{isAvailable:function(){return this.startValue.value&&this.endValue.value&&this.selectedDays.length>0||this.checked||this.clock_checked},getStartOptions:function(){return this.timelines.map((function(t){return{value:t,text:t}}))},getEndOptions:function(){return this.timelines.slice(this.timelines.indexOf(this.startValue.value)+1).map((function(t){return{value:t,text:t}}))}},methods:{daySelected:function(t){this.selectedDays.includes(t)?this.selectedDays=this.selectedDays.filter((function(e){return e!==t})):this.selectedDays.push(t)},addWorkingHours:function(){this.clock_checked&&(this.workingHours=this.timelines),this.$emit("daySelected",this.selectedDays,this.checked,this.workingHours),this.resetValues()},selected:function(t,e){"start"===e?(this.startValue=Object(g["a"])({},t),this.endValue.text=this.timelines[this.timelines.indexOf(t.text)+1],this.endValue.value=this.timelines[this.timelines.indexOf(t.text)+1]):"end"===e&&(this.endValue=Object(g["a"])({},t)),this.workingHours=this.timelines.slice(this.timelines.indexOf(this.startValue.value),this.timelines.lastIndexOf(this.endValue.value)+1)},resetValues:function(){this.selectedDays=[],this.workingHours=[],this.checked=!1,this.startValue={value:"",text:""},this.endValue={value:"",text:""}}}},ms=vs,gs=(i("ace3"),Object(u["a"])(ms,_s,hs,!1,null,"607732e6",null)),ys=gs.exports,bs=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"priceSettings"},[i("div",{staticClass:"priceSettings__inner"},[i("p",{staticClass:"title"},[t._v("Проставьте цены")]),i("div",{staticClass:"week__days"},t._l(t.selectedDays,(function(e,a){return i("div",{key:a,staticClass:"day"},[t._v(t._s(e))])})),0),i("p",{staticClass:"tip"},[t._v("Добавьте цену за полчаса и промежуток действия")]),i("div",{directives:[{name:"show",rawName:"v-show",value:t.startValue&&t.endValue&&t.localWH.length>1,expression:"startValue&&endValue&&localWH.length>1"}],staticClass:"input__fields"},[i("div",{staticClass:"price__input"},[i("input",{directives:[{name:"model",rawName:"v-model",value:t.price,expression:"price"}],attrs:{type:"text",inputmode:"tel",placeholder:"Добавьте цену за полчаса"},domProps:{value:t.price},on:{input:function(e){e.target.composing||(t.price=e.target.value)}}})]),i("div",{staticClass:"interval__input"},[i("div",{staticClass:"start__time"},[i("drop-down",{attrs:{options:t.getStartOptions,id:"start",fixed:!0,initialValue:t.startValue},on:{selected:t.selected}})],1),i("div",{staticClass:"end__time"},[i("drop-down",{attrs:{options:t.getEndOptions,id:"end",initialValue:t.endValue},on:{selected:t.selected}})],1)])]),i("div",{staticClass:"info__wrapper"},[t.info.length?i("div",{staticClass:"clear_all"},[i("span",{staticClass:"clear_all_button",on:{click:function(e){return e.stopPropagation(),t.clearAll()}}},[t._v(" Очистить все "),i("img",{attrs:{src:"/img/clear-all.svg"}})])]):t._e(),t._l(t.info,(function(e,a){return i("div",{key:a,staticClass:"info__show"},[i("div",{staticClass:"interval"},[t._v(t._s(e.start_time.text)+" - "+t._s(e.end_time.text))]),i("div",{staticClass:"price__and__cancel"},[i("div",{staticClass:"price"},[t._v(t._s(e.price)+" ₸")])])])}))],2),i("div",{staticClass:"add__button",class:{available:t.isAvailable||t.allDone},on:{click:function(e){return t.addToInfo()}}},[t._v(" Добавить ")])])])},ks=[],Cs={props:["selectedDays","workingHours"],data:function(){return{info:[],startValue:{},endValue:{},price:"",localWH:[],sendData:{},timelines:["05:00","05:30","06:00","06:30","07:00","07:30","08:00","08:30","09:00","09:30","10:00","10:30","11:00","11:30","12:00","12:30","13:00","13:30","14:00","14:30","15:00","15:30","16:00","16:30","17:00","17:30","18:00","18:30","19:00","19:30","20:00","20:30","21:00","21:30","22:00","22:30","23:00","23:30","00:00","00:30","01:00","01:30","02:00","02:30","03:00","03:30","04:00","04:30","05:00"]}},watch:{workingHours:function(t){this.localWH=t,this.startValue={value:this.localWH[0],text:this.localWH[0]},this.endValue={value:this.localWH[1],text:this.localWH[1]}}},components:{DropDown:Gt},methods:{selected:function(t,e){"end"===e&&(this.endValue=Object(g["a"])({},t))},addToInfo:function(){for(var t=this.timelines.indexOf(this.startValue.value);t<this.timelines.lastIndexOf(this.endValue.value);t++)this.sendData[[this.timelines[t]]]=this.price;this.info.push({start_time:this.startValue,end_time:this.endValue,price:this.price}),this.localWH=this.localWH.slice(this.localWH.lastIndexOf(this.endValue.value)),this.allDone&&(this.$emit("readyToChange",this.info,this.workingHours[0],this.workingHours[this.workingHours.length-1],this.sendData),this.info=[],this.sendData={}),this.clear()},clear:function(){this.startValue={value:this.localWH[0],text:this.localWH[0]},this.endValue={value:this.localWH[1],text:this.localWH[1]},this.price=""},clearAll:function(){this.localWH=this.workingHours,this.info=[],this.sendData={},this.startValue={value:this.localWH[0],text:this.localWH[0]},this.endValue={value:this.localWH[1],text:this.localWH[1]},this.price=""}},computed:{isAvailable:function(){return this.startValue&&this.endValue&&this.price},allDone:function(){return!(this.startValue&&this.endValue&&this.localWH.length>1)},getStartOptions:function(){return this.localWH.map((function(t){return{value:t,text:t}}))},getEndOptions:function(){return this.localWH.slice(this.localWH.indexOf(this.startValue.value)+1).map((function(t){return{value:t,text:t}}))}}},ws=Cs,Os=(i("3cf7"),Object(u["a"])(ws,bs,ks,!1,null,"6217c0f9",null)),xs=Os.exports,js=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"changedCard"},[i("div",{staticClass:"changedCard__inner"},[i("div",{staticClass:"week__days"},t._l(t.info.selectedDays,(function(e,a){return i("div",{key:a,staticClass:"day"},[t._v(t._s(t.dayFormat(e)))])})),0),i("div",{staticClass:"workingHours"},[i("p",[t._v("Режим работы")]),t.info.dayOff?t.info.dayOff?i("p",{staticClass:"dayoff"},[t._v("Выходной день")]):t._e():i("p",[t._v(t._s(t.start_time)+" - "+t._s(t.end_time))])]),t.info.dayOff?t._e():i("div",{staticClass:"schedule"},t._l(t.info.info,(function(e,a){return i("div",{key:a,staticClass:"schedule__info"},[i("p",{staticClass:"time"},[t._v(t._s(e.start_time.text)+" - "+t._s(e.end_time.text))]),i("p",{staticClass:"price"},[t._v(t._s(e.price)+" ₸")])])})),0),i("div",{staticClass:"clear__button",on:{click:t.clear}},[t._v("Очистить")])])])},Ps=[],Ds={props:["info","start_time","end_time"],methods:{clear:function(){this.$emit("clear",this.info,this.start_time,this.end_time)},dayFormat:function(t){switch(parseInt(t)){case 1:return"Пн";case 2:return"Вт";case 3:return"Ср";case 4:return"Чт";case 5:return"Пт";case 6:return"Сб";case 0:return"Вс"}}}},$s=Ds,Ss=(i("31af"),Object(u["a"])($s,js,Ps,!1,null,"4648922e",null)),As=Ss.exports,Ms={data:function(){return{isDaySelected:!1,sendData:{},selectedDaysF:[],selectedDays:[],isDayOff:!1,workingHours:[],changedInfo:[],saved:[],show:!0,showInfo:!1,daysToChange:[],url:window.location.origin.replace("playfields.","")}},mounted:function(){window.scrollTo(0,0)},created:function(){var t=this,e=this.playfield.periods_data;this.saved=Object.keys(e),e.forEach((function(i,a){return t.sendData["".concat(a)]=e["".concat(a)]})),e.forEach((function(t){var e=Object.keys(t.prices);e=e.slice(e.indexOf(t.start_time)).concat(e.slice(0,e.indexOf(t.start_time)));var i={};e.forEach((function(e){return i[e]=t.prices[e]})),t.prices=i}));var i=[];this.saved.forEach((function(t){i.includes(JSON.stringify(e[t]))||i.push(JSON.stringify(e[t]))})),i.forEach((function(i){var a=[];if(e.filter((function(t,e){JSON.stringify(t)===i&&a.push("".concat(e))})),e[a[0]].dayoff)t.changedInfo.push({dayOff:!0,selectedDays:a});else{for(var s=Object.values(e[a[0]].prices),n=Object.keys(e[a[0]].prices),o=0,r=[],c=1;c<s.length;c++)s[o]!==s[c]&&(r.push({start_time:{text:n[o],value:n[o]},end_time:{value:n[c],text:n[c]},price:s[o]}),o=c);r.push({start_time:{text:n[o],value:n[o]},end_time:{value:e[a[0]].end_time,text:e[a[0]].end_time},price:s[o]}),t.changedInfo.push({dayoff:!1,selectedDays:a,start:e[a[0]].start_time,end:e[a[0]].end_time,info:r})}}))},components:{MenuHeader:fs,WorkingHours:ys,PriceSettings:xs,ChangedCard:As},methods:{clear:function(t){var e=this;this.selectedDays=this.selectedDays.filter((function(e){return!t.selectedDays.includes(e)})),this.saved=this.saved.filter((function(e){return!t.selectedDays.includes(e)})),Object.keys(this.sendData).forEach((function(t){e.saved.includes(t)||delete e.sendData[t]})),this.changedInfo=this.changedInfo.filter((function(e){return JSON.stringify(e)!==JSON.stringify(t)})),this.showInfo=!1,this.show=!0},dayFormat:function(t){return t.map((function(t){switch(t){case"1":return"Пн";case"2":return"Вт";case"3":return"Ср";case"4":return"Чт";case"5":return"Пт";case"6":return"Сб";case"0":return"Вс"}}))},dayFormatReversed:function(t){return t.map((function(t){switch(t){case"Пн":return"1";case"Вт":return"2";case"Ср":return"3";case"Чт":return"4";case"Пт":return"5";case"Сб":return"6";case"Вс":return"0"}}))},daySelected:function(t,e,i){var a,s=this;(this.show=!1,this.selectedDays=t,this.selectedDaysF=this.dayFormat(t),this.isDayOff=e,this.workingHours=i,this.isDayOff)&&(this.showInfo=!0,this.show=!0,(a=this.saved).push.apply(a,Object(st["a"])(t)),this.changedInfo.push({dayOff:this.isDayOff,selectedDays:this.selectedDays}),this.selectedDays.forEach((function(t){s.sendData[t]={dayoff:!0}})))},readyToChange:function(t,e,i,a){var s,n=this;this.changedInfo.push({info:t,dayOff:this.isDayOff,selectedDays:this.selectedDays,start:e,end:i}),this.selectedDays.forEach((function(t){n.sendData[[t]]={start_time:e,end_time:i,prices:Object(g["a"])({},a),dayoff:!1}})),(s=this.saved).push.apply(s,Object(st["a"])(this.selectedDays)),this.selectedDays=[],this.selectedDaysF=[],this.show=!0,this.showInfo=!0},commitChanges:function(){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,G.a.post("".concat(t.url,"/crm/user/").concat(window.$cookies.get("id"),"/playfield/").concat(t.playfield.id,"/update-data"),{periods_data:t.sendData},{headers:{Authorization:"Bearer ".concat(window.$cookies.get("access_token"))}}).then((function(e){200===e.status&&t.$router.push({name:"myFacility",params:{id:t.facility.id}})}));case 2:case"end":return e.stop()}}),e)})))()},back:function(){this.$router.go(-1)}},computed:Object(g["a"])(Object(g["a"])({},Object(C["c"])("playfield",["playfield"])),Object(C["c"])("facility",["facility"]))},Ts=Ms,Bs=(i("3fce"),Object(u["a"])(Ts,os,rs,!1,null,"ec98397a",null)),Ns=Bs.exports,Is=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"longTermOrder"},[i("order-header",{scopedSlots:t._u([{key:"orderHeader",fn:function(){return[i("p",{staticClass:"new__order"},[t._v("Новый заказ")]),i("div",{staticClass:"close__order"},[i("i",{staticClass:"fa fa-times-circle",attrs:{"aria-hidden":"true"},on:{click:function(e){return t.goBack()}}})])]},proxy:!0}])}),i("div",{staticClass:"info"},[i("p",{staticClass:"order__type"},[t._v(t._s(t.order.type?"Разовая бронь":"Долгосрочная бронь"))]),i("p",{staticClass:"start__date"},[t._v(t._s(t.order.start_date.format("dddd"))+", "+t._s(t.booking.start_time)+" - "+t._s(t.booking.end_time))]),i("p",{staticClass:"price"},[t._v("Цена: "+t._s(t.booking.price)+" ₸")]),i("p",{staticClass:"field"},[t._v(t._s(t.booking.pf_name))]),i("p",{staticClass:"cancel_time"},[t._v("Время отмены: "+t._s(t.getCancelTime))])]),i("div",{staticClass:"order__period"},[i("p",{staticClass:"title"},[t._v("Период бронирования")]),i("div",{staticClass:"order__periods"},[i("div",{staticClass:"start__period"},[i("p",{staticClass:"start__title"},[t._v("Дата начала")]),i("date-picker",{staticStyle:{width:"100%",height:"40px"},attrs:{format:"D MMMM, dd",placeholder:t.startDate,disabled:""},model:{value:t.startDate,callback:function(e){t.startDate=e},expression:"startDate"}})],1),i("div",{staticClass:"end__period"},[i("p",{staticClass:"end__title"},[t._v("Дата окончания")]),i("drop-down",{attrs:{options:t.getEndDateOptions,initialValue:t.getEndDateOptions[0],id:"end"},on:{selected:t.change}})],1)])]),i("div",{staticClass:"continue__button",class:{available:t.endDate},on:{click:function(e){return t.continueOrder()}}},[t._v(" Продолжить ")])],1)},Rs=[],Es={components:{OrderHeader:D,DatePicker:Fa["default"],DropDown:Gt},data:function(){return{startDate:"",endDate:""}},mounted:function(){window.scrollTo(0,0),T["extend"](Ht.a),this.startDate=this.getDateFormat(this.order.start_date),this.endDate=this.getEndDateOptions[0].value,this.$store.dispatch("order/setDate",{start_date:this.order.start_date,end_date:this.endDate})},computed:Object(g["a"])(Object(g["a"])(Object(g["a"])(Object(g["a"])({},Object(C["c"])("order",["order"])),Object(C["c"])("booking",["booking"])),Object(C["c"])("facility",["facility"])),{},{getEndDateOptions:function(){for(var t=[],e=this.order.start_date.add(7,"day"),i=0;i<=52;i++)t.push({value:e,text:this.getDateFormat(e)}),e=e.add(7,"day");return t},getCancelTime:function(){var t=this.order.type?this.facility.single_payment.cancel_time:this.facility.multiple_payment.cancel_time;return 0===t?"В любое время":" за ".concat(Math.floor(parseInt(t)/3600)," ч.")}}),methods:{getDateFormat:function(t){return T(t).format("DD MMMM, dd")},goBack:function(){this.$store.dispatch("order/resetState"),this.$store.dispatch("booking/resetState"),this.$router.push({path:"/"})},continueOrder:function(){this.$store.dispatch("order/setDate",{start_date:this.order.start_date,end_date:this.endDate}),this.$router.push({path:"/availableBookings"})},change:function(t,e){"end"===e&&(this.endDate=t.value)}}},Fs=Es,Vs=(i("7871"),Object(u["a"])(Fs,Is,Rs,!1,null,"3edac79f",null)),Ys=Vs.exports,Hs=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"longTermSearch"},[i("order-header",{scopedSlots:t._u([{key:"orderHeader",fn:function(){return[i("p",{staticClass:"new__order"},[t._v("Результаты поиска")]),i("div",{staticClass:"close__order",on:{click:function(e){return t.goBack()}}},[i("i",{staticClass:"fa fa-times-circle",attrs:{"aria-hidden":"true"}})])]},proxy:!0}])}),i("div",{staticClass:"longTermSearch__inner"},[i("div",{staticClass:"little__info"},[i("p",{staticClass:"first__line"},[t._v("Площадка №"+t._s(t.booking.playfield_id)+", "+t._s(t.getDayOfWeek(t.order.start_date)))]),i("p",{staticClass:"second__line"},[t._v("С "+t._s(t.getDateFormat(t.order.start_date))+" по "+t._s(t.getDateFormat(t.order.end_date)))]),i("p",{staticClass:"third__ling"},[t._v("Доступно "+t._s(t.getAvailable)+" из "+t._s(t.getAllBookingsCount))])]),t.booking_availibilty.length?i("div",{staticClass:"results"},t._l(t.bookings,(function(e,a){return i("booking-availability",{key:a,attrs:{date:e,isFree:t.booking_availibilty[a]},on:{handleSelect:t.handleSelect}})})),1):t._e()]),i("div",{staticClass:"information"},[i("p",{staticClass:"selected"},[t._v("Выбрано броней: "+t._s(t.getSelectedDaysCount))]),i("p",{staticClass:"all__price"},[t._v("Общая сумма: "+t._s(t.getAllPrice)+" тг")]),i("div",{staticClass:"continue",class:{canNotContinue:!t.getSelectedDaysCount},on:{click:function(e){return e.stopPropagation(),t.createOrder()}}},[t._v("Продолжить")])])],1)},Ws=[],zs=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"container",class:{free:t.selected}},[i("input",{attrs:{type:"checkbox",disabled:!t.isFree},domProps:{checked:t.selected},on:{click:function(e){return e.stopPropagation(),t.handleSelect()}}}),i("p",{staticClass:"date"},[t._v(t._s(t.getDateFormat))])])},Ls=[],qs={props:["date","isFree"],data:function(){return{selected:!1}},mounted:function(){this.selected=this.isFree},computed:{getDateFormat:function(){return this.date.locale("ru").format("DD MMMM")}},methods:{handleSelect:function(){this.selected=!this.selected,this.$emit("handleSelect",{date:this.date,isSelected:this.selected})}}},Us=qs,Js=(i("e20a"),Object(u["a"])(Us,zs,Ls,!1,null,"797d9b86",null)),Zs=Js.exports,Gs={data:function(){return{bookings:[],timelines:["05:00","05:30","06:00","06:30","07:00","07:30","08:00","08:30","09:00","09:30","10:00","10:30","11:00","11:30","12:00","12:30","13:00","13:30","14:00","14:30","15:00","15:30","16:00","16:30","17:00","17:30","18:00","18:30","19:00","19:30","20:00","20:30","21:00","21:30","22:00","22:30","23:00","23:30","00:00","00:30","01:00","01:30","02:00","02:30","03:00","03:30","04:00","04:30"],orders:JSON.parse(localStorage.getItem("orderInfo")),selectedDates:[],booking_availibilty:[],url:window.location.origin.replace("playfields.","")}},created:function(){this.getAllBookings()},mounted:function(){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return window.scrollTo(0,0),e.next=3,G.a.post("".concat(t.url,"/crm/user/").concat(window.$cookies.get("id"),"/playfield/").concat(t.booking.playfield_id,"/check-range"),t.bookings.map((function(e){return{start_time:t.booking.start_time,end_time:t.booking.end_time,date:e.format("YYYY-MM-DD")}})),{headers:{Authorization:"Bearer ".concat(window.$cookies.get("access_token"))}}).then((function(t){return t.data.response}));case 3:t.booking_availibilty=e.sent,t.selectedDates=t.bookings.map((function(e,i){return{date:e,isSelected:t.booking_availibilty[i]}}));case 5:case"end":return e.stop()}}),e)})))()},components:{OrderHeader:D,BookingAvailability:Zs},computed:Object(g["a"])(Object(g["a"])(Object(g["a"])(Object(g["a"])({},Object(C["c"])("order",["order"])),Object(C["b"])("booking",["getBooking"])),Object(C["c"])("booking",["booking"])),{},{getAllBookingsCount:function(){var t=this.order.start_date,e=this.order.end_date;return e.diff(t,"week")+1},getAvailable:function(){return this.booking_availibilty.filter((function(t){return t})).length},getAllPrice:function(){return this.getSelectedDaysCount*this.booking.price},getSelectedDaysCount:function(){return this.selectedDates.filter((function(t){return t.isSelected})).length}}),methods:{handleSelect:function(t){var e=this.selectedDates.findIndex((function(e){return e.date.format("YYYY-MM-DD")===t.date.format("YYYY-MM-DD")}));this.selectedDates[e]["isSelected"]=!this.selectedDates[e]["isSelected"]},getSelectedBookingsCount:function(){return this.selectedDates.filter((function(t){return t.isSelected})).length},getDayOfWeek:function(t){return T(t).locale("ru").format("dddd")},getDateFormat:function(t){return T(t).locale("ru").format("DD MMMM")},getAllBookings:function(){for(var t=this.order.start_date,e=this.getAllBookingsCount,i=0;i<e;i++)this.bookings.push(t),t=t.add(7,"day")},createOrder:function(){var t=this;if(this.getSelectedDaysCount){var e=[],i=this.selectedDates.filter((function(t){return t.isSelected}));i.forEach((function(i){t.$store.dispatch("booking/setBookingDate",i.date),e.push(t.getBooking)})),this.$store.dispatch("order/setDate",{start_date:i[0].date,end_date:i[i.length-1].date}),this.$store.dispatch("order/replaceBooking",e),this.$router.push({path:"/order"})}},goBack:function(){this.$store.dispatch("order/resetState"),this.$store.dispatch("booking/resetState"),this.$router.push({path:"/"})}}},Ks=Gs,Qs=(i("aad9"),Object(u["a"])(Ks,Hs,Ws,!1,null,"a030153c",null)),Xs=Qs.exports,tn=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"authorization"},[i("spinner",{attrs:{start:t.sending}}),i("div",{staticClass:"authorization__inner"},[t._m(0),i("div",{staticClass:"content"},[i("div",{staticClass:"content__inner"},[t._m(1),i("div",{staticClass:"user__inputs"},[i("div",{staticClass:"telephone__input"},[i("label",{attrs:{for:"telephone"}},[t._v("Номер телефона")]),i("div",{staticClass:"flex"},[i("input",{directives:[{name:"mask",rawName:"v-mask",value:"+7 ### ### ## ##",expression:"'+7 ### ### ## ##'"},{name:"model",rawName:"v-model",value:t.tel,expression:"tel"}],attrs:{type:"tel",name:"telephone",id:"telephone",required:"",placeholder:"+7"},domProps:{value:t.tel},on:{input:function(e){e.target.composing||(t.tel=e.target.value)}}})])]),i("div",{staticClass:"password__input"},[i("label",{attrs:{for:"password"}},[t._v("Пароль")]),i("div",{staticClass:"flex"},[i("input",{directives:[{name:"model",rawName:"v-model",value:t.password,expression:"password"}],ref:"password",attrs:{type:"password",name:"password",id:"password",required:""},domProps:{value:t.password},on:{input:function(e){e.target.composing||(t.password=e.target.value)}}}),i("span",{staticClass:"showHide"},[i("i",{directives:[{name:"show",rawName:"v-show",value:t.showPassword,expression:"showPassword"}],staticClass:"fas fa-eye",on:{click:function(e){return e.stopPropagation(),t.togglePassword.apply(null,arguments)}}}),i("i",{directives:[{name:"show",rawName:"v-show",value:!t.showPassword,expression:"!showPassword"}],staticClass:"fas fa-eye-slash",on:{click:function(e){return e.stopPropagation(),t.togglePassword.apply(null,arguments)}}})])])])]),i("div",{staticClass:"signIn__btn",on:{click:t.signIn}},[t._v(" Войти ")]),i("p",{staticClass:"forget__password"},[t._v("Забыли пароль?")])])])])],1)},en=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"header"},[i("img",{attrs:{src:"/img/logo.svg",alt:"Nelsette"}})])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"content__title"},[i("p",{staticClass:"signIn"},[t._v("Вход")])])}],an={data:function(){return{showPassword:!1,tel:"",password:"",sending:!1}},components:{Spinner:f},mounted:function(){window.scrollTo(0,0)},methods:{togglePassword:function(){this.showPassword?this.$refs["password"].type="password":this.$refs["password"].type="text",this.showPassword=!this.showPassword},signIn:function(){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function e(){var i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.sending=!0,t.$store.dispatch("spinner/setStart",!0),i=t.tel.split(" ").join(""),e.next=5,t.$store.dispatch("admin/loginUser",{tel:i,password:t.password}).then(Object(o["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.$store.dispatch("facility/getAllFacilities");case 2:t.$router.push({path:"/"});case 3:case"end":return e.stop()}}),e)})))).catch((function(){alert("Пожалуйста, убедитесь, что данные были введены правильно!")}));case 5:t.sending=!1;case 6:case"end":return e.stop()}}),e)})))()}},computed:Object(g["a"])(Object(g["a"])({},Object(C["b"])("facility",["getFacility"])),Object(C["c"])("spinner",["start"]))},sn=an,nn=(i("14a7"),Object(u["a"])(sn,tn,en,!1,null,"8860edd4",null)),on=nn.exports,rn=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"facility"},[i("MainHeader",{on:{changed:t.changed},scopedSlots:t._u([{key:"title",fn:function(){return[i("p",{staticClass:"title"},[t._v("Настройки")])]},proxy:!0}])}),i("div",{staticClass:"content"},[i("div",{staticClass:"content__inner"},[i("div",{staticClass:"add__photo"},[i("div",{directives:[{name:"show",rawName:"v-show",value:t.photoAction||t.show,expression:"photoAction||show"}],staticClass:"backdrop",on:{click:function(e){e.stopPropagation(),t.photoAction=!1,t.show=!1}}}),i("div",{staticClass:"photo__icon",on:{click:function(e){t.photoAction=!0}}},[i("input",{ref:"facility__photo",attrs:{type:"file",name:"file",accept:"image/png, image/jpeg"},on:{change:t.setPhoto}}),t.hasNotPhoto?i("i",{staticClass:"fas fa-camera"}):t.hasNotPhoto?t._e():i("img",{attrs:{src:t.url+"/"+t.facility.avatar}})])]),i("FacilityName"),i("FacilityPhoto"),i("FacilityAddress"),i("FacilityContact"),i("FacilityDescription"),i("FacilityInfrastructure"),i("FacilityPayment"),i("p",{staticClass:"playfields"},[t._v("Площадки")]),t._l(t.facility.playfields,(function(e){return i("playfield-card",{key:e.id,attrs:{playfield:e},on:{goToPlayfield:t.goToPlayfield}})})),i("div",{staticClass:"logout_btn"},[i("button",{staticClass:"logout",on:{click:function(e){return e.stopPropagation(),t.logOut.apply(null,arguments)}}},[t._v("Выйти")])])],2)]),i("PhotoModal",{directives:[{name:"show",rawName:"v-show",value:t.photoAction,expression:"photoAction"}],attrs:{needed:!t.hasNotPhoto},on:{changePhoto:t.changePhoto,deletePhoto:t.deletePhoto,showPhoto:t.showPhoto}}),i("photo-card",{directives:[{name:"show",rawName:"v-show",value:t.show,expression:"show"}],attrs:{path:t.url+"/"+t.facility.avatar},on:{closePhoto:function(e){t.show=!1}}}),i("bottom-menu")],1)},cn=[],ln=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"playfieldCard",on:{click:function(e){return t.goToPlayfield()}}},[i("div",{staticClass:"playFieldCard__inner"},[i("div",{staticClass:"firstLine"},[i("p",{staticClass:"playfield__name"},[t._v(t._s(t.playfield.pf_name))]),i("i",{staticClass:"fas fa-chevron-right"})]),i("div",{staticClass:"playfield__description line1"},[t._v(t._s(t.getIndoor)+" "+t._s(t.getSurface))]),i("div",{staticClass:"playfield__description line2"},[t._v(t._s(t.getFormat)+t._s(t.getLengthWidth))])])])},dn=[],un={props:["playfield"],methods:{goToPlayfield:function(){this.$store.dispatch("playfield/setPlayfield",this.playfield),this.$emit("goToPlayfield",this.playfield.id)}},computed:{getSurface:function(){var t="";switch(this.playfield.surf_type){case 0:t="Трава.";break;case 1:t="Искусственная трава.";break;case 2:t="Паркет.";break;case 3:t="Грунт.";break;case 4:t="Песок.";break;case 5:t="Бетон.";break;case 6:t="Резина.";break;default:t="Не указан."}return t},getIndoor:function(){return this.playfield.indoor?"Крытая.":"Открытая."},getFormat:function(){return this.playfield.format?"".concat(this.playfield.format,"x").concat(this.playfield.format,"."):"Не указан."},getLengthWidth:function(){return"".concat(this.playfield.length,"м x ").concat(this.playfield.width,"м.")}}},pn=un,fn=(i("78df"),Object(u["a"])(pn,ln,dn,!1,null,"032091f4",null)),_n=fn.exports,hn=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"facility__name",on:{click:function(e){t.clicked=!0}}},[i("div",{directives:[{name:"show",rawName:"v-show",value:t.clicked,expression:"clicked"}],staticClass:"backdrop",on:{click:function(e){return e.stopPropagation(),t.closePopup.apply(null,arguments)}}}),t._m(0),i("div",{staticClass:"value"},[t._v(t._s(t.facility.fc_name))]),i("edit-popup",{directives:[{name:"show",rawName:"v-show",value:t.clicked,expression:"clicked"}],on:{close:t.closePopup},scopedSlots:t._u([{key:"title",fn:function(){return[i("p",{staticClass:"facility__title"},[t._v("Название")])]},proxy:!0},{key:"content",fn:function(){return[i("div",{staticClass:"content"},[i("div",{staticClass:"content__inner"},[i("p",{staticClass:"name__required"},[t._v("Название сооружения*")]),i("input",{directives:[{name:"model",rawName:"v-model",value:t.changedName,expression:"changedName"}],attrs:{type:"text",name:"name",id:"facility_name",placeholder:"Например: Плошадка №1",maxlength:"25"},domProps:{value:t.changedName},on:{input:function(e){e.target.composing||(t.changedName=e.target.value)}}})])])]},proxy:!0},{key:"button",fn:function(){return[i("div",{staticClass:"save__btn"},[i("div",{staticClass:"btn",class:{active:t.changedName.trim().length},on:{click:function(e){return e.stopPropagation(),t.saveName()}}},[t._v("Сохранить")])])]},proxy:!0}])})],1)},vn=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"flex"},[i("div",{staticClass:"flex__key"},[t._v("Название")]),i("i",{staticClass:"fas fa-chevron-right"})])}],mn=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"editPopup"},[i("div",{staticClass:"editPopup__inner"},[i("div",{staticClass:"editPopup__header"},[t._t("title"),i("div",{staticClass:"close__btn"},[i("i",{staticClass:"fas fa-times",on:{click:function(e){return e.stopPropagation(),t.close.apply(null,arguments)}}})])],2),i("div",{staticClass:"editPopup__content"},[t._t("content")],2),t._t("button")],2)])},gn=[],yn={methods:{close:function(){this.$emit("close")}}},bn=yn,kn=(i("475d"),Object(u["a"])(bn,mn,gn,!1,null,"924dc2d6",null)),Cn=kn.exports,wn={data:function(){return{clicked:!1,changedName:"",url:window.location.origin.replace("playfields.","")}},created:function(){this.setValues()},components:{EditPopup:Cn},computed:Object(g["a"])({},Object(C["c"])("facility",["facility"])),methods:{closePopup:function(){this.clicked=!1,this.setValues()},saveName:function(){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,G.a.post("".concat(t.url,"/crm/user/").concat(window.$cookies.get("id"),"/facility/").concat(t.facility.id,"/update-data"),{fc_name:t.changedName},{headers:{Authorization:"Bearer ".concat(window.$cookies.get("access_token"))}}).then((function(e){return t.$store.dispatch("facility/setFacilityName",e.data.facility.fc_name)}));case 2:t.clicked=!1;case 3:case"end":return e.stop()}}),e)})))()},setValues:function(){this.changedName=this.facility.fc_name}}},On=wn,xn=(i("ee72"),Object(u["a"])(On,hn,vn,!1,null,"648998c3",null)),jn=xn.exports,Pn=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"facility__address",on:{click:function(e){e.stopPropagation(),t.clicked=!0}}},[i("div",{directives:[{name:"show",rawName:"v-show",value:t.clicked,expression:"clicked"}],staticClass:"backdrop",on:{click:function(e){return e.stopPropagation(),t.closePopup.apply(null,arguments)}}}),t._m(0),i("div",{staticClass:"value"},[t._v(t._s(t.facility.address))]),i("edit-popup",{directives:[{name:"show",rawName:"v-show",value:t.clicked,expression:"clicked"}],on:{close:t.closePopup},scopedSlots:t._u([{key:"title",fn:function(){return[i("p",{staticClass:"facility__title"},[t._v("Адрес")])]},proxy:!0},{key:"content",fn:function(){return[i("div",{staticClass:"content"},[i("div",{staticClass:"content__inner"},[i("p",{staticClass:"facility__location"},[t._v("Местоположение*")]),i("div",{staticClass:"facility__map"},[i("i",{staticClass:"fas fa-map-marker-alt"}),i("input",{directives:[{name:"model",rawName:"v-model",value:t.address,expression:"address"}],attrs:{type:"text",name:"map",id:"map",placeholder:"Укажите адрес на карте, либо введите вручную",disabled:""},domProps:{value:t.address},on:{input:function(e){e.target.composing||(t.address=e.target.value)}}})]),i("div",{staticClass:"inMap__btn"},[i("div",{staticClass:"map__btn"}),i("div",{attrs:{id:"mapid"}})])])])]},proxy:!0},{key:"button",fn:function(){return[i("div",{staticClass:"save__btn"},[i("div",{staticClass:"btn active",on:{click:function(e){return e.stopPropagation(),t.saveLocation.apply(null,arguments)}}},[t._v("Сохранить")])])]},proxy:!0}])})],1)},Dn=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"flex"},[i("div",{staticClass:"flex__key"},[t._v("Адрес")]),i("i",{staticClass:"fas fa-chevron-right"})])}],$n=i("e11e"),Sn=i.n($n),An={data:function(){return{clicked:!1,long:0,lat:0,address:"",url:window.location.origin.replace("playfields.","")}},created:function(){this.setValues()},mounted:function(){this.setMap()},computed:Object(g["a"])({},Object(C["c"])("facility",["facility"])),components:{EditPopup:Cn},methods:{setMap:function(){var t=this,e=Sn.a.map("mapid").setView([this.lat,this.long],18);Sn.a.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{attribution:'&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'}).addTo(e);var i=Sn.a.marker([this.lat,this.long]).addTo(e);window.dispatchEvent(new Event("resize")),e.on("click",(function(a){i.setLatLng(a.latlng),e.setView(i.getLatLng(),e.getZoom());var s=i.getLatLng(),n=s.lat,o=s.lng;t.lat=n,t.long=o,G.a.get("https://api.opencagedata.com/geocode/v1/json?&key=0c63f52ded21aee72fecbb8563769237&q=".concat(n,"+").concat(o)).then((function(e){return t.address=e.data.results[0].formatted}))}))},closePopup:function(){this.clicked=!1,this.setValues()},setValues:function(){this.long=parseFloat(this.facility.longitude),this.lat=parseFloat(this.facility.latitude),this.address=this.facility.address},saveLocation:function(){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,G.a.post("".concat(t.url,"/crm/user/").concat(window.$cookies.get("id"),"/facility/").concat(t.facility.id,"/update-data"),{longitude:t.long,latitude:t.lat,address:t.address},{headers:{Authorization:"Bearer ".concat(window.$cookies.get("access_token"))}}).then((function(e){t.$store.dispatch("facility/setFacilityCoordinates",{address:e.data.facility.address,lng:e.data.facility.longitude,lat:e.data.facility.latitude})}));case 2:t.clicked=!1;case 3:case"end":return e.stop()}}),e)})))()}}},Mn=An,Tn=(i("625f"),Object(u["a"])(Mn,Pn,Dn,!1,null,"14fa24aa",null)),Bn=Tn.exports,Nn=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"facility__description",on:{click:function(e){t.clicked=!0}}},[i("div",{directives:[{name:"show",rawName:"v-show",value:t.clicked,expression:"clicked"}],staticClass:"backdrop",on:{click:function(e){return e.stopPropagation(),t.closePopup.apply(null,arguments)}}}),t._m(0),i("div",{staticClass:"value"},[t._v(t._s(t.facility.description))]),i("edit-popup",{directives:[{name:"show",rawName:"v-show",value:t.clicked,expression:"clicked"}],on:{close:t.closePopup},scopedSlots:t._u([{key:"title",fn:function(){return[i("p",{staticClass:"facility__title"},[t._v("Описание")])]},proxy:!0},{key:"content",fn:function(){return[i("div",{staticClass:"content"},[i("div",{staticClass:"content__inner"},[i("p",{staticClass:"facility_description"},[t._v("Описание сооружения*")]),i("textarea",{directives:[{name:"model",rawName:"v-model",value:t.changedDescription,expression:"changedDescription"}],attrs:{id:"facility_description",name:"description",placeholder:"Расскажите о соружении"},domProps:{value:t.changedDescription},on:{input:function(e){e.target.composing||(t.changedDescription=e.target.value)}}})])])]},proxy:!0},{key:"button",fn:function(){return[i("div",{staticClass:"save__btn"},[i("div",{staticClass:"btn",class:{active:t.changedDescription.trim().length},on:{click:function(e){return e.stopPropagation(),t.setDescription()}}},[t._v("Сохранить")])])]},proxy:!0}])})],1)},In=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"flex"},[i("div",{staticClass:"flex__key"},[t._v("Описание")]),i("i",{staticClass:"fas fa-chevron-right"})])}],Rn=(i("a4d3"),i("e01a"),{data:function(){return{clicked:!1,changedDescription:"",url:window.location.origin.replace("playfields.","")}},created:function(){this.setValues()},components:{EditPopup:Cn},computed:Object(g["a"])({},Object(C["c"])("facility",["facility"])),methods:{closePopup:function(){this.clicked=!1,this.setValues()},setDescription:function(){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,G.a.post("".concat(t.url,"/crm/user/").concat(window.$cookies.get("id"),"/facility/").concat(t.facility.id,"/update-data"),{description:t.changedDescription},{headers:{Authorization:"Bearer ".concat(window.$cookies.get("access_token"))}}).then((function(e){return t.$store.dispatch("facility/setFacilityDescription",e.data.facility.description)}));case 2:t.clicked=!1;case 3:case"end":return e.stop()}}),e)})))()},setValues:function(){this.changedDescription=this.facility.description?this.facility.description:""}}}),En=Rn,Fn=(i("1c78"),Object(u["a"])(En,Nn,In,!1,null,"9c2168ac",null)),Vn=Fn.exports,Yn=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"facility__infrastructure",on:{click:function(e){e.stopPropagation(),t.clicked=!0}}},[i("div",{directives:[{name:"show",rawName:"v-show",value:t.clicked,expression:"clicked"}],staticClass:"backdrop",on:{click:function(e){return e.stopPropagation(),t.closePopup.apply(null,arguments)}}}),t._m(0),i("div",{staticClass:"value"},t._l(t.selectedOptions,(function(e,a){return i("div",{key:a,staticClass:"infr__option"},[i("div",{staticClass:"option"},[t._v(t._s(t.getValue(e)))]),i("div",{staticClass:"circle"})])})),0),i("edit-popup",{directives:[{name:"show",rawName:"v-show",value:t.clicked,expression:"clicked"}],on:{close:t.closePopup},scopedSlots:t._u([{key:"title",fn:function(){return[i("p",{staticClass:"facility__title"},[t._v("Инфраструктура")])]},proxy:!0},{key:"content",fn:function(){return[i("div",{staticClass:"content"},[i("div",{staticClass:"content__inner"},[i("div",{staticClass:"shower common"},[i("input",{directives:[{name:"model",rawName:"v-model",value:t.selectedOptions,expression:"selectedOptions"}],attrs:{type:"checkbox",name:"shower",id:"shower",value:"shower"},domProps:{checked:Array.isArray(t.selectedOptions)?t._i(t.selectedOptions,"shower")>-1:t.selectedOptions},on:{change:function(e){var i=t.selectedOptions,a=e.target,s=!!a.checked;if(Array.isArray(i)){var n="shower",o=t._i(i,n);a.checked?o<0&&(t.selectedOptions=i.concat([n])):o>-1&&(t.selectedOptions=i.slice(0,o).concat(i.slice(o+1)))}else t.selectedOptions=s}}}),i("label",{attrs:{for:"shower"}},[t._v("Душ")])]),i("div",{staticClass:"cloakroom common"},[i("input",{directives:[{name:"model",rawName:"v-model",value:t.selectedOptions,expression:"selectedOptions"}],attrs:{type:"checkbox",name:"cloakroom",id:"cloakroom",value:"cloakroom"},domProps:{checked:Array.isArray(t.selectedOptions)?t._i(t.selectedOptions,"cloakroom")>-1:t.selectedOptions},on:{change:function(e){var i=t.selectedOptions,a=e.target,s=!!a.checked;if(Array.isArray(i)){var n="cloakroom",o=t._i(i,n);a.checked?o<0&&(t.selectedOptions=i.concat([n])):o>-1&&(t.selectedOptions=i.slice(0,o).concat(i.slice(o+1)))}else t.selectedOptions=s}}}),i("label",{attrs:{for:"cloakroom"}},[t._v("Раздевалка")])]),i("div",{staticClass:"parking common"},[i("input",{directives:[{name:"model",rawName:"v-model",value:t.selectedOptions,expression:"selectedOptions"}],attrs:{type:"checkbox",name:"parking",id:"parking",value:"parking"},domProps:{checked:Array.isArray(t.selectedOptions)?t._i(t.selectedOptions,"parking")>-1:t.selectedOptions},on:{change:function(e){var i=t.selectedOptions,a=e.target,s=!!a.checked;if(Array.isArray(i)){var n="parking",o=t._i(i,n);a.checked?o<0&&(t.selectedOptions=i.concat([n])):o>-1&&(t.selectedOptions=i.slice(0,o).concat(i.slice(o+1)))}else t.selectedOptions=s}}}),i("label",{attrs:{for:"parking"}},[t._v("Парковка")])]),i("div",{staticClass:"water common"},[i("input",{directives:[{name:"model",rawName:"v-model",value:t.selectedOptions,expression:"selectedOptions"}],attrs:{type:"checkbox",name:"water",id:"water",value:"water"},domProps:{checked:Array.isArray(t.selectedOptions)?t._i(t.selectedOptions,"water")>-1:t.selectedOptions},on:{change:function(e){var i=t.selectedOptions,a=e.target,s=!!a.checked;if(Array.isArray(i)){var n="water",o=t._i(i,n);a.checked?o<0&&(t.selectedOptions=i.concat([n])):o>-1&&(t.selectedOptions=i.slice(0,o).concat(i.slice(o+1)))}else t.selectedOptions=s}}}),i("label",{attrs:{for:"water"}},[t._v("Вода")])]),i("div",{staticClass:"ball common"},[i("input",{directives:[{name:"model",rawName:"v-model",value:t.selectedOptions,expression:"selectedOptions"}],attrs:{type:"checkbox",name:"balls",id:"balls",value:"balls"},domProps:{checked:Array.isArray(t.selectedOptions)?t._i(t.selectedOptions,"balls")>-1:t.selectedOptions},on:{change:function(e){var i=t.selectedOptions,a=e.target,s=!!a.checked;if(Array.isArray(i)){var n="balls",o=t._i(i,n);a.checked?o<0&&(t.selectedOptions=i.concat([n])):o>-1&&(t.selectedOptions=i.slice(0,o).concat(i.slice(o+1)))}else t.selectedOptions=s}}}),i("label",{attrs:{for:"balls"}},[t._v("Мячи")])]),i("div",{staticClass:"shirtfront common"},[i("input",{directives:[{name:"model",rawName:"v-model",value:t.selectedOptions,expression:"selectedOptions"}],attrs:{type:"checkbox",name:"shirtfronts",id:"shirtfronts",value:"shirtfronts"},domProps:{checked:Array.isArray(t.selectedOptions)?t._i(t.selectedOptions,"shirtfronts")>-1:t.selectedOptions},on:{change:function(e){var i=t.selectedOptions,a=e.target,s=!!a.checked;if(Array.isArray(i)){var n="shirtfronts",o=t._i(i,n);a.checked?o<0&&(t.selectedOptions=i.concat([n])):o>-1&&(t.selectedOptions=i.slice(0,o).concat(i.slice(o+1)))}else t.selectedOptions=s}}}),i("label",{attrs:{for:"shirtfronts"}},[t._v("Манишка")])]),i("div",{staticClass:"sauna common"},[i("input",{directives:[{name:"model",rawName:"v-model",value:t.selectedOptions,expression:"selectedOptions"}],attrs:{type:"checkbox",name:"sauna",id:"sauna",value:"sauna"},domProps:{checked:Array.isArray(t.selectedOptions)?t._i(t.selectedOptions,"sauna")>-1:t.selectedOptions},on:{change:function(e){var i=t.selectedOptions,a=e.target,s=!!a.checked;if(Array.isArray(i)){var n="sauna",o=t._i(i,n);a.checked?o<0&&(t.selectedOptions=i.concat([n])):o>-1&&(t.selectedOptions=i.slice(0,o).concat(i.slice(o+1)))}else t.selectedOptions=s}}}),i("label",{attrs:{for:"sauna"}},[t._v("Сауна")])]),i("div",{staticClass:"bar common"},[i("input",{directives:[{name:"model",rawName:"v-model",value:t.selectedOptions,expression:"selectedOptions"}],attrs:{type:"checkbox",name:"bar-cafe",id:"bar-cafe",value:"bar-cafe"},domProps:{checked:Array.isArray(t.selectedOptions)?t._i(t.selectedOptions,"bar-cafe")>-1:t.selectedOptions},on:{change:function(e){var i=t.selectedOptions,a=e.target,s=!!a.checked;if(Array.isArray(i)){var n="bar-cafe",o=t._i(i,n);a.checked?o<0&&(t.selectedOptions=i.concat([n])):o>-1&&(t.selectedOptions=i.slice(0,o).concat(i.slice(o+1)))}else t.selectedOptions=s}}}),i("label",{attrs:{for:"bar-cafe"}},[t._v("Бар/Кафе")])]),i("div",{staticClass:"pump common"},[i("input",{directives:[{name:"model",rawName:"v-model",value:t.selectedOptions,expression:"selectedOptions"}],attrs:{type:"checkbox",name:"pump",id:"pump",value:"pump"},domProps:{checked:Array.isArray(t.selectedOptions)?t._i(t.selectedOptions,"pump")>-1:t.selectedOptions},on:{change:function(e){var i=t.selectedOptions,a=e.target,s=!!a.checked;if(Array.isArray(i)){var n="pump",o=t._i(i,n);a.checked?o<0&&(t.selectedOptions=i.concat([n])):o>-1&&(t.selectedOptions=i.slice(0,o).concat(i.slice(o+1)))}else t.selectedOptions=s}}}),i("label",{attrs:{for:"pump"}},[t._v("Насос")])]),i("div",{staticClass:"tribune common"},[i("input",{directives:[{name:"model",rawName:"v-model",value:t.selectedOptions,expression:"selectedOptions"}],attrs:{type:"checkbox",name:"tribunes",id:"tribunes",value:"tribunes"},domProps:{checked:Array.isArray(t.selectedOptions)?t._i(t.selectedOptions,"tribunes")>-1:t.selectedOptions},on:{change:function(e){var i=t.selectedOptions,a=e.target,s=!!a.checked;if(Array.isArray(i)){var n="tribunes",o=t._i(i,n);a.checked?o<0&&(t.selectedOptions=i.concat([n])):o>-1&&(t.selectedOptions=i.slice(0,o).concat(i.slice(o+1)))}else t.selectedOptions=s}}}),i("label",{attrs:{for:"tribunes"}},[t._v("Трибуна")])]),i("div",{staticClass:"heating common"},[i("input",{directives:[{name:"model",rawName:"v-model",value:t.selectedOptions,expression:"selectedOptions"}],attrs:{type:"checkbox",name:"heating",id:"heating",value:"heating"},domProps:{checked:Array.isArray(t.selectedOptions)?t._i(t.selectedOptions,"heating")>-1:t.selectedOptions},on:{change:function(e){var i=t.selectedOptions,a=e.target,s=!!a.checked;if(Array.isArray(i)){var n="heating",o=t._i(i,n);a.checked?o<0&&(t.selectedOptions=i.concat([n])):o>-1&&(t.selectedOptions=i.slice(0,o).concat(i.slice(o+1)))}else t.selectedOptions=s}}}),i("label",{attrs:{for:"heating"}},[t._v("Отопление")])]),i("div",{staticClass:"conditioner common"},[i("input",{directives:[{name:"model",rawName:"v-model",value:t.selectedOptions,expression:"selectedOptions"}],attrs:{type:"checkbox",name:"conditioner",id:"conditioner",value:"conditioner"},domProps:{checked:Array.isArray(t.selectedOptions)?t._i(t.selectedOptions,"conditioner")>-1:t.selectedOptions},on:{change:function(e){var i=t.selectedOptions,a=e.target,s=!!a.checked;if(Array.isArray(i)){var n="conditioner",o=t._i(i,n);a.checked?o<0&&(t.selectedOptions=i.concat([n])):o>-1&&(t.selectedOptions=i.slice(0,o).concat(i.slice(o+1)))}else t.selectedOptions=s}}}),i("label",{attrs:{for:"conditioner"}},[t._v("Кондиционер")])]),i("div",{staticClass:"training-equipment common"},[i("input",{directives:[{name:"model",rawName:"v-model",value:t.selectedOptions,expression:"selectedOptions"}],attrs:{type:"checkbox",name:"training-equipment",id:"training-equipment",value:"training-equipment"},domProps:{checked:Array.isArray(t.selectedOptions)?t._i(t.selectedOptions,"training-equipment")>-1:t.selectedOptions},on:{change:function(e){var i=t.selectedOptions,a=e.target,s=!!a.checked;if(Array.isArray(i)){var n="training-equipment",o=t._i(i,n);a.checked?o<0&&(t.selectedOptions=i.concat([n])):o>-1&&(t.selectedOptions=i.slice(0,o).concat(i.slice(o+1)))}else t.selectedOptions=s}}}),i("label",{attrs:{for:"training-equipment"}},[t._v("Тренировочный инвентарь")])]),i("div",{staticClass:"toilet common"},[i("input",{directives:[{name:"model",rawName:"v-model",value:t.selectedOptions,expression:"selectedOptions"}],attrs:{type:"checkbox",name:"toilet",id:"toilet",value:"toilet"},domProps:{checked:Array.isArray(t.selectedOptions)?t._i(t.selectedOptions,"toilet")>-1:t.selectedOptions},on:{change:function(e){var i=t.selectedOptions,a=e.target,s=!!a.checked;if(Array.isArray(i)){var n="toilet",o=t._i(i,n);a.checked?o<0&&(t.selectedOptions=i.concat([n])):o>-1&&(t.selectedOptions=i.slice(0,o).concat(i.slice(o+1)))}else t.selectedOptions=s}}}),i("label",{attrs:{for:"toilet"}},[t._v("Туалет")])]),i("div",{staticClass:"lighting common"},[i("input",{directives:[{name:"model",rawName:"v-model",value:t.selectedOptions,expression:"selectedOptions"}],attrs:{type:"checkbox",name:"lighting",id:"lighting",value:"lighting"},domProps:{checked:Array.isArray(t.selectedOptions)?t._i(t.selectedOptions,"lighting")>-1:t.selectedOptions},on:{change:function(e){var i=t.selectedOptions,a=e.target,s=!!a.checked;if(Array.isArray(i)){var n="lighting",o=t._i(i,n);a.checked?o<0&&(t.selectedOptions=i.concat([n])):o>-1&&(t.selectedOptions=i.slice(0,o).concat(i.slice(o+1)))}else t.selectedOptions=s}}}),i("label",{attrs:{for:"lighting"}},[t._v("Освещение")])]),i("div",{staticClass:"sporting-goods common"},[i("input",{directives:[{name:"model",rawName:"v-model",value:t.selectedOptions,expression:"selectedOptions"}],attrs:{type:"checkbox",name:"sporting-goods",id:"sporting-goods",value:"sporting-goods"},domProps:{checked:Array.isArray(t.selectedOptions)?t._i(t.selectedOptions,"sporting-goods")>-1:t.selectedOptions},on:{change:function(e){var i=t.selectedOptions,a=e.target,s=!!a.checked;if(Array.isArray(i)){var n="sporting-goods",o=t._i(i,n);a.checked?o<0&&(t.selectedOptions=i.concat([n])):o>-1&&(t.selectedOptions=i.slice(0,o).concat(i.slice(o+1)))}else t.selectedOptions=s}}}),i("label",{attrs:{for:"sporting-goods"}},[t._v("Спорттовары")])])])])]},proxy:!0},{key:"button",fn:function(){return[i("div",{staticClass:"save__btn"},[i("div",{staticClass:"btn",class:{active:t.selectedOptions.length},on:{click:function(e){return e.stopPropagation(),t.setInfrastructure()}}},[t._v("Применить")])])]},proxy:!0}])})],1)},Hn=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"flex"},[i("div",{staticClass:"flex__key"},[t._v("Инфраструктура")]),i("i",{staticClass:"fas fa-chevron-right"})])}],Wn={data:function(){return{clicked:!1,options:["shower","cloakroom","parking","water","balls","shirtfronts","sauna","bar-cafe","pump","tribunes","heating","conditioner","training-equipment","toilet","lighting","sporting-goods"],selectedOptions:[],url:window.location.origin.replace("playfields.","")}},computed:Object(g["a"])({},Object(C["c"])("facility",["facility"])),created:function(){this.setValues()},methods:{closePopup:function(){this.clicked=!1,this.setValues()},setInfrastructure:function(){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function e(){var i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return i={},t.options.map((function(e){return Object(at["a"])({},e,t.selectedOptions.includes(e))})).forEach((function(t){return i=Object(g["a"])(Object(g["a"])({},i),t)})),e.next=4,G.a.post("".concat(t.url,"/crm/user/").concat(window.$cookies.get("id"),"/facility/").concat(t.facility.id,"/update-data"),{infrastructure:i},{headers:{Authorization:"Bearer ".concat(window.$cookies.get("access_token"))}}).then((function(e){return t.$store.dispatch("facility/setFacilityInfr",e.data.facility.infrastructure)}));case 4:t.clicked=!1;case 5:case"end":return e.stop()}}),e)})))()},setValues:function(){var t=this;this.selectedOptions=Object.keys(this.facility.infrastructure).filter((function(e){return t.facility.infrastructure[e]}))},getValue:function(t){switch(t){case"shower":return"Душ";case"cloakroom":return"Раздевалка";case"parking":return"Паркинг";case"water":return"Вода";case"balls":return"Мячи";case"shirtfronts":return"Манишки";case"sauna":return"Сауна";case"bar-cafe":return"Бар/кафе";case"pump":return"Насос";case"tribunes":return"Трибуны";case"heating":return"Отопление";case"conditioner":return"Кондиционер";case"training-equipment":return"Тренировочный инвентарь";case"toilet":return"Туалет";case"lighting":return"Освещение";case"sporting-goods":return"Спортивные товары"}}},components:{EditPopup:Cn}},zn=Wn,Ln=(i("413b"),Object(u["a"])(zn,Yn,Hn,!1,null,"71aa8508",null)),qn=Ln.exports,Un=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"facility__payment",on:{click:function(e){t.clicked=!0}}},[i("div",{directives:[{name:"show",rawName:"v-show",value:t.clicked,expression:"clicked"}],staticClass:"backdrop",on:{click:function(e){return e.stopPropagation(),t.closePopup.apply(null,arguments)}}}),t._m(0),i("div",{staticClass:"value"},[t._v("Предоплата: "+t._s(t.prepaid)+" ₸")]),i("edit-popup",{directives:[{name:"show",rawName:"v-show",value:t.clicked,expression:"clicked"}],on:{close:t.closePopup},scopedSlots:t._u([{key:"title",fn:function(){return[i("p",{staticClass:"facility__title"},[t._v("Условия оплаты")])]},proxy:!0},{key:"content",fn:function(){return[i("div",{staticClass:"content"},[i("div",{staticClass:"content__inner"},[i("div",{staticClass:"oneTerm"},[i("p",{staticClass:"order_type"},[t._v("Разовая бронь")]),i("div",{staticClass:"dropdown__cancel"},[i("p",{staticClass:"cancel__title"},[t._v("Время отмены брони*")]),i("div",{staticClass:"dropdown"},[i("select",{ref:"cancel_time_one"},[i("option",{attrs:{value:"0"}},[t._v("В любое время")]),i("option",{attrs:{value:"1"}},[t._v("За 1 час")]),i("option",{attrs:{value:"2"}},[t._v("За 2 часа")]),i("option",{attrs:{value:"4"}},[t._v("За 4 часа")]),i("option",{attrs:{value:"6"}},[t._v("За 6 часов")]),i("option",{attrs:{value:"8"}},[t._v("За 8 часов")]),i("option",{attrs:{value:"10"}},[t._v("За 10 часов")]),i("option",{attrs:{value:"12",selected:""}},[t._v("За 12 часов")]),i("option",{attrs:{value:"24"}},[t._v("За 24 часа")]),i("option",{attrs:{value:"48"}},[t._v("За 48 часов")])])])]),i("p",{staticClass:"payment__title"},[t._v("Сумма предоплаты*")]),i("input",{directives:[{name:"model",rawName:"v-model",value:t.prepaid,expression:"prepaid"}],staticClass:"input",attrs:{type:"text",name:"prepaid",id:"prepaid",placeholder:"0 ₸",inputmode:"tel"},domProps:{value:t.prepaid},on:{keypress:function(e){return e.stopPropagation(),t.isNumber(e)},input:function(e){e.target.composing||(t.prepaid=e.target.value)}}}),i("p",{staticClass:"message_client"},[t._v("Сообщение клиенту")]),i("textarea",{directives:[{name:"model",rawName:"v-model",value:t.message_one,expression:"message_one"}],staticClass:"textarea",attrs:{id:"message_one",name:"message"},domProps:{value:t.message_one},on:{input:function(e){e.target.composing||(t.message_one=e.target.value)}}})]),i("div",{staticClass:"longTerm"},[i("p",{staticClass:"order_type"},[t._v("Долгосрочная бронь")]),i("div",{staticClass:"dropdown__cancel"},[i("p",{staticClass:"cancel__title"},[t._v("Время отмены брони*")]),i("div",{staticClass:"dropdown"},[i("select",{ref:"cancel_time_long"},[i("option",{attrs:{value:"0"}},[t._v("В любое время")]),i("option",{attrs:{value:"1"}},[t._v("За 1 час")]),i("option",{attrs:{value:"2"}},[t._v("За 2 часа")]),i("option",{attrs:{value:"4"}},[t._v("За 4 часа")]),i("option",{attrs:{value:"6"}},[t._v("За 6 часов")]),i("option",{attrs:{value:"8"}},[t._v("За 8 часов")]),i("option",{attrs:{value:"10"}},[t._v("За 10 часов")]),i("option",{attrs:{value:"12",selected:""}},[t._v("За 12 часов")]),i("option",{attrs:{value:"24"}},[t._v("За 24 часа")]),i("option",{attrs:{value:"48"}},[t._v("За 48 часов")])])])]),i("p",{staticClass:"payment__title"},[t._v("Сумма залога*")]),i("input",{directives:[{name:"model",rawName:"v-model",value:t.deposit,expression:"deposit"}],staticClass:"input",attrs:{type:"text",name:"deposit",id:"deposit",placeholder:"0 ₸",inputmode:"tel"},domProps:{value:t.deposit},on:{keypress:function(e){return e.stopPropagation(),t.isNumber(e)},input:function(e){e.target.composing||(t.deposit=e.target.value)}}}),i("p",{staticClass:"message_client"},[t._v("Сообщение клиенту")]),i("textarea",{directives:[{name:"model",rawName:"v-model",value:t.message_long,expression:"message_long"}],staticClass:"textarea",attrs:{id:"message_long",name:"message"},domProps:{value:t.message_long},on:{input:function(e){e.target.composing||(t.message_long=e.target.value)}}})])])])]},proxy:!0},{key:"button",fn:function(){return[i("div",{staticClass:"save__btn"},[i("div",{staticClass:"btn",class:{active:t.canSave},on:{click:function(e){return e.stopPropagation(),e.preventDefault(),t.setPrepaidCondition()}}},[t._v("Применить")])])]},proxy:!0}])})],1)},Jn=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"flex"},[i("div",{staticClass:"flex__key"},[t._v("Условия оплаты")]),i("i",{staticClass:"fas fa-chevron-right"})])}],Zn={components:{EditPopup:Cn},data:function(){return{clicked:!1,prepaid:"",deposit:"",url:window.location.origin.replace("playfields.",""),message_one:"Мы получили ваш запрос на бронирование площадки. Но еще НЕ ПОДТВЕРДИЛИ ЗАКАЗ. \n\nДля этого просим отправить предоплату в размере 30% от общей суммы аренды на номер Каспи +7 \n\n **обязательно укажите от кого",message_long:"Мы получили ваш запрос на бронирование площадки. Но еще НЕ ПОДТВЕРДИЛИ ЗАКАЗ.\n\nДля этого просим отправить залог в размере 100% суммы аренды одной брони на номер Каспи +7\n\n **обязательно укажите от кого"}},mounted:function(){this.setValues()},computed:Object(g["a"])({canSave:function(){return this.prepaid&&this.deposit}},Object(C["c"])("facility",["facility"])),methods:{closePopup:function(){this.clicked=!1,this.setValues()},setPrepaidCondition:function(){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,G.a.post("".concat(t.url,"/crm/user/").concat(window.$cookies.get("id"),"/facility/").concat(t.facility.id,"/update-data"),{single_payment:{cancel_time:t.$refs["cancel_time_one"].value,prepaid:t.prepaid,message:t.message_one},multiple_payment:{cancel_time:t.$refs["cancel_time_long"].value,prepaid:t.deposit,message:t.message_long}},{headers:{Authorization:"Bearer ".concat(window.$cookies.get("access_token"))}}).then((function(e){return t.$store.dispatch("facility/setFacilityPaymentCondition",{cancel_time:e.data.facility.cancel_time,prepaid:e.data.facility.prepaid})}));case 2:t.clicked=!1;case 3:case"end":return e.stop()}}),e)})))()},isNumber:function(t){t=t||window.event;var e=t.which?t.which:t.keyCode;if(!(e>31&&(e<48||e>57)))return!0;t.preventDefault()},setValues:function(){this.$refs["cancel_time_one"].value=this.facility.single_payment.cancel_time||"12",this.$refs["cancel_time_long"].value=this.facility.multiple_payment.cancel_time||"12",this.prepaid=this.facility.single_payment.prepaid||"0",this.deposit=this.facility.multiple_payment.prepaid||"0",this.message_long=this.facility.multiple_payment.message||this.message_long,this.message_one=this.facility.single_payment.message||this.message_one}}},Gn=Zn,Kn=(i("0e90"),Object(u["a"])(Gn,Un,Jn,!1,null,"4e0d05b8",null)),Qn=Kn.exports,Xn=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"facility__contacts",on:{click:function(e){t.clicked=!0}}},[i("div",{directives:[{name:"show",rawName:"v-show",value:t.clicked,expression:"clicked"}],staticClass:"backdrop",on:{click:function(e){return e.stopPropagation(),t.closePopup.apply(null,arguments)}}}),t._m(0),i("div",{staticClass:"value"}),i("edit-popup",{directives:[{name:"show",rawName:"v-show",value:t.clicked,expression:"clicked"}],on:{close:t.closePopup},scopedSlots:t._u([{key:"title",fn:function(){return[i("p",{staticClass:"facility__title"},[t._v("Контакты")])]},proxy:!0},{key:"content",fn:function(){return[i("div",{staticClass:"content"},[i("div",{staticClass:"content__inner"},[i("div",{staticClass:"phone__numbers"},[i("p",{staticClass:"phone__number"},[t._v("Номер телефона*")]),i("div",{staticClass:"tel1"},[i("input",{directives:[{name:"mask",rawName:"v-mask",value:"+7 ### ### ## ##",expression:"'+7 ### ### ## ##'"},{name:"model",rawName:"v-model",value:t.tel1,expression:"tel1"}],attrs:{type:"tel",name:"main",id:"main",placeholder:"Введите номер телефона"},domProps:{value:t.tel1},on:{keypress:function(e){return e.stopPropagation(),t.isNumber(e)},keyup:function(e){return e.stopPropagation(),t.isValid(t.tel1)},input:function(e){e.target.composing||(t.tel1=e.target.value)}}}),i("p",{directives:[{name:"show",rawName:"v-show",value:!t.isValid(t.tel1),expression:"!isValid(tel1)"}],staticClass:"error__format"},[t._v("Неверный формат номера")])]),i("div",{staticClass:"tel2"},[i("input",{directives:[{name:"mask",rawName:"v-mask",value:"+7 ### ### ## ##",expression:"'+7 ### ### ## ##'"},{name:"show",rawName:"v-show",value:t.additional>=1,expression:"additional>=1"},{name:"model",rawName:"v-model",value:t.tel2,expression:"tel2"}],attrs:{type:"tel",name:"additional_1",id:"additional_1",placeholder:"Введите номер телефона"},domProps:{value:t.tel2},on:{keypress:function(e){return e.stopPropagation(),t.isNumber(e)},keyup:function(e){return e.stopPropagation(),t.isValid(t.tel2)},input:function(e){e.target.composing||(t.tel2=e.target.value)}}}),i("p",{directives:[{name:"show",rawName:"v-show",value:!t.isValid(t.tel2),expression:"!isValid(tel2)"}],staticClass:"error__format"},[t._v("Неверный формат номера")])]),i("div",{staticClass:"tel3"},[i("input",{directives:[{name:"mask",rawName:"v-mask",value:"+7 ### ### ## ##",expression:"'+7 ### ### ## ##'"},{name:"show",rawName:"v-show",value:t.additional>=2,expression:"additional>=2"},{name:"model",rawName:"v-model",value:t.tel3,expression:"tel3"}],attrs:{type:"tel",name:"additional_2",id:"additional_2",placeholder:"Введите номер телефона"},domProps:{value:t.tel3},on:{keypress:function(e){return e.stopPropagation(),t.isNumber(e)},keyup:function(e){return e.stopPropagation(),t.isValid(t.tel3)},input:function(e){e.target.composing||(t.tel3=e.target.value)}}}),i("p",{directives:[{name:"show",rawName:"v-show",value:!t.isValid(t.tel3),expression:"!isValid(tel3)"}],staticClass:"error__format"},[t._v("Неверный формат номера")])]),i("div",{staticClass:"add__phone"},[i("i",{staticClass:"fas fa-plus",class:{not_available:t.additional>=2},on:{click:function(e){t.additional+=1}}}),i("div",{staticClass:"add__btn",class:{not_available:t.additional>=2},on:{click:function(e){t.additional+=1}}},[t._v("Добавить еще один номер телефона")])])]),i("div",{staticClass:"whatsapp"},[i("label",{attrs:{for:"whatsapp"}},[t._v("Whatsapp")]),i("input",{directives:[{name:"mask",rawName:"v-mask",value:"+7 ### ### ## ##",expression:"'+7 ### ### ## ##'"},{name:"model",rawName:"v-model",value:t.whatsapp,expression:"whatsapp"}],attrs:{type:"tel",name:"whatsapp",id:"whatsapp",placeholder:"Введите номер привязанный к Whatsapp"},domProps:{value:t.whatsapp},on:{keypress:function(e){return e.stopPropagation(),t.isNumber(e)},keyup:function(e){return e.stopPropagation(),t.isValid(t.whatsapp)},input:function(e){e.target.composing||(t.whatsapp=e.target.value)}}}),i("p",{directives:[{name:"show",rawName:"v-show",value:!t.isValid(t.whatsapp),expression:"!isValid(whatsapp)"}],staticClass:"error__format"},[t._v("Неверный формат номера")])]),i("div",{staticClass:"instagram"},[i("label",{attrs:{for:"instagram"}},[t._v("Instagram")]),i("input",{directives:[{name:"model",rawName:"v-model",value:t.instagram,expression:"instagram"}],attrs:{type:"text",name:"instagram",id:"instagram",placeholder:"instagram.com/"},domProps:{value:t.instagram},on:{input:function(e){e.target.composing||(t.instagram=e.target.value)}}})]),i("div",{staticClass:"website"},[i("label",{attrs:{for:"website"}},[t._v("Веб-сайт")]),i("input",{directives:[{name:"model",rawName:"v-model",value:t.website,expression:"website"}],attrs:{type:"text",name:"website",id:"website",placeholder:"Введите адрес веб-сайта"},domProps:{value:t.website},on:{input:function(e){e.target.composing||(t.website=e.target.value)}}})])])])]},proxy:!0},{key:"button",fn:function(){return[i("div",{staticClass:"save__btn"},[i("div",{staticClass:"btn",class:{active:(t.tel1.length||t.tel2.length||t.tel3.length)&&t.valid},on:{click:function(e){return e.stopPropagation(),t.setPhone()}}},[t._v("Сохранить")])])]},proxy:!0}])})],1)},to=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"flex"},[i("div",{staticClass:"flex__key"},[t._v("Контакты")]),i("i",{staticClass:"fas fa-chevron-right"})])}],eo={data:function(){return{clicked:!1,additional:0,phone_numbers:[],tel1:"",tel2:"",tel3:"",whatsapp:"",instagram:"",website:"",url:window.location.origin.replace("playfields.","")}},created:function(){this.setValues()},methods:{setValues:function(){this.tel1=this.facility.contacts.phones["tel1"]?this.facility.contacts.phones["tel1"]:"",this.tel2=this.facility.contacts.phones["tel2"]?this.facility.contacts.phones["tel2"]:"",this.tel3=this.facility.contacts.phones["tel3"]?this.facility.contacts.phones["tel3"]:"",this.whatsapp=this.facility.contacts.socials["whatsapp"]?this.facility.contacts.socials["whatsapp"]:"",this.instagram=this.facility.contacts.socials["instagram"]?this.facility.contacts.socials["instagram"]:"",this.website=this.facility.contacts.socials["website"]?this.facility.contacts.socials["website"]:""},closePopup:function(){this.clicked=!1,this.setValues()},setPhone:function(){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function e(){var i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.phone_numbers=[t.tel1,t.tel2,t.tel3].map((function(t){return t.split(" ").join("")})).filter((function(t){return!t.includes("_")})),i={socials:{instagram:t.instagram,website:t.website,whatsapp:t.whatsapp}},t.phone_numbers.map((function(t,e){i["phones"]=Object(g["a"])(Object(g["a"])({},i["phones"]),{},Object(at["a"])({},"tel".concat(e+1),t))})),e.next=5,G.a.post("".concat(t.url,"/crm/user/").concat(window.$cookies.get("id"),"/facility/").concat(t.facility.id,"/update-data"),{contacts:i},{headers:{Authorization:"Bearer ".concat(window.$cookies.get("access_token"))}}).then((function(e){t.$store.dispatch("facility/setFacilityContacts",e.data.facility.contacts)})).catch((function(t){return console.log(t)}));case 5:t.clicked=!1;case 6:case"end":return e.stop()}}),e)})))()},isNumber:function(t){t=t||window.event;var e=t.which?t.which:t.keyCode;if(!(e>31&&(e<48||e>57)))return!0;t.preventDefault()},isValid:function(t){return t.split(" ").length&&!t.includes("_")}},components:{EditPopup:Cn},computed:Object(g["a"])(Object(g["a"])({},Object(C["c"])("facility",["facility"])),{},{valid:function(){return 0===[this.tel1,this.tel2,this.tel3,this.whatsapp].filter((function(t){return t.includes("_")})).length}})},io=eo,ao=(i("18bd"),Object(u["a"])(io,Xn,to,!1,null,"ed2abb54",null)),so=ao.exports,no=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"facility__photo",on:{click:t.goToPhotos}},[t._m(0),i("div",{staticClass:"value"},[t._v("Выберите фотографии")])])},oo=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"flex"},[i("div",{staticClass:"flex__key"},[t._v("Фотографии")]),i("i",{staticClass:"fas fa-chevron-right"})])}],ro={methods:{goToPhotos:function(){this.$router.push({name:"facilityPhotos",params:{id:this.facility.id}})}},computed:Object(g["a"])({},Object(C["c"])("facility",["facility"]))},co=ro,lo=(i("96ff"),Object(u["a"])(co,no,oo,!1,null,"7e624fa9",null)),uo=lo.exports,po=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"modal"},[i("div",{staticClass:"modal__inner"},[i("div",{staticClass:"modal__options"},[i("div",{staticClass:"option choose__photo",on:{click:t.changePhoto}},[t._v("Выбрать фото")]),i("div",{directives:[{name:"show",rawName:"v-show",value:t.needed,expression:"needed"}],staticClass:"option open__photo",on:{click:t.showPhoto}},[t._v("Посмотреть фото")]),i("div",{directives:[{name:"show",rawName:"v-show",value:t.needed,expression:"needed"}],staticClass:"option delete__photo",on:{click:t.deletePhoto}},[t._v("Удалить фото")]),i("div",{staticClass:"cancel"},[t._v("Отменить")])])])])},fo=[],_o={props:["needed"],methods:{changePhoto:function(){this.$emit("changePhoto")},deletePhoto:function(){this.$emit("deletePhoto")},showPhoto:function(){this.$emit("showPhoto")}}},ho=_o,vo=(i("2047"),Object(u["a"])(ho,po,fo,!1,null,"a6f91592",null)),mo=vo.exports,go=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"photo"},[i("div",{staticClass:"photo__inner"},[i("div",{staticClass:"close_btn"},[i("i",{staticClass:"fas fa-times",on:{click:function(e){return e.stopPropagation(),t.closePhoto.apply(null,arguments)}}})]),i("div",{staticClass:"img"},[i("img",{attrs:{src:t.path,alt:"Здесь должно было быть фото"}})])])])},yo=[],bo={props:["path"],methods:{closePhoto:function(){this.$emit("closePhoto")}}},ko=bo,Co=(i("7c7f"),Object(u["a"])(ko,go,yo,!1,null,"7f068c10",null)),wo=Co.exports,Oo={data:function(){return{photo:"",photoAction:!1,show:!1,url:window.location.origin.replace("playfields.","")}},mounted:function(){window.scrollTo(0,0)},components:{MainHeader:te,PhotoCard:wo,PlayfieldCard:_n,BottomMenu:pe,FacilityPhoto:uo,FacilityName:jn,FacilityAddress:Bn,FacilityDescription:Vn,FacilityInfrastructure:qn,FacilityPayment:Qn,FacilityContact:so,PhotoModal:mo},methods:{changed:function(t){var e=this;this.start=!0,this.$store.dispatch("facility/resetFacility",parseInt(t)).then((function(){return e.start=!1})),sessionStorage.setItem("active_facility",parseInt(t))},goToPlayfield:function(t){this.$router.push({name:"playfield",params:{id:this.facility.id,p_id:t}})},changePhoto:function(){this.$refs["facility__photo"].click()},setPhoto:function(){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function e(){var i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.photoAction=!1,t.photo=t.$refs["facility__photo"].files[0],i=new FormData,i.append("file",t.photo),e.next=6,G.a.post("".concat(t.url,"/crm/user/").concat(window.$cookies.get("id"),"/facility/").concat(t.facility.id,"/load-avatar"),i,{headers:{"Content-Type":"multipart/form-data",Authorization:"Bearer ".concat(window.$cookies.get("access_token"))}}).then((function(e){t.$store.dispatch("facility/setFacilityAvatar",e.data.path)})).catch((function(){console.log("FAILURE!!")}));case 6:case"end":return e.stop()}}),e)})))()},deletePhoto:function(){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:G.a.post("".concat(t.url,"/crm/user/").concat(window.$cookies.get("id"),"/facility/").concat(t.facility.id,"/remove-avatar"),{},{headers:{Authorization:"Bearer ".concat(window.$cookies.get("access_token"))}}).then((function(){return t.$store.dispatch("facility/setFacilityAvatar","default_avatar.png")})).catch((function(t){return console.log(t)})),t.photoAction=!1;case 2:case"end":return e.stop()}}),e)})))()},showPhoto:function(){this.photoAction=!1,this.show=!0},logOut:function(){window.$cookies.remove("id"),window.$cookies.remove("access_token"),sessionStorage.removeItem("facilities"),sessionStorage.removeItem("active_facility"),this.$router.push({name:"authorization"})}},computed:Object(g["a"])(Object(g["a"])({},Object(C["c"])("facility",["facility"])),{},{hasNotPhoto:function(){return"default_avatar.png"===this.facility.avatar}})},xo=Oo,jo=(i("beab"),Object(u["a"])(xo,rn,cn,!1,null,"d2779ba8",null)),Po=jo.exports,Do=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"playfield"},[i("div",{staticClass:"playfield__inner"},[i("menu-header",{attrs:{backButton:!0},on:{back:t.goBack},scopedSlots:t._u([{key:"title",fn:function(){return[i("p",{staticClass:"playfield__title"},[t._v(t._s(t.playfield.pf_name))])]},proxy:!0}])}),i("div",{staticClass:"content"},[i("div",{staticClass:"content__inner"},[i("PlayfieldName"),i("PlayfieldSpecifications"),i("PlayfieldOrder"),i("PlayfieldWorkingHours")],1)])],1)])},$o=[],So=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"playfield__name",on:{click:function(e){t.clicked=!0}}},[i("div",{directives:[{name:"show",rawName:"v-show",value:t.clicked,expression:"clicked"}],staticClass:"backdrop",on:{click:function(e){return e.stopPropagation(),t.closePopup.apply(null,arguments)}}}),t._m(0),i("div",{staticClass:"value"},[t._v(t._s(t.playfield.pf_name))]),i("edit-popup",{directives:[{name:"show",rawName:"v-show",value:t.clicked,expression:"clicked"}],on:{close:t.closePopup},scopedSlots:t._u([{key:"title",fn:function(){return[i("p",{staticClass:"facility__title"},[t._v("Название")])]},proxy:!0},{key:"content",fn:function(){return[i("div",{staticClass:"content"},[i("div",{staticClass:"content__inner"},[i("p",{staticClass:"name__required"},[t._v("Название площадки*")]),i("input",{directives:[{name:"model",rawName:"v-model",value:t.changedName,expression:"changedName"}],attrs:{type:"text",name:"name",id:"playfield_name",placeholder:"Например: Плошадка №1",maxlength:"25"},domProps:{value:t.changedName},on:{input:function(e){e.target.composing||(t.changedName=e.target.value)}}})])])]},proxy:!0},{key:"button",fn:function(){return[i("div",{staticClass:"save__btn"},[i("div",{staticClass:"btn",class:{active:t.changedName.trim().length},on:{click:function(e){return e.stopPropagation(),t.saveName()}}},[t._v("Сохранить")])])]},proxy:!0}])})],1)},Ao=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"flex"},[i("div",{staticClass:"flex__key"},[t._v("Название")]),i("i",{staticClass:"fas fa-chevron-right"})])}],Mo={data:function(){return{clicked:!1,changedName:"",url:window.location.origin.replace("playfields.","")}},created:function(){this.setValues()},computed:Object(g["a"])({},Object(C["c"])("playfield",["playfield"])),components:{EditPopup:Cn},methods:{closePopup:function(){this.clicked=!1},saveName:function(){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function e(){var i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t.changedName!==(null===(i=t.playfield)||void 0===i?void 0:i.pf_name)){e.next=3;break}return t.clicked=!1,e.abrupt("return");case 3:return e.next=5,G.a.post("".concat(t.url,"/crm/user/").concat(window.$cookies.get("id"),"/playfield/").concat(t.playfield.id,"/update-data"),{pf_name:t.changedName},{headers:{Authorization:"Bearer ".concat(window.$cookies.get("access_token"))}}).then((function(){return t.$store.dispatch("playfield/setPlayfieldName",t.changedName)}));case 5:t.clicked=!1;case 6:case"end":return e.stop()}}),e)})))()},setValues:function(){this.changedName=this.playfield.pf_name}}},To=Mo,Bo=(i("fb2b"),Object(u["a"])(To,So,Ao,!1,null,"53daec2a",null)),No=Bo.exports,Io=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"playfield__specifications",on:{click:function(e){t.clicked=!0}}},[i("div",{directives:[{name:"show",rawName:"v-show",value:t.clicked,expression:"clicked"}],staticClass:"backdrop",on:{click:function(e){return e.stopPropagation(),t.closePopup.apply(null,arguments)}}}),t._m(0),i("div",{staticClass:"value"},[t._v(t._s(t.getIndoor)+t._s(t.getSurface)),i("br"),t._v(t._s(t.getFormat)+t._s(t.getLengthWidth))]),i("div",{staticClass:"specifications__inner"}),i("edit-popup",{directives:[{name:"show",rawName:"v-show",value:t.clicked,expression:"clicked"}],on:{close:t.closePopup},scopedSlots:t._u([{key:"title",fn:function(){return[i("p",{staticClass:"facility__title"},[t._v("Характеристики")])]},proxy:!0},{key:"content",fn:function(){return[i("div",{staticClass:"content"},[i("div",{staticClass:"content__inner"},[i("div",{staticClass:"indoor__type"},[i("div",{staticClass:"indoor__open",class:{activeIndoor:!t.chosenIndoor},on:{click:function(e){return t.setIndoor(0)}}},[i("i",{staticClass:"fas fa-cloud-sun"}),i("p",{staticClass:"open"},[t._v("Открытый")])]),i("div",{staticClass:"indoor__close",class:{activeIndoor:t.chosenIndoor},on:{click:function(e){return t.setIndoor(1)}}},[i("i",{staticClass:"fas fa-cloud-sun"}),i("p",{staticClass:"close"},[t._v("Закрытый")])])]),i("div",{staticClass:"surface__type"},[i("label",{attrs:{for:"surface"}},[t._v("Покрытие*")]),i("select",{directives:[{name:"model",rawName:"v-model",value:t.surf_type,expression:"surf_type"}],attrs:{name:"surface",id:"surface"},on:{change:function(e){var i=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.surf_type=e.target.multiple?i:i[0]}}},[i("option",{attrs:{value:""}},[t._v("Выберите")]),i("option",{attrs:{value:"0"}},[t._v("Трава")]),i("option",{attrs:{value:"1"}},[t._v("Искусственная трава")]),i("option",{attrs:{value:"2"}},[t._v("Паркет")]),i("option",{attrs:{value:"3"}},[t._v("Грунт")]),i("option",{attrs:{value:"4"}},[t._v("Песок")]),i("option",{attrs:{value:"5"}},[t._v("Бетон")]),i("option",{attrs:{value:"6"}},[t._v("Резина")])])]),i("div",{staticClass:"format__type"},[i("label",{attrs:{for:"format"}},[t._v("Оптимальный формат*")]),i("select",{directives:[{name:"model",rawName:"v-model",value:t.format,expression:"format"}],attrs:{name:"format",id:"format"},on:{change:function(e){var i=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.format=e.target.multiple?i:i[0]}}},[i("option",{attrs:{value:""}},[t._v("Выберите")]),i("option",{attrs:{value:"4"}},[t._v("4vs4")]),i("option",{attrs:{value:"5"}},[t._v("5vs5")]),i("option",{attrs:{value:"6"}},[t._v("6vs6")]),i("option",{attrs:{value:"7"}},[t._v("7vs7")]),i("option",{attrs:{value:"8"}},[t._v("8vs8")]),i("option",{attrs:{value:"9"}},[t._v("9vs9")]),i("option",{attrs:{value:"10"}},[t._v("10vs10")]),i("option",{attrs:{value:"11"}},[t._v("11vs11")])])]),i("div",{staticClass:"playfield__size"},[i("div",{staticClass:"playfield__width"},[i("label",{attrs:{for:"width"}},[t._v("Ширина площадки")]),i("input",{directives:[{name:"model",rawName:"v-model",value:t.width,expression:"width"}],attrs:{type:"text",name:"width",id:"width",placeholder:"Введите ширину",inputmode:"tel"},domProps:{value:t.width},on:{input:function(e){e.target.composing||(t.width=e.target.value)}}})]),i("div",{staticClass:"playfield__length"},[i("label",{attrs:{for:"length"}},[t._v("Длина плошадки")]),i("input",{directives:[{name:"model",rawName:"v-model",value:t.length,expression:"length"}],attrs:{type:"text",name:"length",id:"length",placeholder:"Введите длину",inputmode:"tel"},domProps:{value:t.length},on:{input:function(e){e.target.composing||(t.length=e.target.value)}}})])])])])]},proxy:!0},{key:"button",fn:function(){return[i("div",{staticClass:"save__btn"},[i("div",{staticClass:"btn",class:{active:t.isAllFilled},on:{click:function(e){return e.stopPropagation(),e.preventDefault(),t.saveSpecifications()}}},[t._v("Сохранить")])])]},proxy:!0}])})],1)},Ro=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"flex"},[i("div",{staticClass:"flex__key"},[t._v("Характеристики")]),i("i",{staticClass:"fas fa-chevron-right"})])}],Eo={data:function(){return{clicked:!1,chosenIndoor:0,width:"",length:"",format:"",surf_type:"",url:window.location.origin.replace("playfields.","")}},mounted:function(){this.setValues()},computed:Object(g["a"])(Object(g["a"])({},Object(C["c"])("playfield",["playfield"])),Object(C["b"])("playfield",["getSurface","getIndoor","getLengthWidth","getFormat"])),components:{EditPopup:Cn},methods:{isAllFilled:function(){return this.format&&this.surf_type&&this.width&&this.length},closePopup:function(){this.clicked=!1,this.setValues()},saveSpecifications:function(){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function e(){var i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return i={surf_type:parseInt(t.surf_type),indoor:!!t.chosenIndoor,length:t.length,width:t.width,format:parseInt(t.format)},e.next=3,G.a.post("".concat(t.url,"/crm/user/").concat(window.$cookies.get("id"),"/playfield/").concat(t.playfield.id,"/update-data"),i,{headers:{Authorization:"Bearer ".concat(window.$cookies.get("access_token"))}}).then((function(){return t.$store.dispatch("playfield/setSpecifications",i)}));case 3:t.clicked=!1;case 4:case"end":return e.stop()}}),e)})))()},setValues:function(){this.changedName=this.playfield.pf_name,this.format=this.playfield.format,this.chosenIndoor=this.playfield.indoor,this.surf_type=this.playfield.surf_type,this.width=this.playfield.width,this.length=this.playfield.length},setIndoor:function(t){this.chosenIndoor=t}}},Fo=Eo,Vo=(i("16ee"),Object(u["a"])(Fo,Io,Ro,!1,null,"b933711a",null)),Yo=Vo.exports,Ho=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"playfield__workingHours",on:{click:function(e){return e.stopPropagation(),t.goToWorkingHours()}}},[t._m(0),i("div",{staticClass:"value"},t._l(t.groupBy,(function(e,a){return i("div",{key:a,staticStyle:{display:"flex",gap:"2px"}},[i("p",[t._v(t._s(t.getFormatted(e))+", ")]),i("p",[t._v(t._s(a))])])})),0)])},Wo=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"flex"},[i("div",{staticClass:"flex__key"},[t._v("Режим работы")]),i("i",{staticClass:"fas fa-chevron-right"})])}],zo=(i("4e82"),{data:function(){return{groupBy:{}}},created:function(){this.getWorkingHours()},methods:{goToWorkingHours:function(){this.$router.push({name:"playfieldSettings"})},getWorkingHours:function(){var t=this;Object.keys(this.playfield.periods_data).map((function(e){var i=t.playfield.periods_data[e].start_time,a=t.playfield.periods_data[e].end_time,s=i&&a?"".concat(i,"-").concat(a):"Выходной";t.groupBy[s]?t.groupBy[s].push(e):t.groupBy[s]=[e]})),Object.keys(this.groupBy).map((function(e){t.groupBy[e]=t.groupBy[e].sort(),"0"===t.groupBy[e][0]&&(t.groupBy[e].shift(),t.groupBy[e].push("0"))}))},getFormatted:function(t){return 1===t.length?this.getDay(t[0]):"".concat(this.getDay(t[0]),"-").concat(this.getDay(t[t.length-1]))},getDay:function(t){var e=B()().locale("ru").day(t).format("dd");return e.replace(e[0],(function(t){return t.toUpperCase()}))}},computed:Object(g["a"])({},Object(C["c"])("playfield",["playfield"]))}),Lo=zo,qo=(i("0171"),Object(u["a"])(Lo,Ho,Wo,!1,null,"1659605a",null)),Uo=qo.exports,Jo=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"playfield__order",on:{click:function(e){t.clicked=!0}}},[i("div",{directives:[{name:"show",rawName:"v-show",value:t.clicked,expression:"clicked"}],staticClass:"backdrop",on:{click:function(e){return e.stopPropagation(),t.closePopup.apply(null,arguments)}}}),t._m(0),i("div",{staticClass:"value"},[t._v(t._s(t.playfield.local_sort))]),i("edit-popup",{directives:[{name:"show",rawName:"v-show",value:t.clicked,expression:"clicked"}],on:{close:t.closePopup},scopedSlots:t._u([{key:"title",fn:function(){return[i("p",{staticClass:"facility__title"},[t._v("№ площадки")])]},proxy:!0},{key:"content",fn:function(){return[i("div",{staticClass:"content"},[i("div",{staticClass:"content__inner"},[i("p",{staticClass:"index__required"},[t._v("№ площадки*")]),i("input",{directives:[{name:"model",rawName:"v-model",value:t.index,expression:"index"}],attrs:{type:"text",inputmode:"numeric",name:"name",id:"index",placeholder:"Например: 1",maxlength:"1"},domProps:{value:t.index},on:{input:function(e){e.target.composing||(t.index=e.target.value)}}})])])]},proxy:!0},{key:"button",fn:function(){return[i("div",{staticClass:"save__btn"},[i("div",{staticClass:"btn",class:{active:t.index.length},on:{click:function(e){return e.stopPropagation(),t.saveName()}}},[t._v("Сохранить")])])]},proxy:!0}])})],1)},Zo=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"flex"},[i("div",{staticClass:"flex__key"},[t._v("№ площадки")]),i("i",{staticClass:"fas fa-chevron-right"})])}],Go={data:function(){return{clicked:!1,index:"",url:window.location.origin.replace("playfields.","")}},created:function(){this.setValues()},computed:Object(g["a"])({},Object(C["c"])("playfield",["playfield"])),components:{EditPopup:Cn},methods:{closePopup:function(){this.clicked=!1},saveName:function(){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t.index!==t.playfield.local_sort){e.next=3;break}return t.clicked=!1,e.abrupt("return");case 3:return e.next=5,G.a.post("".concat(t.url,"/crm/user/").concat(window.$cookies.get("id"),"/playfield/").concat(t.playfield.id,"/update-data"),{local_sort:t.index},{headers:{Authorization:"Bearer ".concat(window.$cookies.get("access_token"))}}).then((function(){return t.$store.dispatch("playfield/setPlayfieldIndex",t.index)}));case 5:t.clicked=!1;case 6:case"end":return e.stop()}}),e)})))()},setValues:function(){this.index=this.playfield.local_sort||""}}},Ko=Go,Qo=(i("da1b"),Object(u["a"])(Ko,Jo,Zo,!1,null,"4e557d40",null)),Xo=Qo.exports,tr={components:{MenuHeader:fs,PlayfieldName:No,PlayfieldSpecifications:Yo,PlayfieldWorkingHours:Uo,PlayfieldOrder:Xo},computed:Object(g["a"])(Object(g["a"])(Object(g["a"])({},Object(C["c"])("playfield",["playfield"])),Object(C["c"])("facility",["facility"])),Object(C["b"])("playfield",["getSurface","getIndoor","getLengthWidth","getFormat"])),mounted:function(){window.scrollTo(0,0)},methods:{goBack:function(){this.$router.push({name:"myFacility",params:{id:this.facility.id}})}}},er=tr,ir=(i("a7ce"),Object(u["a"])(er,Do,$o,!1,null,"4ad12e94",null)),ar=ir.exports,sr=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"main__wrapper"},[i("div",{staticClass:"main__inner"},[i("p",{staticClass:"error_code"},[t._v("404")]),i("p",{staticClass:"error_message big"},[t._v("Страница не найдена")]),i("p",{staticClass:"error_message"},[t._v("Вернитесь на главную страницу: "),i("a",{on:{click:function(e){return t.goToMain()}}},[t._v("Перейти")])])])])},nr=[],or={mounted:function(){window.scrollTo(0,0)},methods:{goToMain:function(){this.$router.push({path:"/"})}}},rr=or,cr=(i("286c"),Object(u["a"])(rr,sr,nr,!1,null,"c88b19ae",null)),lr=cr.exports,dr=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"notifications"},[i("div",{staticClass:"notifications_header"},[i("div",{staticClass:"back-btn",on:{click:function(e){return e.stopPropagation(),t.back()}}},[i("svg",{attrs:{width:"10",height:"16",viewBox:"0 0 10 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"}},[i("path",{attrs:{d:"M9.91009 1.91705L3.84009 8.00105L9.91009 14.0841L8.04109 15.951L0.0900879 8.00105L8.04109 0.0500507L9.91009 1.91705Z",fill:"black"}})])]),i("p",{staticClass:"title"},[t._v("Уведомления")])]),i("div",{staticClass:"notifications_cards"},[t._l(t.notifications,(function(t){return[i("notification-card",{key:t.id,attrs:{notification:t}})]}))],2),i("bottom-menu")],1)},ur=[],pr=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"notification_card",on:{click:function(e){return e.stopPropagation(),t.goToOrder()}}},[i("div",{staticClass:"notification_card_inner"},[i("div",{staticClass:"main_line"},[i("div",{staticClass:"left"},[i("div",{staticClass:"notification_logo"},[i("img",{attrs:{src:t.srcIcon,alt:"nf_logo"}})]),i("div",{staticClass:"order_info"},[t._v(t._s(t.orderInfo))])]),i("div",{staticClass:"notification_date"},[t._v(t._s(t.createdAt))])]),i("div",{staticClass:"notification_info"},[t._v(" "+t._s(t.orderTime)+" ")]),i("div",{staticClass:"notification_message"},[t._v(" "+t._s(t.orderMessage)+" ")])])])},fr=[],_r={props:["notification"],methods:{goToOrder:function(){this.$router.push({name:"singleOrder",params:{id:this.notification.data.order_id}})}},computed:{orderTime:function(){var t=T(this.notification.data.start_date).locale("ru").format("DD MMMM"),e=T(this.notification.data.end_date).locale("ru").format("DD MMMM"),i="".concat(this.notification.data.start_time.substring(0,5)," - ").concat(this.notification.data.end_time.substring(0,5)),a=T(this.notification.data.start_date).locale("ru").format("dddd");return"".concat(t," - ").concat(e,", ").concat(i,", ").concat(a)},orderInfo:function(){return"Заказ №".concat(this.notification.data.order_id,", броней ").concat(this.notification.data.bookings_count)},createdAt:function(){return T(this.notification.created_at).format("DD.MM.YYYY HH:mm")},srcIcon:function(){return 0===this.type?"/img/canceled_booking.svg":1===this.type?"/img/canceled_order.svg":2===this.type?"/img/accepted.svg":3===this.type?"/img/request.svg":""},type:function(){var t=this.notification.type;return t.includes("ReservationCanceledByClient")?0:t.includes("OrderDeclineByClient")?1:t.includes("OrderAcceptByClient")?2:t.includes("OrderMakeByClient")?3:""},orderMessage:function(){return 0===this.type?"".concat(this.notification.data.client_name," отменил(-а) бронь ").concat(T(this.notification.data.reservation_date).locale("ru").format("DD MMMM")," в заказе №").concat(this.notification.data.order_id):1===this.type?"".concat(this.notification.data.client_name," отменил(-а) заказ №").concat(this.notification.data.order_id):2===this.type?"".concat(this.notification.data.client_name," подтвердил(-а) заказ"):3===this.type?"".concat(this.notification.data.client_name," хочет забронировать ").concat(this.notification.data.playfield):""}}},hr=_r,vr=(i("8ccd"),Object(u["a"])(hr,pr,fr,!1,null,"2a35b120",null)),mr=vr.exports,gr={data:function(){return{notifications:[],url:window.location.origin.replace("playfields.","")}},mounted:function(){var t=this;G.a.get("".concat(this.url,"/crm/user/").concat(window.$cookies.get("id"),"/notifications"),{headers:{Authorization:"Bearer ".concat(window.$cookies.get("access_token"))}}).then((function(e){return t.notifications=e.data.notifications}))},methods:{back:function(){this.$router.go(-1)}},components:{BottomMenu:pe,NotificationCard:mr}},yr=gr,br=(i("6521"),Object(u["a"])(yr,dr,ur,!1,null,"b923c284",null)),kr=br.exports,Cr=function(){var t=this,e=t.$createElement,i=t._self._c||e;return t.sending?t._e():i("div",{staticClass:"facility_photos"},[t.start?i("spinner",{attrs:{start:t.start}}):t._e(),i("menu-header",{attrs:{backButton:!0},on:{back:t.goBack},scopedSlots:t._u([{key:"title",fn:function(){return[i("p",{staticClass:"facility_photo_title"},[t._v("Фотографии")])]},proxy:!0}],null,!1,1305091988)}),i("div",{staticClass:"content"},[i("p",{staticClass:"photo_title"},[t._v("Добавьте фотографии")]),t.images.length?i("div",{staticClass:"main_photo"},[i("img",{attrs:{src:t.images[0],alt:"main"}}),i("div",{staticClass:"delete_photo",on:{click:function(e){return e.stopPropagation(),t.removeUpload(0)}}},[i("i",{staticClass:"fas fa-times"})])]):t._e(),i("div",{staticClass:"other_photos"},[t._l(t.images.slice(1),(function(e,a){return[i("div",{key:a+1,staticClass:"other_photo"},[i("img",{attrs:{src:e,alt:e+"_"+(a+1)}}),i("div",{staticClass:"delete_photo",on:{click:function(e){return e.stopPropagation(),t.removeUpload(a+1)}}},[i("i",{staticClass:"fas fa-times"})])])]})),t.images.length<6?i("div",{staticClass:"add_photo",on:{click:function(e){return e.stopPropagation(),t.addPhoto()}}},[t._m(0),i("input",{ref:"facility_photo",attrs:{type:"file",name:"file",accept:"image/png, image/jpeg",multiple:"multiple"},on:{change:function(e){return t.uploadPhoto()}}})]):t._e()],2),i("div",{staticClass:"saveChanges"},[i("div",{staticClass:"btn",on:{click:function(e){return e.stopPropagation(),t.sendFiles.apply(null,arguments)}}},[t._v(" Сохранить ")])])]),t.error?i("error-card",{attrs:{message:t.message,error:t.error},on:{close:function(e){t.error=!1}}}):t._e()],1)},wr=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"icon"},[i("img",{attrs:{src:"/img/addPhoto.svg",alt:"add_photo"}}),i("span",[t._v("Добавить")])])}],Or=(i("2b3d"),i("9861"),{data:function(){return{sending:!1,images:[],initialLength:0,message:"",error:!1,addedPhotos:[],start:!1,url:window.location.origin.replace("playfields.","")}},mounted:function(){var t=this;this.start=!0,G.a.get("".concat(this.url,"/crm/user/").concat(window.$cookies.get("id"),"/facility/").concat(this.facility.id,"/show-images"),{headers:{Authorization:"Bearer ".concat(window.$cookies.get("access_token"))}}).then((function(e){var i,a;t.images=null!==(i=null===(a=e.data.images)||void 0===a?void 0:a.map((function(e){return e.replace("public/","".concat(t.url,"/"))})))&&void 0!==i?i:[],t.sending=!1,t.initialLength=t.images.length})).finally((function(){return t.start=!1}))},components:{Spinner:f,MenuHeader:fs,ErrorCard:ii},methods:{addPhoto:function(){this.$refs["facility_photo"].click()},uploadPhoto:function(){var t=this;this.images.length+this.$refs["facility_photo"].files.length>6&&(this.error=!0,this.message="Количество фотографий для одного сооружения не может быть больше 6!"),this.addedPhotos=Object(st["a"])(this.$refs["facility_photo"].files).slice(0,6-this.images.length),this.addedPhotos.forEach((function(e){return t.images.push(URL.createObjectURL(e))}))},removeUpload:function(t){this.images=this.images.filter((function(e,i){return i!==t}))},sendFiles:function(){var t=this;this.start=!0;var e=new FormData;this.addedPhotos.forEach((function(t,i){return e.append("file[".concat(i,"]"),t)})),G.a.post("".concat(this.url,"/crm/user/").concat(window.$cookies.get("id"),"/facility/").concat(this.facility.id,"/update-images"),e,{headers:{"Content-Type":"multipart/form-data",Authorization:"Bearer ".concat(window.$cookies.get("access_token"))}}).then((function(t){return console.log(t)})).catch((function(){t.error=!0,t.message="К сожалению, не удалось загрузить файлы!"})).finally((function(){return t.start=!1}))},goBack:function(){this.$router.go(-1)}},computed:Object(g["a"])({},Object(C["c"])("facility",["facility"]))}),xr=Or,jr=(i("896d"),Object(u["a"])(xr,Cr,wr,!1,null,"2de2c814",null)),Pr=jr.exports,Dr=function(){var t=this,e=t.$createElement,i=t._self._c||e;return t.sending?t._e():i("div",{staticClass:"single_client"},[i("div",{staticClass:"single_client_header"},[i("div",{staticClass:"backToOrders"},[i("div",{staticClass:"back__button",on:{click:function(e){return e.stopPropagation(),t.back()}}},[i("i",{staticClass:"fas fa-chevron-left"})])]),i("div",{staticClass:"header_title"},[i("div",{staticClass:"client_name"},[t._v(" "+t._s(t.client.firstname)+" "+t._s(t.client.lastname)+" ")])])]),i("div",{staticClass:"client__info"},[i("div",{staticClass:"info__left"},[i("div",{staticClass:"name__surname"},[t._v(t._s(t.client.firstname)+" "+t._s(t.client.lastname))]),i("div",{staticClass:"call"},[i("a",{attrs:{href:"tel:"+t.client.phone}},[t._v("Позвонить "),i("span",[t._v(t._s(t.client.phone))])])]),i("div",{staticClass:"text"},[i("a",{attrs:{href:"https://api.whatsapp.com/send?phone="+t.client.phone,target:"_blank"}},[t._v("Написать в "),i("span",[t._v("WhatsApp")])])])]),i("div",{staticClass:"info__right"},[i("div",{staticClass:"client__photo"},["default_avatar.png"!==t.client.avatar?i("img",{attrs:{src:t.url+"/storage/profile_original_avatars/"+t.client.avatar,alt:"Photo"}}):i("i",{staticClass:"fas fa-user-circle"})])])]),i("div",{staticClass:"orders_tab"},[i("div",{staticClass:"order_tab",class:{active:"activated"===t.activeTab},on:{click:function(e){e.stopPropagation(),t.activeTab="activated"}}},[t._v(" Активные ")]),i("div",{staticClass:"order_tab",class:{active:"completed"===t.activeTab},on:{click:function(e){e.stopPropagation(),t.activeTab="completed"}}},[t._v(" Завершенные ")]),i("div",{staticClass:"order_tab",class:{active:"canceled"===t.activeTab},on:{click:function(e){e.stopPropagation(),t.activeTab="canceled"}}},[t._v(" Отмененные ")])]),i("div",{staticClass:"order_cards"},[t._l(t.filteredOrders,(function(t){return[i("order-card",{key:t.id,attrs:{order:t,debts_needed:!0}})]}))],2)])},$r=[],Sr={components:{OrderCard:ji},props:["id","tab","is_temp"],data:function(){return{client:{},orders:[],sending:!0,activeTab:this.tab||"activated",url:window.location.origin.replace("playfields.","")}},methods:{back:function(){this.$router.go(-1)}},mounted:function(){var t=this;this.sending=!0,G.a.post("".concat(this.url,"/crm/user/").concat(window.$cookies.get("id"),"/orders-cli-list"),{client_id:this.id,is_temporary:this.is_temp,facility_id:this.facility.id},{headers:{Authorization:"Bearer ".concat(window.$cookies.get("access_token"))}}).then((function(e){t.client=e.data.client,t.orders=e.data.orders,t.sending=!1})).catch((function(t){return alert(t)}))},computed:Object(g["a"])({filteredOrders:function(){switch(this.activeTab){case"activated":return this.orders.filter((function(t){return"activated"===t.status}));case"completed":return this.orders.filter((function(t){return"completed"===t.status}));case"canceled":return this.orders.filter((function(t){return"canceled"===t.status}));default:return[]}}},Object(C["c"])("facility",["facility"]))},Ar=Sr,Mr=(i("70b7"),Object(u["a"])(Ar,Dr,$r,!1,null,"2deef11b",null)),Tr=Mr.exports,Br=new y["a"]({routes:[{name:"registerUser",path:"/register",component:tt,props:function(t){return Object(g["a"])({},t.params)}},{path:"/order",name:"order",component:Ce,props:function(t){return Object(g["a"])({},t.params)}},{path:"/day/:id",name:"day",component:Be,props:function(t){return Object(g["a"])({},t.params)}},{path:"/confirmation",name:"confirmation",component:vi,props:function(t){return Object(g["a"])({},t.params)}},{path:"/allTime",name:"main",component:ve},{path:"/orders",name:"orders",component:Bi},{path:"/order/:id",name:"singleOrder",component:da,props:function(t){return Object(g["a"])({},t.params)}},{path:"/notifications",name:"notifications",component:kr},{path:"/order/:id/booking/:bookingid",name:"singleBooking",component:Ba,props:function(t){return Object(g["a"])({},t.params)}},{path:"/order/:id/booking/:bookingid/edit",name:"edit",component:Ua,props:function(t){return Object(g["a"])({},t.params)}},{path:"/",redirect:{name:"day",params:{id:T().format("DD-MM-YYYY")}}},{path:"/auth",name:"authorization",component:on,meta:{public:!0,disableIfLoggedIn:!0}},{path:"/myFacilities/:id",name:"myFacility",component:Po,props:function(t){return Object(g["a"])({},t.params)}},{path:"/myFacilities/:id/photos",name:"facilityPhotos",component:Pr,props:function(t){return Object(g["a"])({},t.params)}},{path:"/myFacilities/:id/playfields/:p_id",name:"playfield",component:ar,props:function(t){return Object(g["a"])({},t.params)}},{path:"/longTermOrder",name:"longTermOrder",component:Ys},{path:"/availableBookings",name:"availableBookings",component:Xs},{path:"/clients",name:"clients",component:ns},{path:"/clients/:id",name:"singleClient",component:Tr,props:function(t){return Object(g["a"])({},t.params)}},{path:"/myFacilites/:id/playfields/:p_id/settings",name:"playfieldSettings",component:Ns,props:function(t){return Object(g["a"])({},t.params)}},{path:"*",component:lr}]});Br.beforeEach((function(t,e,i){var a=!!window.$cookies.get("access_token");t.meta.public||(a?i():i({name:"authorization"})),a&&t.meta.disableIfLoggedIn&&i({name:"myFacility",params:{id:window.sessionStorage.getItem("active_facility")}}),i()}));var Nr,Ir,Rr,Er,Fr=Br,Vr="setDate",Yr="addBooking",Hr="setPayType",Wr="setClient",zr="setType",Lr="setStatus",qr="replaceBooking",Ur="setOrder",Jr="addDeposit",Zr="updateOrder",Gr="setCompany",Kr="setBookingDiscount",Qr="addBookingDiscount",Xr="setBookingDate",tc="setBookingTime",ec="setBookingField",ic="setBookingPaid",ac="setBookingPrice",sc="setDuration",nc="setBooking",oc="updateBooking",rc="setPlayfieldName",cc="setFacilityId",lc="setFacilityName",dc="setFacilityCountry",uc="setFacilityCoordinates",pc="setFacilityDescription",fc="setFacilityAvatar",_c="setFacilityNumber",hc="setFacilityPlayfields",vc="addFacilityPlayfield",mc="setFacilityAdmin",gc="setFacilityInfr",yc="setPaymentCondition",bc="setFacility",kc="setFacilityContacts",Cc="setPlayfieldName",wc="setSpecifications",Oc="setPlayfield",xc="setPlayfieldIndex",jc="setStart",Pc=function(){return{booking:{id:null,order_id:null,discount:0,date:"",end_time:"",playfield_id:"",paid:0,price:0,start_time:"",duration:0,status:"pending",debt:null}}},Dc=window.location.origin.replace("playfields.",""),$c={namespaced:!0,state:Object(g["a"])({},Pc()),mutations:(Nr={},Object(at["a"])(Nr,Qr,(function(t,e){t.booking.discount+=e})),Object(at["a"])(Nr,Kr,(function(t,e){t.booking.discount=e})),Object(at["a"])(Nr,Xr,(function(t,e){t.booking.date=e})),Object(at["a"])(Nr,tc,(function(t,e){t.booking.start_time=e.start_time,t.booking.end_time=e.end_time})),Object(at["a"])(Nr,ec,(function(t,e){t.booking.playfield_id=e})),Object(at["a"])(Nr,rc,(function(t,e){t.booking.pf_name=e})),Object(at["a"])(Nr,ic,(function(t,e){t.booking.paid+=e})),Object(at["a"])(Nr,ac,(function(t,e){t.booking.price=e})),Object(at["a"])(Nr,sc,(function(t,e){t.booking.duration=e})),Object(at["a"])(Nr,nc,(function(t,e){t.booking=Object(g["a"])({},e)})),Object(at["a"])(Nr,oc,(function(t,e){t.booking=Object(g["a"])(Object(g["a"])({},t.booking),e)})),Object(at["a"])(Nr,Lr,(function(t,e){t.booking.status=e})),Object(at["a"])(Nr,"resetState",(function(t){Object.assign(t,Pc())})),Nr),getters:{getRemainMoney:function(t){return t.booking.price-t.booking.discount-t.booking.paid},getBooking:function(t){return Object(g["a"])({},t.booking)},getDuration:function(t){var e=Math.floor(t.booking.duration/3600),i=t.booking.duration%3600/60;return"".concat(e," ч ").concat(i," мин")},durationFormat:function(t){var e=Math.floor(t.booking.duration/60),i=t.booking.duration%60;return B()().hour(e).minute(i).second(0).format("HH:mm:ss")},getStatus:function(t){switch(t.status){case"completed":return"Завершена";case"canceled":return"Отменена";case"pending":return"В ожидании";case"activated":return"Потверждена"}},getPlayfieldName:function(t){var e,i;return null!==(e=null===(i=JSON.parse(localStorage.getItem("facility")).find((function(e){return e.id===t.booking.playfield_id})))||void 0===i?void 0:i.pf_name)&&void 0!==e?e:""}},actions:{setBookingTime:function(t,e){var i=t.commit;i(tc,e)},setBookingField:function(t,e){var i=t.commit;i(ec,e)},setPlayfieldName:function(t,e){var i=t.commit;i(rc,e)},setBookingDate:function(t,e){var i=t.commit;i(Xr,e)},setBookingPrice:function(t,e){var i=t.commit;i(ac,e)},setBookingDiscountLocal:function(t,e){var i=t.commit;i(Kr,e)},setBookingDiscount:function(t,e){return Object(o["a"])(regeneratorRuntime.mark((function i(){var a;return regeneratorRuntime.wrap((function(i){while(1)switch(i.prev=i.next){case 0:return a=t.commit,i.next=3,G.a.post("".concat(Dc,"/crm/user/").concat(window.$cookies.get("id"),"/reservation/").concat(e.id,"/discount"),{discount:e.discount},{headers:{Authorization:"Bearer ".concat(window.$cookies.get("access_token"))}}).then((function(t){return a(oc,t.data.booking)}));case 3:case"end":return i.stop()}}),i)})))()},addBookingDiscount:function(t,e){var i=t.commit;i(Qr,e)},setDuration:function(t,e){var i=t.commit;i(sc,e)},setBookingPaid:function(t,e){return Object(o["a"])(regeneratorRuntime.mark((function i(){var a;return regeneratorRuntime.wrap((function(i){while(1)switch(i.prev=i.next){case 0:return a=t.commit,i.next=3,G.a.post("".concat(Dc,"/crm/user/").concat(window.$cookies.get("id"),"/reservation/").concat(e.id,"/payment"),{payment:e.money},{headers:{Authorization:"Bearer ".concat(window.$cookies.get("access_token"))}}).then((function(t){return a(oc,t.data.booking)}));case 3:case"end":return i.stop()}}),i)})))()},setBooking:function(t,e){var i=t.commit;i(nc,e)},updateBooking:function(t,e){var i=t.commit;i(oc,e)},setStatus:function(t,e){var i=t.commit;i(Lr,e)},resetState:function(t){var e=t.commit;e("resetState")}}},Sc=$c,Ac=function(){return{order:{booking:[],client:{id:null,firstname:"",lastname:"",phone:"",is_temporary:null,avatar:""},company:"",payment_type:"cash",start_date:"",end_date:"",type:0,status:"pending",deposit:0,total_discount:0,total_price:0,paid:0,debt:0,residue:0}}},Mc={namespaced:!0,state:function(){return Ac()},getters:{getAllDiscount:function(t){return t.order.booking.filter((function(t){return"canceled"!==t.status})).reduce((function(t,e){return t+parseInt(e.discount)}),0)},getAllCost:function(t){return t.order.booking.filter((function(t){return"canceled"!==t.status})).reduce((function(t,e){return t+parseInt(e.price)}),0)},getAllPaid:function(t){return t.order.booking.filter((function(t){return"canceled"!==t.status})).reduce((function(t,e){return t+parseInt(e.paid)}),0)},getRemainMoney:function(t,e){return e.getAllCost-e.getAllDiscount-e.getAllPaid},getStatus:function(t){switch(t.status){case"completed":return"Завершен";case"canceled":return"Отменен";case"pending":return"В ожидании";case"activated":return"Потвержден"}},getOrder:function(t){return t.order},getClient:function(t){return t.order.client}},mutations:(Ir={},Object(at["a"])(Ir,Vr,(function(t,e){t.order=Object(g["a"])(Object(g["a"])({},t.order),{},{start_date:e.start_date,end_date:e.end_date})})),Object(at["a"])(Ir,Gr,(function(t,e){t.order=Object(g["a"])(Object(g["a"])({},t.order),{},{company:e})})),Object(at["a"])(Ir,Yr,(function(t,e){t.order=Object(g["a"])(Object(g["a"])({},t.order),{},{booking:[e]})})),Object(at["a"])(Ir,Hr,(function(t,e){t.order=Object(g["a"])(Object(g["a"])({},t.order),{},{payment_type:e})})),Object(at["a"])(Ir,Wr,(function(t,e){t.order=Object(g["a"])(Object(g["a"])({},t.order),{},{client:Object(g["a"])({},e)})})),Object(at["a"])(Ir,Jr,(function(t,e){t.order=Object(g["a"])(Object(g["a"])({},t.order),{},{deposit:e})})),Object(at["a"])(Ir,zr,(function(t,e){t.order=Object(g["a"])(Object(g["a"])({},t.order),{},{type:e})})),Object(at["a"])(Ir,Lr,(function(t,e){t.order=Object(g["a"])(Object(g["a"])({},t.order),{},{status:e})})),Object(at["a"])(Ir,Ur,(function(t,e){t.order=Object(g["a"])({},e)})),Object(at["a"])(Ir,Zr,(function(t,e){t.order=Object(g["a"])(Object(g["a"])({},t.order),e)})),Object(at["a"])(Ir,qr,(function(t,e){t.order=Object(g["a"])(Object(g["a"])({},t.order),{},{booking:e})})),Object(at["a"])(Ir,Kr,(function(t,e){var i=t.order.booking.map((function(t){return Object(g["a"])(Object(g["a"])({},t),{},{discount:e})}));t.order=Object(g["a"])(Object(g["a"])({},t.order),{},{booking:i})})),Object(at["a"])(Ir,"resetState",(function(t){Object.assign(t,Ac())})),Ir),actions:{resetState:function(t){var e=t.commit;e("resetState")},setCompany:function(t,e){var i=t.commit;i(Gr,e)},setType:function(t,e){var i=t.commit;i(zr,e)},setDate:function(t,e){var i=t.commit;i(Vr,e)},addBooking:function(t,e){var i=t.commit;i(Yr,e)},setClient:function(t,e){var i=t.commit;i(Wr,e)},setPayType:function(t,e){var i=t.commit;i(Hr,e)},setStatus:function(t,e){var i=t.commit;i(Lr,e)},setBookingDiscount:function(t,e){var i=t.commit;i(Kr,e)},addDeposit:function(t,e){var i=t.commit;i(Jr,e)},setOrder:function(t,e){var i=t.commit;i(Ur,e)},replaceBooking:function(t,e){var i=t.commit;i(qr,e)},updateOrder:function(t,e){var i=t.commit;i(Zr,e)}}},Tc=Mc,Bc=function(){return{facility:{id:null,fc_name:"",country:null,city:null,address:"",latitude:null,longitude:null,description:"",avatar:"",pf_num:null,playfields:null,crm_user_id:null,infrstruct:null,cancel_time:null,prepaid:null,contacts:null}}},Nc=window.location.origin.replace("playfields.",""),Ic={namespaced:!0,state:function(){return Bc()},getters:{getFacility:function(t){return t.facility}},mutations:(Rr={},Object(at["a"])(Rr,cc,(function(t,e){t.facility.id=e})),Object(at["a"])(Rr,lc,(function(t,e){t.facility.fc_name=e})),Object(at["a"])(Rr,dc,(function(t,e){t.facility.country=e})),Object(at["a"])(Rr,uc,(function(t,e){t.facility.address=e.address,t.facility.latitude=e.lat,t.facility.longitude=e.lng})),Object(at["a"])(Rr,pc,(function(t,e){t.facility.description=e})),Object(at["a"])(Rr,fc,(function(t,e){t.facility.avatar=e})),Object(at["a"])(Rr,_c,(function(t,e){t.facility.pf_num=e})),Object(at["a"])(Rr,hc,(function(t,e){t.facility.playfields=e,t.facility=Object(g["a"])({},t.facility)})),Object(at["a"])(Rr,vc,(function(t,e){t.facility.playfields.push(e)})),Object(at["a"])(Rr,mc,(function(t,e){t.facility.crm_user_id=e})),Object(at["a"])(Rr,gc,(function(t,e){t.facility.infrastruct=e})),Object(at["a"])(Rr,yc,(function(t,e){t.facility.cancel_time=e.cancel_time,t.facility.prepaid=e.prepaid})),Object(at["a"])(Rr,bc,(function(t,e){t.facility=e})),Object(at["a"])(Rr,kc,(function(t,e){t.contacts=e})),Object(at["a"])(Rr,"resetState",(function(t){Object.assign(t,Bc())})),Rr),actions:{resetState:function(t){var e=t.commit;e("resetState")},setFacilityId:function(t,e){var i=t.commit;i(cc,e)},setFacilityName:function(t,e){var i=t.commit;i(lc,e)},setFacilityCountry:function(t,e){var i=t.commit;i(dc,e)},setFacilityCoordinates:function(t,e){var i=t.commit;i(uc,e)},setFacilityDescription:function(t,e){var i=t.commit;i(pc,e)},setFacilityAvatar:function(t,e){var i=t.commit;i(fc,e)},setFacilityNumber:function(t,e){var i=t.commit;i(_c,e)},setFacilityPlayfields:function(t,e){var i=t.commit;i(hc,e)},addFacilityPlayfield:function(t,e){var i=t.commit;i(vc,e)},setFacilityAdmin:function(t,e){var i=t.commit;i(mc,e)},setFacilityInfr:function(t,e){var i=t.commit;i(gc,e)},setFacilityContacts:function(t,e){var i=t.commit;i(kc,e)},setFacilityPaymentCondition:function(t,e){var i=t.commit;i(yc,e)},setFacility:function(t,e){var i=t.commit;i(bc,e)},setPlayfields:function(t){return Object(o["a"])(regeneratorRuntime.mark((function e(){var i,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return i=t.commit,a=t.state,e.next=3,G.a.get("".concat(Nc,"/crm/user/").concat(window.$cookies.get("id"),"/facility/").concat(a.facility.id,"/playfields"),{headers:{Authorization:"Bearer ".concat(window.$cookies.get("access_token"))}}).then((function(t){return i(hc,t.data.playfields)})).catch((function(t){return console.log(t)}));case 3:case"end":return e.stop()}}),e)})))()},resetFacility:function(t,e){return Object(o["a"])(regeneratorRuntime.mark((function i(){var a;return regeneratorRuntime.wrap((function(i){while(1)switch(i.prev=i.next){case 0:return a=t.commit,i.next=3,G.a.get("".concat(Nc,"/crm/user/").concat(window.$cookies.get("id"),"/facility/").concat(e),{headers:{Authorization:"Bearer ".concat(window.$cookies.get("access_token"))}}).then((function(t){a(bc,t.data.facility),a(hc,t.data.facility.playfields)})).catch((function(t){return console.log(t)}));case 3:case"end":return i.stop()}}),i)})))()},getAllFacilities:function(t){return Object(o["a"])(regeneratorRuntime.mark((function e(){var i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return i=t.dispatch,e.next=3,G.a.get("".concat(Nc,"/crm/user/").concat(window.$cookies.get("id"),"/facilities"),{headers:{Authorization:"Bearer ".concat(window.$cookies.get("access_token"))}}).then(function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(e){var a,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a=e.data.user.facilities,s=Object(st["a"])(a.map((function(t){return{value:t.id,text:t.fc_name}}))),sessionStorage.setItem("facilities",JSON.stringify(s)),sessionStorage.setItem("active_facility",a[0].id),t.next=6,i("setFacility",a.find((function(t){return t.id===sessionStorage.getItem("active_facility")}))||a[0]);case 6:return t.next=8,i("setPlayfields");case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}());case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})))()}}},Rc=Ic,Ec=function(){return{playfield:{}}},Fc={namespaced:!0,state:function(){return Ec()},getters:{getSurface:function(t){var e="";switch(t.playfield.surf_type){case 0:e="Трава.";break;case 1:e="Искусственная трава.";break;case 2:e="Паркет.";break;case 3:e="Грунт.";break;case 4:e="Песок.";break;case 5:e="Бетон.";break;case 6:e="Резина.";break;default:e="Не указан."}return e},getIndoor:function(t){return t.playfield.indoor?"Крытая.":"Открытая."},getFormat:function(t){return t.playfield.format?"".concat(t.playfield.format,"x").concat(t.playfield.format,"."):"Не указан."},getLengthWidth:function(t){return"".concat(t.playfield.length,"м x ").concat(t.playfield.width,"м.")}},mutations:(Er={},Object(at["a"])(Er,Cc,(function(t,e){t.playfield.pf_name=e})),Object(at["a"])(Er,wc,(function(t,e){t.playfield.indoor=e.indoor,t.playfield.surf_type=e.surf_type,t.playfield.format=e.format,t.playfield.length=e.length,t.playfield.width=e.width})),Object(at["a"])(Er,Oc,(function(t,e){t.playfield=Object(g["a"])(Object(g["a"])({},t.playfield),e)})),Object(at["a"])(Er,xc,(function(t,e){t.playfield.local_sort=e})),Er),actions:{setPlayfield:function(t,e){var i=t.commit;i(Oc,e)},setPlayfieldName:function(t,e){var i=t.commit;i(Cc,e)},setSpecifications:function(t,e){var i=t.commit;i(wc,e)},setPlayfieldIndex:function(t,e){var i=t.commit;i(xc,e)}}},Vc=Fc,Yc=i("8468"),Hc={namespaced:!0,state:{user:{id:null,access_token:"",isAuthenticated:!1}},mutations:{setIsAuthenticated:function(t,e){t.user.isAuthenticated=e}},actions:{loginUser:function(t,e){return Object(o["a"])(regeneratorRuntime.mark((function i(){var a;return regeneratorRuntime.wrap((function(i){while(1)switch(i.prev=i.next){case 0:return Object(Yc["a"])(t),a=window.location.origin.replace("playfields.",""),i.next=4,G.a.post("".concat(a,"/crm/user/login"),{username:e.tel,password:e.password}).then((function(t){200===t.status&&(window.$cookies.set("access_token",t.data.token.access_token,"1d"),window.$cookies.set("id",t.data.user.id,"1d"),window.$cookies.set("phone",t.data.user.phone,"1d"))})).catch((function(){window.$cookies.remove("id"),window.$cookies.remove("access_token"),sessionStorage.removeItem("facilities"),sessionStorage.removeItem("active_facility")}));case 4:case"end":return i.stop()}}),i)})))()}}},Wc=Hc,zc={namespaced:!0,state:{start:!1},mutations:Object(at["a"])({},jc,(function(t,e){this.start=e})),actions:{setStart:function(t,e){var i=t.commit;i(jc,e)}}},Lc=zc;a["a"].use(C["a"]);var qc=new C["a"].Store({modules:{order:Tc,booking:Sc,facility:Rc,playfield:Vc,admin:Wc,spinner:Lc}}),Uc=qc,Jc=i("1dce"),Zc=i.n(Jc),Gc=i("2b27"),Kc=i.n(Gc),Qc=i("7699"),Xc=i.n(Qc);a["a"].config.productionTip=!1,a["a"].use(y["a"]),a["a"].use(Zc.a),a["a"].use(Kc.a),a["a"].use(Xc.a.default);var tl=window.location.origin.replace("playfields.","");new a["a"]({render:function(t){return t(m)},props:[tl],router:Fr,store:Uc}).$mount("#app")},"593c":function(t,e,i){},"594a":function(t,e,i){},"625f":function(t,e,i){"use strict";i("be7e")},6521:function(t,e,i){"use strict";i("0b16")},"65aa":function(t,e,i){},"6a1b":function(t,e,i){},"70b7":function(t,e,i){"use strict";i("cd17")},"731c":function(t,e,i){"use strict";i("50c1")},"732f":function(t,e,i){},"748e":function(t,e,i){"use strict";i("0f98")},7871:function(t,e,i){"use strict";i("8f14")},"78df":function(t,e,i){"use strict";i("164f")},"7c7f":function(t,e,i){"use strict";i("fa31")},"7cc2":function(t,e,i){"use strict";i("a1e8")},"7d67":function(t,e,i){"use strict";i("2148")},"813a":function(t,e,i){"use strict";i("1c26")},"81be":function(t,e,i){},"829d":function(t,e,i){},8583:function(t,e,i){},"85ec":function(t,e,i){},8678:function(t,e,i){"use strict";i("bcb5")},"870a":function(t,e,i){},"882e":function(t,e,i){"use strict";i("b937")},"896d":function(t,e,i){"use strict";i("593c")},"8ccd":function(t,e,i){"use strict";i("829d")},"8f14":function(t,e,i){},9057:function(t,e,i){},"96ff":function(t,e,i){"use strict";i("9a5c")},"97fd":function(t,e,i){},"994d":function(t,e,i){},"9a5c":function(t,e,i){},"9b99":function(t,e,i){},"9e5b":function(t,e,i){},"9eaf":function(t,e,i){"use strict";i("994d")},"9fee":function(t,e,i){"use strict";i("c451")},a1e8:function(t,e,i){},a496:function(t,e,i){},a7ce:function(t,e,i){"use strict";i("81be")},a93b:function(t,e,i){"use strict";i("bd1d")},aad9:function(t,e,i){"use strict";i("594a")},ac4a:function(t,e,i){},ace3:function(t,e,i){"use strict";i("9e5b")},ad2f:function(t,e,i){},af59:function(t,e,i){},af8b:function(t,e,i){},b937:function(t,e,i){},b982:function(t,e,i){},bcb5:function(t,e,i){},bd1d:function(t,e,i){},bd58:function(t,e,i){},be7e:function(t,e,i){},beab:function(t,e,i){"use strict";i("347f")},bf05:function(t,e,i){},c0aa:function(t,e,i){"use strict";i("fa72")},c10b:function(t,e,i){"use strict";i("c301")},c274:function(t,e,i){},c301:function(t,e,i){},c38e:function(t,e,i){"use strict";i("1d71")},c451:function(t,e,i){},c7a7:function(t,e,i){"use strict";i("ad2f")},c864:function(t,e,i){},ca51:function(t,e,i){"use strict";i("401b")},cbb6:function(t,e,i){},cca7:function(t,e,i){},cd17:function(t,e,i){},ce2c:function(t,e,i){},cf60:function(t,e,i){},d116:function(t,e,i){},d40b:function(t,e,i){},d40c:function(t,e,i){},d709:function(t,e,i){},d736:function(t,e,i){"use strict";i("ec1c")},da1b:function(t,e,i){"use strict";i("dc46")},dc46:function(t,e,i){},dcb2:function(t,e,i){"use strict";i("ac4a")},dede:function(t,e,i){"use strict";i("0956")},e106:function(t,e,i){},e20a:function(t,e,i){"use strict";i("549d")},e2fe:function(t,e,i){"use strict";i("cca7")},e63d:function(t,e,i){},ec1c:function(t,e,i){},ec27:function(t,e,i){},edf1:function(t,e,i){},ee72:function(t,e,i){"use strict";i("c274")},f13f:function(t,e,i){"use strict";i("c864")},f318:function(t,e,i){},f682:function(t,e,i){"use strict";i("9b99")},f792:function(t,e,i){"use strict";i("edf1")},fa31:function(t,e,i){},fa72:function(t,e,i){},fb2b:function(t,e,i){"use strict";i("19ac")}});
//# sourceMappingURL=app.88f38d32.js.map